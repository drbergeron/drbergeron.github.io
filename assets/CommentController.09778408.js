import{c as ye,a as h,h as _,P as Kt,p as Vl,q as Qt,ag as ql,t as zl,r as O,v as Ut,ah as Tl,D as Bl,ai as Al,y as Il,aj as Fl,w as ie,aw as Ol,ap as Ml,ax as Pl,ay as It,J as El,az as Ll,b as gt,T as Wt,d as tt,g as Le,aA as Rl,aB as $l,aC as Hl,C as Se,aD as Dl,aE as Xt,aF as ht,aG as Yt,aH as Gt,aI as Jt,aJ as Nl,aK as jl,F as Kl,B as re,aL as Ql,a8 as Ul,n as Wl,aM as Xl,aN as Yl,aO as Gl,aP as Jl,e as he,as as Zl,aQ as en,aR as Ft,aS as He,aT as tn,aU as ln,ab as rt,aV as nn,ao as Oe,aa as an,aW as on,f as Me,k as Ot,m as un,I as rn,aX as sn,R as St,o as Zt,S as ne,a3 as Ve,Y as V,Q as Ke,V as P,$ as te,a1 as Ce,U as xe,aY as ft,a0 as el,a5 as Je,a4 as vt,aZ as tl,O as cn,Z as De,_ as se}from"./index.93f3fa1c.js";import{u as ll,l as Mt,m as dn,n as fn,o as nl,p as Pt,r as Et,q as vn,t as mn,w as Lt,b as je,a as _e,Q as al,x as mt,s as gn,y as hn,z as Sn,I as ol,A as Rt,P as il,B as $t,E as yn,h as bn,D as Ht,F as pn,H as wn,J as kn,K as Cn,L as xn,G as Dt,S as Ge,j as _n,v as Vn,N as st,g as Pe,i as ct}from"./injectKeys.b11ed45b.js";const qn=["top","middle","bottom"];var zn=ye({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>qn.includes(e)}},setup(e,{slots:a}){const n=h(()=>e.align!==void 0?{verticalAlign:e.align}:null),u=h(()=>{const S=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(S!==void 0?` text-${S}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>_("div",{class:u.value,style:n.value,role:"status","aria-label":e.label},Kt(a.default,e.label!==void 0?[e.label]:[]))}}),ul=ye({name:"QMenu",inheritAttrs:!1,props:{...ll,...Vl,...Qt,...ql,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Mt},self:{type:String,validator:Mt},offset:{type:Array,validator:dn},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...zl,"click","escapeKey"],setup(e,{slots:a,emit:n,attrs:u}){let S=null,l,w,d;const y=Le(),{proxy:F}=y,{$q:c}=F,b=O(null),m=O(!1),f=h(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),I=Ut(e,c),{registerTick:k,removeTick:C}=Tl(),{registerTimeout:N}=Bl(),{transitionProps:E,transitionStyle:Y}=Al(e),{localScrollTarget:$,changeScrollEvent:L,unconfigureScrollTarget:X}=fn(e,A),{anchorEl:T,canShow:G}=nl({showing:m}),{hide:J}=Il({showing:m,canShow:G,handleShow:v,handleHide:r,hideOnRouteChange:f,processOnMount:!0}),{showPortal:ue,hidePortal:Z,renderPortal:de}=Fl(y,b,U),x={anchorEl:T,innerRef:b,onClickOutside(o){if(e.persistent!==!0&&m.value===!0)return J(o),(o.type==="touchstart"||o.target.classList.contains("q-dialog__backdrop"))&&Se(o),!0}},g=h(()=>Pt(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),B=h(()=>e.cover===!0?g.value:Pt(e.self||"top start",c.lang.rtl)),K=h(()=>(e.square===!0?" q-menu--square":"")+(I.value===!0?" q-menu--dark q-dark":"")),ae=h(()=>e.autoClose===!0?{onClick:H}:{}),me=h(()=>m.value===!0&&e.persistent!==!0);ie(me,o=>{o===!0?($l(M),mn(x)):(It(M),Et(x))});function fe(){Rl(()=>{let o=b.value;o&&o.contains(document.activeElement)!==!0&&(o=o.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.querySelector("[autofocus], [data-autofocus]")||o,o.focus({preventScroll:!0}))})}function v(o){if(S=e.noRefocus===!1?document.activeElement:null,Ol(Q),ue(),A(),l=void 0,o!==void 0&&(e.touchPosition||e.contextMenu)){const W=Ml(o);if(W.left!==void 0){const{top:ge,left:be}=T.value.getBoundingClientRect();l={left:W.left-be,top:W.top-ge}}}w===void 0&&(w=ie(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,q)),e.noFocus!==!0&&document.activeElement.blur(),k(()=>{q(),e.noFocus!==!0&&fe()}),N(()=>{c.platform.is.ios===!0&&(d=e.autoClose,b.value.click()),q(),ue(!0),n("show",o)},e.transitionDuration)}function r(o){C(),Z(),p(!0),S!==null&&(o===void 0||o.qClickOutside!==!0)&&(((o&&o.type.indexOf("key")===0?S.closest('[tabindex]:not([tabindex^="-"])'):void 0)||S).focus(),S=null),N(()=>{Z(!0),n("hide",o)},e.transitionDuration)}function p(o){l=void 0,w!==void 0&&(w(),w=void 0),(o===!0||m.value===!0)&&(Pl(Q),X(),Et(x),It(M)),o!==!0&&(S=null)}function A(){(T.value!==null||e.scrollTarget!==void 0)&&($.value=El(T.value,e.scrollTarget),L($.value,q))}function H(o){d!==!0?(Ll(F,o),n("click",o)):d=!1}function Q(o){me.value===!0&&e.noFocus!==!0&&Hl(b.value,o.target)!==!0&&fe()}function M(o){n("escapeKey"),J(o)}function q(){const o=b.value;o===null||T.value===null||vn({el:o,offset:e.offset,anchorEl:T.value,anchorOrigin:g.value,selfOrigin:B.value,absoluteOffset:l,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function U(){return _(Wt,E.value,()=>m.value===!0?_("div",{role:"menu",...u,ref:b,tabindex:-1,class:["q-menu q-position-engine scroll"+K.value,u.class],style:[u.style,Y.value],...ae.value},gt(a.default)):null)}return tt(p),Object.assign(F,{focus:fe,updatePosition:q}),de}}),rl=ye({name:"QPopupProxy",props:{...ll,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:a,emit:n,attrs:u}){const{proxy:S}=Le(),{$q:l}=S,w=O(!1),d=O(null),y=h(()=>parseInt(e.breakpoint,10)),{canShow:F}=nl({showing:w});function c(){return l.screen.width<y.value||l.screen.height<y.value?"dialog":"menu"}const b=O(c()),m=h(()=>b.value==="menu"?{maxHeight:"99vh"}:{});ie(()=>c(),k=>{w.value!==!0&&(b.value=k)});function f(k){w.value=!0,n("show",k)}function I(k){w.value=!1,b.value=c(),n("hide",k)}return Object.assign(S,{show(k){F(k)===!0&&d.value.show(k)},hide(k){d.value.hide(k)},toggle(k){d.value.toggle(k)}}),Dl(S,"currentComponent",()=>({type:b.value,ref:d.value})),()=>{const k={ref:d,...m.value,...u,onShow:f,onHide:I};let C;return b.value==="dialog"?C=Xt:(C=ul,Object.assign(k,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),_(C,k,a.default)}}}),Tn=ye({name:"QField",inheritAttrs:!1,props:ht,emits:Yt,setup(){return Gt(Jt())}});const Bn={xs:8,sm:10,md:14,lg:20,xl:24};var Ze=ye({name:"QChip",props:{...Qt,...Nl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:a,emit:n}){const{proxy:{$q:u}}=Le(),S=Ut(e,u),l=jl(e,Bn),w=h(()=>e.selected===!0||e.icon!==void 0),d=h(()=>e.selected===!0?e.iconSelected||u.iconSet.chip.selected:e.icon),y=h(()=>e.iconRemove||u.iconSet.chip.remove),F=h(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=h(()=>{const C=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(C?` text-${C} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(F.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(S.value===!0?" q-chip--dark q-dark":"")}),b=h(()=>{const C=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},N={...C,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||u.lang.label.remove};return{chip:C,remove:N}});function m(C){C.keyCode===13&&f(C)}function f(C){e.disable||(n("update:selected",!e.selected),n("click",C))}function I(C){(C.keyCode===void 0||C.keyCode===13)&&(Se(C),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function k(){const C=[];F.value===!0&&C.push(_("div",{class:"q-focus-helper"})),w.value===!0&&C.push(_(re,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const N=e.label!==void 0?[_("div",{class:"ellipsis"},[e.label])]:void 0;return C.push(_("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ql(a.default,N))),e.iconRight&&C.push(_(re,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&C.push(_(re,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:y.value,...b.value.remove,onClick:I,onKeyup:I})),C}return()=>{if(e.modelValue===!1)return;const C={class:c.value,style:l.value};return F.value===!0&&Object.assign(C,b.value.chip,{onClick:f,onKeyup:m}),Kl("div",C,k(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Ul,e.ripple]])}}});let et=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const a=document.createElement("div");Object.assign(a.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(a),e.scrollLeft=-1e3,et=e.scrollLeft>=0,e.remove()}const ce=1e3,An=["start","center","end","start-force","center-force","end-force"],sl=Array.prototype.filter,In=window.getComputedStyle(document.body).overflowAnchor===void 0?Wl:function(e,a){e!==null&&(cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;const n=e.children||[];sl.call(n,S=>S.dataset&&S.dataset.qVsAnchor!==void 0).forEach(S=>{delete S.dataset.qVsAnchor});const u=n[a];u&&u.dataset&&(u.dataset.qVsAnchor="")}))};function Ee(e,a){return e+a}function dt(e,a,n,u,S,l,w,d){const y=e===window?document.scrollingElement||document.documentElement:e,F=S===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-w-d,scrollMaxSize:0,offsetStart:-w,offsetEnd:-d};if(S===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=y.scrollLeft,c.scrollViewSize+=y.clientWidth),c.scrollMaxSize=y.scrollWidth,l===!0&&(c.scrollStart=(et===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=y.scrollTop,c.scrollViewSize+=y.clientHeight),c.scrollMaxSize=y.scrollHeight),n!==null)for(let b=n.previousElementSibling;b!==null;b=b.previousElementSibling)b.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=b[F]);if(u!==null)for(let b=u.nextElementSibling;b!==null;b=b.nextElementSibling)b.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=b[F]);if(a!==e){const b=y.getBoundingClientRect(),m=a.getBoundingClientRect();S===!0?(c.offsetStart+=m.left-b.left,c.offsetEnd-=m.width):(c.offsetStart+=m.top-b.top,c.offsetEnd-=m.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function Nt(e,a,n,u){a==="end"&&(a=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(u===!0&&(a=(et===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-a),window.scrollTo(a,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,a):n===!0?(u===!0&&(a=(et===!0?e.scrollWidth-e.offsetWidth:0)-a),e.scrollLeft=a):e.scrollTop=a}function Ne(e,a,n,u){if(n>=u)return 0;const S=a.length,l=Math.floor(n/ce),w=Math.floor((u-1)/ce)+1;let d=e.slice(l,w).reduce(Ee,0);return n%ce!==0&&(d-=a.slice(l*ce,n).reduce(Ee,0)),u%ce!==0&&u!==S&&(d-=a.slice(u,w*ce).reduce(Ee,0)),d}const Fn={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},On={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Fn};function Mn({virtualScrollLength:e,getVirtualScrollTarget:a,getVirtualScrollEl:n,virtualScrollItemSizeComputed:u}){const S=Le(),{props:l,emit:w,proxy:d}=S,{$q:y}=d;let F,c,b,m=[],f;const I=O(0),k=O(0),C=O({}),N=O(null),E=O(null),Y=O(null),$=O({from:0,to:0}),L=h(()=>l.tableColspan!==void 0?l.tableColspan:100);u===void 0&&(u=h(()=>l.virtualScrollItemSize));const X=h(()=>u.value+";"+l.virtualScrollHorizontal),T=h(()=>X.value+";"+l.virtualScrollSliceRatioBefore+";"+l.virtualScrollSliceRatioAfter);ie(T,()=>{K()}),ie(X,G);function G(){B(c,!0)}function J(r){B(r===void 0?c:r)}function ue(r,p){const A=a();if(A==null||A.nodeType===8)return;const H=dt(A,n(),N.value,E.value,l.virtualScrollHorizontal,y.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd);b!==H.scrollViewSize&&K(H.scrollViewSize),de(A,H,Math.min(e.value-1,Math.max(0,parseInt(r,10)||0)),0,An.indexOf(p)>-1?p:c>-1&&r>c?"end":"start")}function Z(){const r=a();if(r==null||r.nodeType===8)return;const p=dt(r,n(),N.value,E.value,l.virtualScrollHorizontal,y.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd),A=e.value-1,H=p.scrollMaxSize-p.offsetStart-p.offsetEnd-k.value;if(F===p.scrollStart)return;if(p.scrollMaxSize<=0){de(r,p,0,0);return}b!==p.scrollViewSize&&K(p.scrollViewSize),x($.value.from);const Q=Math.floor(p.scrollMaxSize-Math.max(p.scrollViewSize,p.offsetEnd)-Math.min(f[A],p.scrollViewSize/2));if(Q>0&&Math.ceil(p.scrollStart)>=Q){de(r,p,A,p.scrollMaxSize-p.offsetEnd-m.reduce(Ee,0));return}let M=0,q=p.scrollStart-p.offsetStart,U=q;if(q<=H&&q+p.scrollViewSize>=I.value)q-=I.value,M=$.value.from,U=q;else for(let o=0;q>=m[o]&&M<A;o++)q-=m[o],M+=ce;for(;q>0&&M<A;)q-=f[M],q>-p.scrollViewSize?(M++,U=q):U=f[M]+q;de(r,p,M,U)}function de(r,p,A,H,Q){const M=typeof Q=="string"&&Q.indexOf("-force")>-1,q=M===!0?Q.replace("-force",""):Q,U=q!==void 0?q:"start";let o=Math.max(0,A-C.value[U]),W=o+C.value.total;W>e.value&&(W=e.value,o=Math.max(0,W-C.value.total)),F=p.scrollStart;const ge=o!==$.value.from||W!==$.value.to;if(ge===!1&&q===void 0){me(A);return}const{activeElement:be}=document,ve=Y.value;ge===!0&&ve!==null&&ve!==be&&ve.contains(be)===!0&&(ve.addEventListener("focusout",g),setTimeout(()=>{ve!==null&&ve.removeEventListener("focusout",g)})),In(ve,A-o);const Qe=q!==void 0?f.slice(o,A).reduce(Ee,0):0;if(ge===!0){const pe=W>=$.value.from&&o<=$.value.to?$.value.to:W;$.value={from:o,to:pe},I.value=Ne(m,f,0,o),k.value=Ne(m,f,W,e.value),requestAnimationFrame(()=>{$.value.to!==W&&F===p.scrollStart&&($.value={from:$.value.from,to:W},k.value=Ne(m,f,W,e.value))})}requestAnimationFrame(()=>{if(F!==p.scrollStart)return;ge===!0&&x(o);const pe=f.slice(o,A).reduce(Ee,0),qe=pe+p.offsetStart+I.value,Ue=qe+f[A];let Re=qe+H;if(q!==void 0){const lt=pe-Qe,le=p.scrollStart+lt;Re=M!==!0&&le<qe&&Ue<le+p.scrollViewSize?le:q==="end"?Ue-p.scrollViewSize:qe-(q==="start"?0:Math.round((p.scrollViewSize-f[A])/2))}F=Re,Nt(r,Re,l.virtualScrollHorizontal,y.lang.rtl),me(A)})}function x(r){const p=Y.value;if(p){const A=sl.call(p.children,o=>o.classList&&o.classList.contains("q-virtual-scroll--skip")===!1),H=A.length,Q=l.virtualScrollHorizontal===!0?o=>o.getBoundingClientRect().width:o=>o.offsetHeight;let M=r,q,U;for(let o=0;o<H;){for(q=Q(A[o]),o++;o<H&&A[o].classList.contains("q-virtual-scroll--with-prev")===!0;)q+=Q(A[o]),o++;U=q-f[M],U!==0&&(f[M]+=U,m[Math.floor(M/ce)]+=U),M++}}}function g(){Y.value!==null&&Y.value!==void 0&&Y.value.focus()}function B(r,p){const A=1*u.value;(p===!0||Array.isArray(f)===!1)&&(f=[]);const H=f.length;f.length=e.value;for(let M=e.value-1;M>=H;M--)f[M]=A;const Q=Math.floor((e.value-1)/ce);m=[];for(let M=0;M<=Q;M++){let q=0;const U=Math.min((M+1)*ce,e.value);for(let o=M*ce;o<U;o++)q+=f[o];m.push(q)}c=-1,F=void 0,I.value=Ne(m,f,0,$.value.from),k.value=Ne(m,f,$.value.to,e.value),r>=0?(x($.value.from),he(()=>{ue(r)})):fe()}function K(r){if(r===void 0&&typeof window!="undefined"){const q=a();q!=null&&q.nodeType!==8&&(r=dt(q,n(),N.value,E.value,l.virtualScrollHorizontal,y.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd).scrollViewSize)}b=r;const p=parseFloat(l.virtualScrollSliceRatioBefore)||0,A=parseFloat(l.virtualScrollSliceRatioAfter)||0,H=1+p+A,Q=r===void 0||r<=0?1:Math.ceil(r/u.value),M=Math.max(1,Q,Math.ceil((l.virtualScrollSliceSize>0?l.virtualScrollSliceSize:10)/H));C.value={total:Math.ceil(M*H),start:Math.ceil(M*p),center:Math.ceil(M*(.5+p)),end:Math.ceil(M*(1+p)),view:Q}}function ae(r,p){const A=l.virtualScrollHorizontal===!0?"width":"height",H={["--q-virtual-scroll-item-"+A]:u.value+"px"};return[r==="tbody"?_(r,{class:"q-virtual-scroll__padding",key:"before",ref:N},[_("tr",[_("td",{style:{[A]:`${I.value}px`,...H},colspan:L.value})])]):_(r,{class:"q-virtual-scroll__padding",key:"before",ref:N,style:{[A]:`${I.value}px`,...H}}),_(r,{class:"q-virtual-scroll__content",key:"content",ref:Y,tabindex:-1},p.flat()),r==="tbody"?_(r,{class:"q-virtual-scroll__padding",key:"after",ref:E},[_("tr",[_("td",{style:{[A]:`${k.value}px`,...H},colspan:L.value})])]):_(r,{class:"q-virtual-scroll__padding",key:"after",ref:E,style:{[A]:`${k.value}px`,...H}})]}function me(r){c!==r&&(l.onVirtualScroll!==void 0&&w("virtualScroll",{index:r,from:$.value.from,to:$.value.to-1,direction:r<c?"decrease":"increase",ref:d}),c=r)}K();const fe=Xl(Z,y.platform.is.ios===!0?120:35);Yl(()=>{K()});let v=!1;return Gl(()=>{v=!0}),Jl(()=>{if(v!==!0)return;const r=a();F!==void 0&&r!==void 0&&r!==null&&r.nodeType!==8?Nt(r,F,l.virtualScrollHorizontal,y.lang.rtl):ue(c)}),tt(()=>{fe.cancel()}),Object.assign(d,{scrollTo:ue,reset:G,refresh:J}),{virtualScrollSliceRange:$,virtualScrollSliceSizeComputed:C,setVirtualScrollSize:K,onVirtualScrollEvt:fe,localResetVirtualScroll:B,padVirtualScroll:ae,scrollTo:ue,reset:G,refresh:J}}const jt=e=>["add","add-unique","toggle"].includes(e),Pn=".*+?^${}()|[]\\",En=Object.keys(ht);var Ln=ye({name:"QSelect",inheritAttrs:!1,props:{...On,...Zl,...ht,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:jt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Yt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:a,emit:n}){const{proxy:u}=Le(),{$q:S}=u,l=O(!1),w=O(!1),d=O(-1),y=O(""),F=O(!1),c=O(!1);let b,m,f,I,k,C,N,E,Y;const $=O(null),L=O(null),X=O(null),T=O(null),G=O(null),J=en(e),ue=nn(qt),Z=h(()=>Array.isArray(e.options)?e.options.length:0),de=h(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:x,virtualScrollSliceSizeComputed:g,localResetVirtualScroll:B,padVirtualScroll:K,onVirtualScrollEvt:ae,scrollTo:me,setVirtualScrollSize:fe}=Mn({virtualScrollLength:Z,getVirtualScrollTarget:vl,getVirtualScrollEl:_t,virtualScrollItemSizeComputed:de}),v=Jt(),r=h(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,s=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const i=e.mapOptions===!0&&m!==void 0?m:[],z=s.map(D=>fl(D,i));return e.modelValue===null&&t===!0?z.filter(D=>D!==null):z}return s}),p=h(()=>{const t={};return En.forEach(s=>{const i=e[s];i!==void 0&&(t[s]=i)}),t}),A=h(()=>e.optionsDark===null?v.isDark.value:e.optionsDark),H=h(()=>Ft(r.value)),Q=h(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),M=h(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),q=h(()=>Z.value===0),U=h(()=>r.value.map(t=>oe.value(t)).join(", ")),o=h(()=>e.displayValue!==void 0?e.displayValue:U.value),W=h(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ge=h(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(W.value))),be=h(()=>v.focused.value===!0?e.tabindex:-1),ve=h(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":l.value===!0?"true":"false","aria-controls":`${v.targetUid.value}_lb`};return d.value>=0&&(t["aria-activedescendant"]=`${v.targetUid.value}_${d.value}`),t}),Qe=h(()=>({id:`${v.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),pe=h(()=>r.value.map((t,s)=>({index:s,opt:t,html:W.value(t),selected:!0,removeAtIndex:dl,toggleOption:we,tabindex:be.value}))),qe=h(()=>{if(Z.value===0)return[];const{from:t,to:s}=x.value;return e.options.slice(t,s).map((i,z)=>{const D=ze.value(i)===!0,R=t+z,j={clickable:!0,active:!1,activeClass:lt.value,manualFocus:!0,focused:!1,disable:D,tabindex:-1,dense:e.optionsDense,dark:A.value,role:"option",id:`${v.targetUid.value}_${R}`,onClick:()=>{we(i)}};return D!==!0&&(ot(i)===!0&&(j.active=!0),d.value===R&&(j.focused=!0),j["aria-selected"]=j.active===!0?"true":"false",S.platform.is.desktop===!0&&(j.onMousemove=()=>{l.value===!0&&Te(R)})),{index:R,opt:i,html:W.value(i),label:oe.value(i),selected:j.active,focused:j.focused,toggleOption:we,setOptionIndex:Te,itemProps:j}})}),Ue=h(()=>e.dropdownIcon!==void 0?e.dropdownIcon:S.iconSet.arrow.dropdown),Re=h(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),lt=h(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),le=h(()=>at(e.optionValue,"value")),oe=h(()=>at(e.optionLabel,"label")),ze=h(()=>at(e.optionDisable,"disable")),We=h(()=>r.value.map(t=>le.value(t))),cl=h(()=>{const t={onInput:qt,onChange:ue,onKeydown:xt,onKeyup:kt,onKeypress:Ct,onFocus:pt,onClick(s){f===!0&&Oe(s)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ue,t});ie(r,t=>{m=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&v.innerLoading.value!==!0&&(w.value!==!0&&l.value!==!0||H.value!==!0)&&(I!==!0&&Fe(),(w.value===!0||l.value===!0)&&Be(""))},{immediate:!0}),ie(()=>e.fillInput,Fe),ie(l,it),ie(Z,_l);function yt(t){return e.emitValue===!0?le.value(t):t}function nt(t){if(t>-1&&t<r.value.length)if(e.multiple===!0){const s=e.modelValue.slice();n("remove",{index:t,value:s.splice(t,1)[0]}),n("update:modelValue",s)}else n("update:modelValue",null)}function dl(t){nt(t),v.focus()}function bt(t,s){const i=yt(t);if(e.multiple!==!0){e.fillInput===!0&&$e(oe.value(t),!0,!0),n("update:modelValue",i);return}if(r.value.length===0){n("add",{index:0,value:i}),n("update:modelValue",e.multiple===!0?[i]:i);return}if(s===!0&&ot(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const z=e.modelValue.slice();n("add",{index:z.length,value:i}),z.push(i),n("update:modelValue",z)}function we(t,s){if(v.editable.value!==!0||t===void 0||ze.value(t)===!0)return;const i=le.value(t);if(e.multiple!==!0){s!==!0&&($e(e.fillInput===!0?oe.value(t):"",!0,!0),ke()),L.value!==null&&L.value.focus(),(r.value.length===0||He(le.value(r.value[0]),i)!==!0)&&n("update:modelValue",e.emitValue===!0?i:t);return}if((f!==!0||F.value===!0)&&v.focus(),pt(),r.value.length===0){const R=e.emitValue===!0?i:t;n("add",{index:0,value:R}),n("update:modelValue",e.multiple===!0?[R]:R);return}const z=e.modelValue.slice(),D=We.value.findIndex(R=>He(R,i));if(D>-1)n("remove",{index:D,value:z.splice(D,1)[0]});else{if(e.maxValues!==void 0&&z.length>=e.maxValues)return;const R=e.emitValue===!0?i:t;n("add",{index:z.length,value:R}),z.push(R)}n("update:modelValue",z)}function Te(t){if(S.platform.is.desktop!==!0)return;const s=t>-1&&t<Z.value?t:-1;d.value!==s&&(d.value=s)}function Xe(t=1,s){if(l.value===!0){let i=d.value;do i=Lt(i+t,-1,Z.value-1);while(i!==-1&&i!==d.value&&ze.value(e.options[i])===!0);d.value!==i&&(Te(i),me(i),s!==!0&&e.useInput===!0&&e.fillInput===!0&&Ye(i>=0?oe.value(e.options[i]):C))}}function fl(t,s){const i=z=>He(le.value(z),t);return e.options.find(i)||s.find(i)||t}function at(t,s){const i=t!==void 0?t:s;return typeof i=="function"?i:z=>z!==null&&typeof z=="object"&&i in z?z[i]:z}function ot(t){const s=le.value(t);return We.value.find(i=>He(i,s))!==void 0}function pt(t){e.useInput===!0&&L.value!==null&&(t===void 0||L.value===t.target&&t.target.value===U.value)&&L.value.select()}function wt(t){an(t,27)===!0&&l.value===!0&&(Oe(t),ke(),Fe()),n("keyup",t)}function kt(t){const{value:s}=t.target;if(t.keyCode!==void 0){wt(t);return}if(t.target.value="",clearTimeout(b),Fe(),typeof s=="string"&&s.length>0){const i=s.toLocaleLowerCase(),z=R=>{const j=e.options.find(ee=>R.value(ee).toLocaleLowerCase()===i);return j===void 0?!1:(r.value.indexOf(j)===-1?we(j):ke(),!0)},D=R=>{z(le)!==!0&&(z(oe)===!0||R===!0||Be(s,!0,()=>D(!0)))};D()}else v.clearValue(t)}function Ct(t){n("keypress",t)}function xt(t){if(n("keydown",t),on(t)===!0)return;const s=y.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),i=t.shiftKey!==!0&&e.multiple!==!0&&(d.value>-1||s===!0);if(t.keyCode===27){rt(t);return}if(t.keyCode===9&&i===!1){Ae();return}if(t.target===void 0||t.target.id!==v.targetUid.value)return;if(t.keyCode===40&&v.innerLoading.value!==!0&&l.value===!1){Se(t),Ie();return}if(t.keyCode===8&&e.hideSelected!==!0&&y.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?nt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof y.value!="string"||y.value.length===0)&&(Se(t),d.value=-1,Xe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&g.value!==void 0&&(Se(t),d.value=Math.max(-1,Math.min(Z.value,d.value+(t.keyCode===33?-1:1)*g.value.view)),Xe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Se(t),Xe(t.keyCode===38?-1:1,e.multiple));const z=Z.value;if((E===void 0||Y<Date.now())&&(E=""),z>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||E.length>0)){l.value!==!0&&Ie(t);const D=t.key.toLocaleLowerCase(),R=E.length===1&&E[0]===D;Y=Date.now()+1500,R===!1&&(Se(t),E+=D);const j=new RegExp("^"+E.split("").map(ut=>Pn.indexOf(ut)>-1?"\\"+ut:ut).join(".*"),"i");let ee=d.value;if(R===!0||ee<0||j.test(oe.value(e.options[ee]))!==!0)do ee=Lt(ee+1,-1,z-1);while(ee!==d.value&&(ze.value(e.options[ee])===!0||j.test(oe.value(e.options[ee]))!==!0));d.value!==ee&&he(()=>{Te(ee),me(ee),ee>=0&&e.useInput===!0&&e.fillInput===!0&&Ye(oe.value(e.options[ee]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||E!=="")&&(t.keyCode!==9||i===!1))){if(t.keyCode!==9&&Se(t),d.value>-1&&d.value<z){we(e.options[d.value]);return}if(s===!0){const D=(R,j)=>{if(j){if(jt(j)!==!0)return}else j=e.newValueMode;if(R==null)return;$e("",e.multiple!==!0,!0),(j==="toggle"?we:bt)(R,j==="add-unique"),e.multiple!==!0&&(L.value!==null&&L.value.focus(),ke())};if(e.onNewValue!==void 0?n("newValue",y.value,D):D(y.value),e.multiple!==!0)return}l.value===!0?Ae():v.innerLoading.value!==!0&&Ie()}}function _t(){return f===!0?G.value:X.value!==null&&X.value.contentEl!==null?X.value.contentEl:void 0}function vl(){return _t()}function ml(){return e.hideSelected===!0?[]:a["selected-item"]!==void 0?pe.value.map(t=>a["selected-item"](t)).slice():a.selected!==void 0?[].concat(a.selected()):e.useChips===!0?pe.value.map((t,s)=>_(Ze,{key:"option-"+s,removable:v.editable.value===!0&&ze.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:be.value,onRemove(){t.removeAtIndex(s)}},()=>_("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:oe.value(t.opt)}))):[_("span",{[ge.value===!0?"innerHTML":"textContent"]:o.value})]}function Vt(){if(q.value===!0)return a["no-option"]!==void 0?a["no-option"]({inputValue:y.value}):void 0;const t=a.option!==void 0?a.option:i=>_(al,{key:i.index,...i.itemProps},()=>_(je,()=>_(_e,()=>_("span",{[i.html===!0?"innerHTML":"textContent"]:i.label}))));let s=K("div",qe.value.map(t));return a["before-options"]!==void 0&&(s=a["before-options"]().concat(s)),Kt(a["after-options"],s)}function gl(t,s){const i=s===!0?{...ve.value,...v.splitAttrs.attributes.value}:void 0,z={ref:s===!0?L:void 0,key:"i_t",class:Q.value,style:e.inputStyle,value:y.value!==void 0?y.value:"",type:"search",...i,id:s===!0?v.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...cl.value};return t!==!0&&f===!0&&(Array.isArray(z.class)===!0?z.class=[...z.class,"no-pointer-events"]:z.class+=" no-pointer-events"),_("input",z)}function qt(t){clearTimeout(b),!(t&&t.target&&t.target.qComposing===!0)&&(Ye(t.target.value||""),I=!0,C=y.value,v.focused.value!==!0&&(f!==!0||F.value===!0)&&v.focus(),e.onFilter!==void 0&&(b=setTimeout(()=>{Be(y.value)},e.inputDebounce)))}function Ye(t){y.value!==t&&(y.value=t,n("inputValue",t))}function $e(t,s,i){I=i!==!0,e.useInput===!0&&(Ye(t),(s===!0||i!==!0)&&(C=t),s!==!0&&Be(t))}function Be(t,s,i){if(e.onFilter===void 0||s!==!0&&v.focused.value!==!0)return;v.innerLoading.value===!0?n("filterAbort"):(v.innerLoading.value=!0,c.value=!0),t!==""&&e.multiple!==!0&&r.value.length>0&&I!==!0&&t===oe.value(r.value[0])&&(t="");const z=setTimeout(()=>{l.value===!0&&(l.value=!1)},10);clearTimeout(k),k=z,n("filter",t,(D,R)=>{(s===!0||v.focused.value===!0)&&k===z&&(clearTimeout(k),typeof D=="function"&&D(),c.value=!1,he(()=>{v.innerLoading.value=!1,v.editable.value===!0&&(s===!0?l.value===!0&&ke():l.value===!0?it(!0):l.value=!0),typeof R=="function"&&he(()=>{R(u)}),typeof i=="function"&&he(()=>{i(u)})}))},()=>{v.focused.value===!0&&k===z&&(clearTimeout(k),v.innerLoading.value=!1,c.value=!1),l.value===!0&&(l.value=!1)})}function hl(){return _(ul,{ref:X,class:M.value,style:e.popupContentStyle,modelValue:l.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&q.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:A.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Re.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Qe.value,onScrollPassive:ae,onBeforeShow:Tt,onBeforeHide:Sl,onShow:yl},Vt)}function Sl(t){Bt(t),Ae()}function yl(){fe()}function bl(t){Oe(t),L.value!==null&&L.value.focus(),F.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function pl(t){Oe(t),he(()=>{F.value=!1})}function wl(){const t=[_(Tn,{class:`col-auto ${v.fieldClass.value}`,...p.value,for:v.targetUid.value,dark:A.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:y.value.length>0,...v.splitAttrs.listeners.value,onFocus:bl,onBlur:pl},{...a,rawControl:()=>v.getControl(!0),before:void 0,after:void 0})];return l.value===!0&&t.push(_("div",{ref:G,class:M.value+" scroll",style:e.popupContentStyle,...Qe.value,onClick:rt,onScrollPassive:ae},Vt())),_(Xt,{ref:T,modelValue:w.value,position:e.useInput===!0?"top":void 0,transitionShow:N,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Tt,onBeforeHide:kl,onHide:Cl,onShow:xl},()=>_("div",{class:"q-select__dialog"+(A.value===!0?" q-select__dialog--dark q-dark":"")+(F.value===!0?" q-select__dialog--focused":"")},t))}function kl(t){Bt(t),T.value!==null&&T.value.__updateRefocusTarget(v.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),v.focused.value=!1}function Cl(t){ke(),v.focused.value===!1&&n("blur",t),Fe()}function xl(){const t=document.activeElement;(t===null||t.id!==v.targetUid.value)&&L.value!==null&&L.value!==t&&L.value.focus(),fe()}function Ae(){w.value!==!0&&(d.value=-1,l.value===!0&&(l.value=!1),v.focused.value===!1&&(clearTimeout(k),k=void 0,v.innerLoading.value===!0&&(n("filterAbort"),v.innerLoading.value=!1,c.value=!1)))}function Ie(t){v.editable.value===!0&&(f===!0?(v.onControlFocusin(t),w.value=!0,he(()=>{v.focus()})):v.focus(),e.onFilter!==void 0?Be(y.value):(q.value!==!0||a["no-option"]!==void 0)&&(l.value=!0))}function ke(){w.value=!1,Ae()}function Fe(){e.useInput===!0&&$e(e.multiple!==!0&&e.fillInput===!0&&r.value.length>0&&oe.value(r.value[0])||"",!0,!0)}function it(t){let s=-1;if(t===!0){if(r.value.length>0){const i=le.value(r.value[0]);s=e.options.findIndex(z=>He(le.value(z),i))}B(s)}Te(s)}function _l(t,s){l.value===!0&&v.innerLoading.value===!1&&(B(-1,!0),he(()=>{l.value===!0&&v.innerLoading.value===!1&&(t>s?B():it(!0))}))}function zt(){w.value===!1&&X.value!==null&&X.value.updatePosition()}function Tt(t){t!==void 0&&Oe(t),n("popupShow",t),v.hasPopupOpen=!0,v.onControlFocusin(t)}function Bt(t){t!==void 0&&Oe(t),n("popupHide",t),v.hasPopupOpen=!1,v.onControlFocusout(t)}function At(){f=S.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?a["no-option"]!==void 0||e.onFilter!==void 0||q.value===!1:!0),N=S.platform.is.ios===!0&&f===!0&&e.useInput===!0?"fade":e.transitionShow}return tn(At),ln(zt),At(),tt(()=>{clearTimeout(b)}),Object.assign(u,{showPopup:Ie,hidePopup:ke,removeAtIndex:nt,add:bt,toggleOption:we,getOptionIndex:()=>d.value,setOptionIndex:Te,moveOptionSelection:Xe,filter:Be,updateMenuPosition:zt,updateInputValue:$e,isOptionSelected:ot,getEmittingOptionValue:yt,isOptionDisabled:(...t)=>ze.value.apply(null,t)===!0,getOptionValue:(...t)=>le.value.apply(null,t),getOptionLabel:(...t)=>oe.value.apply(null,t)}),Object.assign(v,{innerValue:r,fieldClass:h(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:$,targetRef:L,hasValue:H,showPopup:Ie,floatingLabel:h(()=>e.hideSelected!==!0&&H.value===!0||typeof y.value=="number"||y.value.length>0||Ft(e.displayValue)),getControlChild:()=>{if(v.editable.value!==!1&&(w.value===!0||q.value!==!0||a["no-option"]!==void 0))return f===!0?wl():hl();v.hasPopupOpen===!0&&(v.hasPopupOpen=!1)},controlEvents:{onFocusin(t){v.onControlFocusin(t)},onFocusout(t){v.onControlFocusout(t,()=>{Fe(),Ae()})},onClick(t){if(rt(t),f!==!0&&l.value===!0){Ae(),L.value!==null&&L.value.focus();return}Ie(t)}},getControl:t=>{const s=ml(),i=t===!0||w.value!==!0||f!==!0;if(e.useInput===!0)s.push(gl(t,i));else if(v.editable.value===!0){const D=i===!0?ve.value:void 0;s.push(_("input",{ref:i===!0?L:void 0,key:"d_t",class:"q-select__focus-target",id:i===!0?v.targetUid.value:void 0,value:o.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...D,onKeydown:xt,onKeyup:wt,onKeypress:Ct})),i===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&s.push(_("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:kt}))}if(J.value!==void 0&&e.disable!==!0&&We.value.length>0){const D=We.value.map(R=>_("option",{value:R,selected:!0}));s.push(_("select",{class:"hidden",name:J.value,multiple:e.multiple},D))}const z=e.useInput===!0||i!==!0?void 0:v.splitAttrs.attributes.value;return _("div",{class:"q-field__native row items-center",...z},s)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[_(re,{class:"q-select__dropdown-icon"+(l.value===!0?" rotate-180":""),name:Ue.value})]:null}),Gt(v)}}),Rn=ye({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:a}){const{proxy:{$q:n}}=Le(),u=Ot(un,Me);if(u===Me)return console.error("QPage needs to be a deep child of QLayout"),Me;if(Ot(rn,Me)===Me)return console.error("QPage needs to be child of QPageContainer"),Me;const l=h(()=>{const d=(u.header.space===!0?u.header.size:0)+(u.footer.space===!0?u.footer.size:0);if(typeof e.styleFn=="function"){const y=u.isContainer.value===!0?u.containerHeight.value:n.screen.height;return e.styleFn(d,y)}return{minHeight:u.isContainer.value===!0?u.containerHeight.value-d+"px":n.screen.height===0?d!==0?`calc(100vh - ${d}px)`:"100vh":n.screen.height-d+"px"}}),w=h(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>_("main",{class:w.value,style:l.value},gt(a.default))}});const $n={ratio:[String,Number]};function Hn(e,a){return h(()=>{const n=Number(e.ratio||(a!==void 0?a.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}const Dn=16/9;var Nn=ye({name:"QImg",props:{...$n,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Dn},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:a,emit:n}){const u=O(e.initialRatio),S=Hn(e,u);let l;const w=[O(null),O(k())],d=O(0),y=O(!1),F=O(!1),c=h(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),b=h(()=>({width:e.width,height:e.height})),m=h(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),f=h(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));ie(()=>I(),C);function I(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function k(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function C(T){clearTimeout(l),F.value=!1,T===null?(y.value=!1,w[d.value^1].value=k()):y.value=!0,w[d.value].value=T}function N({target:T}){l!==null&&(clearTimeout(l),u.value=T.naturalHeight===0?.5:T.naturalWidth/T.naturalHeight,E(T,1))}function E(T,G){l===null||G===1e3||(T.complete===!0?Y(T):l=setTimeout(()=>{E(T,G+1)},50))}function Y(T){l!==null&&(d.value=d.value^1,w[d.value].value=null,y.value=!1,F.value=!1,n("load",T.currentSrc||T.src))}function $(T){clearTimeout(l),y.value=!1,F.value=!0,w[d.value].value=null,w[d.value^1].value=k(),n("error",T)}function L(T){const G=w[T].value,J={key:"img_"+T,class:m.value,style:f.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...G};return d.value===T?(J.class+=" q-img__image--waiting",Object.assign(J,{onLoad:N,onError:$})):J.class+=" q-img__image--loaded",_("div",{class:"q-img__container absolute-full",key:"img"+T},_("img",J))}function X(){return y.value!==!0?_("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},gt(a[F.value===!0?"error":"default"])):_("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},a.loading!==void 0?a.loading():e.noSpinner===!0?void 0:[_(sn,{color:e.spinnerColor,size:e.spinnerSize})])}return C(I()),tt(()=>{clearTimeout(l),l=null}),()=>{const T=[];return S.value!==null&&T.push(_("div",{key:"filler",style:S.value})),F.value!==!0&&(w[0].value!==null&&T.push(L(0)),w[1].value!==null&&T.push(L(1))),T.push(_(Wt,{name:"q-transition--fade"},X)),_("div",{class:c.value,style:b.value,role:"img","aria-label":e.alt},T)}}});const jn=["src"],Kn={style:{"font-size":"26pt"}},Qn=["href"],Un={class:"row"},Wn={class:"row"},Xn=St({__name:"Comment",props:{comment:null},setup(e){const a=e;let n=mt(gn);const u=O([]),S=O(y()),l=O([]);Zt(()=>{c(),w()});function w(){var I,k,C,N;let m=a.comment.text.matchAll(hn);for(const E of m)((I=E.groups)==null?void 0:I.gifid)&&((k=E.groups)==null?void 0:k.type)&&l.value.push({type:(C=E.groups)==null?void 0:C.type,id:(N=E.groups)==null?void 0:N.gifid,match:E[0]});let f=a.comment.text.matchAll(Sn);for(const E of f)l.value.push({type:"prev",id:"",match:E[0]})}function d(m){if(m.type=="giphy")return`https://i.giphy.com/media/${m.id}/giphy.webp`;if(m.type==="prev")return m.match}function y(){var m,f;return(f=(m=n==null?void 0:n.find(I=>I.community===a.comment.community))==null?void 0:m.imgIconUrl)!=null?f:""}function F(m){return m.includes("|")?m.substring(m.indexOf("|")+1,m.lastIndexOf("|")):""}function c(){let m=ol(a.comment)?a.comment.text.toLocaleLowerCase().matchAll(Rt):a.comment.text.matchAll(Rt),f=[];for(const I of m){let k=I[0].replace("$","");!yn.includes(k)&&!f.includes(k)&&f.length<6&&f.push(k)}u.value=f}function b(m){window.open("https://www.marketwatch.com/investing/stock/"+m)}return(m,f)=>(ne(),Ve(Je,null,[V(Ke),V(al,{dense:"",class:"q-py-sm"},{default:P(()=>[V(je,{thumbnail:""},{default:P(()=>[te("img",{style:{"object-fit":"contain","max-width":"48px"},src:S.value},null,8,jn)]),_:1}),V(je,{class:"text-left"},{default:P(()=>[V(_e,{style:{"font-size":"10pt"}},{default:P(()=>[V(Ze,{square:"",dense:"",clickable:"",style:{"font-size":"10pt"},label:Ce(il)(a.comment.userName),onClick:f[0]||(f[0]=I=>Ce($t)(a.comment.commentURL))},null,8,["label"]),a.comment.userName.includes("|")?(ne(),xe(Ze,{key:0,style:{"font-size":"10pt"},color:"primary",dense:"",label:F(a.comment.userName)},null,8,["label"])):ft("",!0)]),_:1}),V(_e,{caption:"",lines:"5",style:{"font-size":"11pt"}},{default:P(()=>[te("div",null,el(a.comment.text),1),te("div",Kn,[(ne(!0),Ve(Je,null,vt(l.value,I=>(ne(),xe(re,{clickable:"",class:"cursor-pointer",name:I.type=="giphy"?"gif":"image"},{default:P(()=>[V(rl,{"transition-show":"flip-up","transition-hide":"flip-down"},{default:P(()=>[V(tl,{style:{"min-height":"180px","min-width":"250px",overflow:"hidden"}},{default:P(()=>[te("a",{href:d(I),target:"_blank"},[V(Nn,{style:{"max-height":"280px","max-width":"350px"},loading:"lazy",src:d(I)},null,8,["src"])],8,Qn)]),_:2},1024)]),_:2},1024)]),_:2},1032,["name"]))),256))])]),_:1})]),_:1}),V(je,{side:"",top:"",style:{width:"200px"}},{default:P(()=>[te("div",Un,[(ne(!0),Ve(Je,null,vt(u.value,I=>(ne(),xe(Ze,{clickable:"",color:"teal",label:I,onClick:k=>b(I),dense:""},null,8,["label","onClick"]))),256))])]),_:1}),V(je,{side:"",style:{width:"200px"}},{default:P(()=>[te("div",Wn,[a.comment.linkURL?(ne(),xe(re,{key:0,class:"cursor-pointer",color:"teal",name:"link",onClick:f[1]||(f[1]=I=>Ce($t)(a.comment.linkURL))})):ft("",!0)])]),_:1})]),_:1}),V(Ke)],64))}}),Yn={class:"col",style:{"font-size":"20pt"}},Gn=St({__name:"DisplayList",props:{displayList:null},setup(e){const a=e;return(n,u)=>(ne(),Ve("div",Yn,[V(bn,{style:{width:"100%"}},{default:P(()=>[(ne(!0),Ve(Je,null,vt(a.displayList,S=>(ne(),xe(Xn,{comment:S,key:S.id},null,8,["comment"]))),128))]),_:1})]))}}),Jn={class:"row justify-start q-pb-lg"},Zn={key:0,class:"col-1 text-center"},ea={key:1,class:"col-*",style:{"font-size":"28pt"}},ta={class:"col-*",style:{"border-left":"solid white 1pt"}},la={class:"row justify-between q-py-sm"},na={class:"col-5"},aa={class:"col-5 text-right"},oa={class:"col"},ia={class:"row"},ua={class:"col-sm-*"},ra={class:"col-sm-*"},da=St({__name:"CommentController",setup(e){const a=O(!1),n=window.speechSynthesis;let u=O();const S=O(),l=O(de());let w=!1,d=O(!0),y=new Date().getTime();n.onvoiceschanged=function(){u.value=n.getVoices()};let F;const c=mt(_n),b=mt(Vn),m=O([]);let f;window.Worker&&(console.log("setting up worker"),f=new Worker("/assets/webworker.dcff6a21.js"),f.onmessage=k),Zt(async()=>{n.getVoices().length>0&&(u.value=n.getVoices()),I(),console.log("mounting comment controller done")}),cn(()=>{clearInterval(F),window.Worker&&f.postMessage({type:"pull",action:"stop"})});async function I(){if(!window.Worker)console.error("Web workers not possible in this environment! will not say anything, there may be delays!"),d.value=!1,F=setInterval(()=>{E(),new Date().getSeconds()%30},500);else{let x={type:"pull",action:"start"};console.log("posting to worker:",x),f.postMessage(x)}}function k(x){x.data.type==="pull"&&E(),x.data.type==="checkLong"&&$()}function C(){l.value={...st}}function N(x){return a.value&&b.muteBots&&!ol(x)}function E(){if(w)return;let x=c.pullOne();if(!!x&&(m.value.unshift(x),m.value.length>b.postsToDisplay&&(m.value=m.value.slice(0,b.postsToDisplay)),N(x))){if(S.value===void 0)return;let B=G(x);var g=new SpeechSynthesisUtterance(B.substring(0,1e3));g.voice=S.value,g.lang=S.value.lang,g.rate=l.value.rate,g.volume=l.value.volume,g.pitch=l.value.pitch,w=!0;try{Ht("Starting speak..."),Y(g)}catch{w=!1}}}function Y(x){x.onend=()=>{L()},x.onerror=()=>{console.error("Error saying speech!"),L()},y=new Date().getTime(),n.speak(x),f.postMessage({type:"checkLong",action:"start"})}function $(){T()?X():!pn()&&!wn()&&(n.pause(),n.resume())}function L(){w=!1,f.postMessage({type:"checkLong",action:"stop"})}function X(){n.cancel(),L()}function T(){if(w){var x=new Date().getTime()-y;return x/1e3>kn}else return!1}function G(x){let g=x.speech;return Cn(x.text)&&(g=" wordle result "),xn(b.muteEmojiSpam,x.speech)&&(g=" emoji spam "),b.sayUsernames&&(g=`${il(x.userName)} - ${x.speech}`),g}function J(){a.value=!1,X()}function ue(){c.backlog.value.length>5&&c.clearBacklog()}ie(u,(x,g)=>{console.log("synth voices loaded",u),Z()});function Z(){if(!u.value){console.error("Tried selecting stored voice but allvoices len = 0");return}let x="voicepref",g=Dt(x);if(!g||g==="undefined"){console.log("coudn't find stored voice, saving new one");let B=u.value.find(ae=>ae.name.includes("UK")),K=u.value.find(ae=>ae.default==!0);S.value=B||K||u.value[0],Ge(x,S.value.name)}else{console.log(`attempting to find ${g} in allvoices:`,u.value);let B=u.value.find(K=>K.name===g);console.log("loading voice from storage "+(B==null?void 0:B.name)),S.value=B!=null?B:u.value[0]}}function de(){let x={...st};for(const[g,B]of Object.entries(x)){const K=g;let ae=Dt(`check_${g}`);ae===null&&Ge(`check_${g}`,st[K]),x[K]=ae}return x}return ie(l,x=>{for(const[g,B]of Object.entries(l.value)){const K=g;Ge(`check_${g}`,l.value[K])}},{deep:!0}),ie(S,x=>{var g,B;x!=null&&x!=null&&Ge("voicepref",(B=(g=S.value)==null?void 0:g.name)!=null?B:"null")}),(x,g)=>(ne(),xe(Rn,{class:"items-start justify-start",padding:""},{default:P(()=>[te("div",Jn,[a.value?(ne(),Ve("div",ea,[V(De,{dense:"",icon:"remove_from_queue",style:{"font-size":"14pt"},onClick:ue},{default:P(()=>[V(zn,{floating:"",color:"teal"},{default:P(()=>[se(el(Ce(c).backlog.value.length),1)]),_:1}),V(Pe,null,{default:P(()=>[se(" Trim Backlog ")]),_:1})]),_:1}),V(De,{dense:"",onClick:J},{default:P(()=>[V(Pe,null,{default:P(()=>[se(" Stop Speaking ")]),_:1}),V(re,{class:"q-px-md text-red-4",name:"stop",size:"26pt"})]),_:1}),V(De,{dense:"",onClick:g[1]||(g[1]=B=>X())},{default:P(()=>[V(Pe,null,{default:P(()=>[se(" Skip ")]),_:1}),V(re,{class:"q-px-md",name:"fast_forward",size:"26pt"})]),_:1})])):(ne(),Ve("div",Zn,[V(De,{onClick:g[0]||(g[0]=B=>a.value=!0)},{default:P(()=>[V(re,{name:"record_voice_over",size:"26pt"})]),_:1})])),te("div",ta,[V(re,{clickable:"",class:"cursor-pointer q-pa-sm",name:"tune",style:{"font-size":"26pt"}},{default:P(()=>[V(Pe,null,{default:P(()=>[se(" Speech Settings ")]),_:1}),V(rl,{"transition-show":"jump-up","transition-hide":"flip-down"},{default:P(()=>[V(tl,{class:"q-pa-md",style:{"min-height":"180px","min-width":"350px",overflow:"hidden"}},{default:P(()=>[te("div",la,[te("div",na,[V(_e,null,{default:P(()=>[se("Speech Tuning")]),_:1})]),te("div",aa,[V(De,{dense:"",outline:"",size:"8pt",color:"teal",onClick:C},{default:P(()=>[V(Pe,null,{default:P(()=>[se(" Reset To Default ")]),_:1}),V(re,{name:"refresh"})]),_:1})])]),V(Ke),V(_e,null,{default:P(()=>[se(" Volume ")]),_:1}),V(ct,{modelValue:l.value.volume,"onUpdate:modelValue":g[2]||(g[2]=B=>l.value.volume=B),min:.1,max:1,step:.1,snap:"",label:"",color:"teal",onChange:g[3]||(g[3]=B=>{Ce(Ht)("updating volume to "+B),l.value.volume=B})},null,8,["modelValue"]),V(Ke),V(_e,null,{default:P(()=>[se(" pitch ")]),_:1}),V(ct,{modelValue:l.value.pitch,"onUpdate:modelValue":g[4]||(g[4]=B=>l.value.pitch=B),min:0,max:2,step:.2,snap:"",label:"",color:"teal",onChange:g[5]||(g[5]=B=>l.value.pitch=B)},null,8,["modelValue"]),V(Ke),V(_e,null,{default:P(()=>[se(" rate ")]),_:1}),V(ct,{modelValue:l.value.rate,"onUpdate:modelValue":g[6]||(g[6]=B=>l.value.rate=B),min:.5,max:3,step:.1,snap:"",label:"",color:"teal",onChange:g[7]||(g[7]=B=>l.value.rate=B)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),te("div",oa,[te("div",ia,[te("div",ua,[V(Ln,{modelValue:S.value,"onUpdate:modelValue":g[8]||(g[8]=B=>S.value=B),options:Ce(u),label:"Selected Voice","option-value":"name","option-label":"name",style:{"min-width":"250px","max-width":"400px"},filled:"","options-selected-class":"text-white bg-teal",labelColor:"white",dense:""},null,8,["modelValue","options"])]),te("div",ra,[Ce(d)?ft("",!0):(ne(),xe(re,{key:0,name:"warning_amber",color:"amber",size:"24pt",class:"q-pa-sm"},{default:P(()=>[V(Pe,null,{default:P(()=>[se(" Environment doesn't support Web Workers - Javascript throttling likely. Expect slowdowns. ")]),_:1})]),_:1}))])])])]),V(Gn,{displayList:m.value},null,8,["displayList"])]),_:1}))}});export{da as default};
