import{u as Nt,k as Bt,l as Vl,m as ql,n as Qt,p as Mt,r as It,o as zl,q as Al,t as Ot,b as Tl,a as We,Q as Bl,w as Ut,x as dt,s as Ml,y as Il,z as Ol,I as Xt,A as Ft,B as Lt,E as Fl,D as Et,F as Ll,H as El,J as Pl,e as Pt,S as Ze,i as $l,v as Rl,K as ut,g as xe,h as rt}from"./injectKeys.b2818c54.js";import{c as ye,a as h,h as _,P as Yt,p as Hl,q as Zt,ah as Dl,t as jl,r as I,v as Gt,ai as Wl,D as Kl,aj as Nl,y as Ql,ak as Ul,w as ie,ax as Xl,aq as Yl,ay as Zl,az as $t,J as Gl,aA as Jl,b as mt,T as Jt,d as et,g as Pe,aB as en,aC as tn,aD as ln,C as Se,aE as nn,aF as el,aG as gt,aH as tl,aI as ll,aJ as nl,aK as on,aL as an,F as un,B as se,aM as rn,a9 as sn,n as cn,aN as dn,aO as fn,aP as vn,aQ as mn,e as he,at as gn,aR as hn,aS as Rt,aT as He,aU as Sn,aV as yn,ac as st,aW as pn,ap as Me,ab as bn,aX as wn,f as Ie,k as Ht,m as kn,I as xn,aY as Cn,R as ht,o as ol,S as ne,a4 as ve,Y as M,Q as Fe,$ as Q,a1 as Oe,U as Le,a3 as Ge,a0 as al,a6 as Ke,a5 as ft,V as W,aZ as il,O as _n,_ as re,Z as De}from"./index.c4666ad1.js";const Vn=["top","middle","bottom"];var qn=ye({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Vn.includes(e)}},setup(e,{slots:o}){const l=h(()=>e.align!==void 0?{verticalAlign:e.align}:null),a=h(()=>{const g=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(g!==void 0?` text-${g}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>_("div",{class:a.value,style:l.value,role:"status","aria-label":e.label},Yt(o.default,e.label!==void 0?[e.label]:[]))}}),ul=ye({name:"QMenu",inheritAttrs:!1,props:{...Nt,...Hl,...Zt,...Dl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Bt},self:{type:String,validator:Bt},offset:{type:Array,validator:Vl},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...jl,"click","escapeKey"],setup(e,{slots:o,emit:l,attrs:a}){let g=null,n,s,d;const S=Pe(),{proxy:O}=S,{$q:f}=O,x=I(null),y=I(!1),v=h(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),A=Gt(e,f),{registerTick:b,removeTick:w}=Wl(),{registerTimeout:j}=Kl(),{transitionProps:L,transitionStyle:Z}=Nl(e),{localScrollTarget:$,changeScrollEvent:E,unconfigureScrollTarget:P}=ql(e,z),{anchorEl:C,canShow:K}=Qt({showing:y}),{hide:ee}=Ql({showing:y,canShow:K,handleShow:m,handleHide:r,hideOnRouteChange:v,processOnMount:!0}),{showPortal:ue,hidePortal:te,renderPortal:T}=Ul(S,x,G),p={anchorEl:C,innerRef:x,onClickOutside(i){if(e.persistent!==!0&&y.value===!0)return ee(i),(i.type==="touchstart"||i.target.classList.contains("q-dialog__backdrop"))&&Se(i),!0}},B=h(()=>Mt(e.anchor||(e.cover===!0?"center middle":"bottom start"),f.lang.rtl)),X=h(()=>e.cover===!0?B.value:Mt(e.self||"top start",f.lang.rtl)),Y=h(()=>(e.square===!0?" q-menu--square":"")+(A.value===!0?" q-menu--dark q-dark":"")),Ce=h(()=>e.autoClose===!0?{onClick:H}:{}),me=h(()=>y.value===!0&&e.persistent!==!0);ie(me,i=>{i===!0?(tn(F),Al(p)):($t(F),It(p))});function de(){en(()=>{let i=x.value;i&&i.contains(document.activeElement)!==!0&&(i=i.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.querySelector("[autofocus], [data-autofocus]")||i,i.focus({preventScroll:!0}))})}function m(i){if(g=e.noRefocus===!1?document.activeElement:null,Xl(U),ue(),z(),n=void 0,i!==void 0&&(e.touchPosition||e.contextMenu)){const J=Yl(i);if(J.left!==void 0){const{top:ge,left:pe}=C.value.getBoundingClientRect();n={left:J.left-pe,top:J.top-ge}}}s===void 0&&(s=ie(()=>f.screen.width+"|"+f.screen.height+"|"+e.self+"|"+e.anchor+"|"+f.lang.rtl,V)),e.noFocus!==!0&&document.activeElement.blur(),b(()=>{V(),e.noFocus!==!0&&de()}),j(()=>{f.platform.is.ios===!0&&(d=e.autoClose,x.value.click()),V(),ue(!0),l("show",i)},e.transitionDuration)}function r(i){w(),te(),k(!0),g!==null&&(i===void 0||i.qClickOutside!==!0)&&(((i&&i.type.indexOf("key")===0?g.closest('[tabindex]:not([tabindex^="-"])'):void 0)||g).focus(),g=null),j(()=>{te(!0),l("hide",i)},e.transitionDuration)}function k(i){n=void 0,s!==void 0&&(s(),s=void 0),(i===!0||y.value===!0)&&(Zl(U),P(),It(p),$t(F)),i!==!0&&(g=null)}function z(){(C.value!==null||e.scrollTarget!==void 0)&&($.value=Gl(C.value,e.scrollTarget),E($.value,V))}function H(i){d!==!0?(Jl(O,i),l("click",i)):d=!1}function U(i){me.value===!0&&e.noFocus!==!0&&ln(x.value,i.target)!==!0&&de()}function F(i){l("escapeKey"),ee(i)}function V(){const i=x.value;i===null||C.value===null||zl({el:i,offset:e.offset,anchorEl:C.value,anchorOrigin:B.value,selfOrigin:X.value,absoluteOffset:n,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function G(){return _(Jt,L.value,()=>y.value===!0?_("div",{role:"menu",...a,ref:x,tabindex:-1,class:["q-menu q-position-engine scroll"+Y.value,a.class],style:[a.style,Z.value],...Ce.value},mt(o.default)):null)}return et(k),Object.assign(O,{focus:de,updatePosition:V}),T}}),rl=ye({name:"QPopupProxy",props:{...Nt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:o,emit:l,attrs:a}){const{proxy:g}=Pe(),{$q:n}=g,s=I(!1),d=I(null),S=h(()=>parseInt(e.breakpoint,10)),{canShow:O}=Qt({showing:s});function f(){return n.screen.width<S.value||n.screen.height<S.value?"dialog":"menu"}const x=I(f()),y=h(()=>x.value==="menu"?{maxHeight:"99vh"}:{});ie(()=>f(),b=>{s.value!==!0&&(x.value=b)});function v(b){s.value=!0,l("show",b)}function A(b){s.value=!1,x.value=f(),l("hide",b)}return Object.assign(g,{show(b){O(b)===!0&&d.value.show(b)},hide(b){d.value.hide(b)},toggle(b){d.value.toggle(b)}}),nn(g,"currentComponent",()=>({type:x.value,ref:d.value})),()=>{const b={ref:d,...y.value,...a,onShow:v,onHide:A};let w;return x.value==="dialog"?w=el:(w=ul,Object.assign(b,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),_(w,b,o.default)}}}),zn=ye({name:"QField",inheritAttrs:!1,props:gt,emits:tl,setup(){return ll(nl())}});const An={xs:8,sm:10,md:14,lg:20,xl:24};var vt=ye({name:"QChip",props:{...Zt,...on,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:o,emit:l}){const{proxy:{$q:a}}=Pe(),g=Gt(e,a),n=an(e,An),s=h(()=>e.selected===!0||e.icon!==void 0),d=h(()=>e.selected===!0?e.iconSelected||a.iconSet.chip.selected:e.icon),S=h(()=>e.iconRemove||a.iconSet.chip.remove),O=h(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),f=h(()=>{const w=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(w?` text-${w} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(O.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(g.value===!0?" q-chip--dark q-dark":"")}),x=h(()=>{const w=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},j={...w,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||a.lang.label.remove};return{chip:w,remove:j}});function y(w){w.keyCode===13&&v(w)}function v(w){e.disable||(l("update:selected",!e.selected),l("click",w))}function A(w){(w.keyCode===void 0||w.keyCode===13)&&(Se(w),e.disable===!1&&(l("update:modelValue",!1),l("remove")))}function b(){const w=[];O.value===!0&&w.push(_("div",{class:"q-focus-helper"})),s.value===!0&&w.push(_(se,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const j=e.label!==void 0?[_("div",{class:"ellipsis"},[e.label])]:void 0;return w.push(_("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},rn(o.default,j))),e.iconRight&&w.push(_(se,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&w.push(_(se,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:S.value,...x.value.remove,onClick:A,onKeyup:A})),w}return()=>{if(e.modelValue===!1)return;const w={class:f.value,style:n.value};return O.value===!0&&Object.assign(w,x.value.chip,{onClick:v,onKeyup:y}),un("div",w,b(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[sn,e.ripple]])}}});let Je=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,Je=e.scrollLeft>=0,e.remove()}const ce=1e3,Tn=["start","center","end","start-force","center-force","end-force"],sl=Array.prototype.filter,Bn=window.getComputedStyle(document.body).overflowAnchor===void 0?cn:function(e,o){e!==null&&(cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;const l=e.children||[];sl.call(l,g=>g.dataset&&g.dataset.qVsAnchor!==void 0).forEach(g=>{delete g.dataset.qVsAnchor});const a=l[o];a&&a.dataset&&(a.dataset.qVsAnchor="")}))};function Ee(e,o){return e+o}function ct(e,o,l,a,g,n,s,d){const S=e===window?document.scrollingElement||document.documentElement:e,O=g===!0?"offsetWidth":"offsetHeight",f={scrollStart:0,scrollViewSize:-s-d,scrollMaxSize:0,offsetStart:-s,offsetEnd:-d};if(g===!0?(e===window?(f.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,f.scrollViewSize+=document.documentElement.clientWidth):(f.scrollStart=S.scrollLeft,f.scrollViewSize+=S.clientWidth),f.scrollMaxSize=S.scrollWidth,n===!0&&(f.scrollStart=(Je===!0?f.scrollMaxSize-f.scrollViewSize:0)-f.scrollStart)):(e===window?(f.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,f.scrollViewSize+=document.documentElement.clientHeight):(f.scrollStart=S.scrollTop,f.scrollViewSize+=S.clientHeight),f.scrollMaxSize=S.scrollHeight),l!==null)for(let x=l.previousElementSibling;x!==null;x=x.previousElementSibling)x.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetStart+=x[O]);if(a!==null)for(let x=a.nextElementSibling;x!==null;x=x.nextElementSibling)x.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetEnd+=x[O]);if(o!==e){const x=S.getBoundingClientRect(),y=o.getBoundingClientRect();g===!0?(f.offsetStart+=y.left-x.left,f.offsetEnd-=y.width):(f.offsetStart+=y.top-x.top,f.offsetEnd-=y.height),e!==window&&(f.offsetStart+=f.scrollStart),f.offsetEnd+=f.scrollMaxSize-f.offsetStart}return f}function Dt(e,o,l,a){o==="end"&&(o=(e===window?document.body:e)[l===!0?"scrollWidth":"scrollHeight"]),e===window?l===!0?(a===!0&&(o=(Je===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):l===!0?(a===!0&&(o=(Je===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function je(e,o,l,a){if(l>=a)return 0;const g=o.length,n=Math.floor(l/ce),s=Math.floor((a-1)/ce)+1;let d=e.slice(n,s).reduce(Ee,0);return l%ce!==0&&(d-=o.slice(n*ce,l).reduce(Ee,0)),a%ce!==0&&a!==g&&(d-=o.slice(a,s*ce).reduce(Ee,0)),d}const Mn={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},In={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Mn};function On({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:l,virtualScrollItemSizeComputed:a}){const g=Pe(),{props:n,emit:s,proxy:d}=g,{$q:S}=d;let O,f,x,y=[],v;const A=I(0),b=I(0),w=I({}),j=I(null),L=I(null),Z=I(null),$=I({from:0,to:0}),E=h(()=>n.tableColspan!==void 0?n.tableColspan:100);a===void 0&&(a=h(()=>n.virtualScrollItemSize));const P=h(()=>a.value+";"+n.virtualScrollHorizontal),C=h(()=>P.value+";"+n.virtualScrollSliceRatioBefore+";"+n.virtualScrollSliceRatioAfter);ie(C,()=>{Y()}),ie(P,K);function K(){X(f,!0)}function ee(r){X(r===void 0?f:r)}function ue(r,k){const z=o();if(z==null||z.nodeType===8)return;const H=ct(z,l(),j.value,L.value,n.virtualScrollHorizontal,S.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd);x!==H.scrollViewSize&&Y(H.scrollViewSize),T(z,H,Math.min(e.value-1,Math.max(0,parseInt(r,10)||0)),0,Tn.indexOf(k)>-1?k:f>-1&&r>f?"end":"start")}function te(){const r=o();if(r==null||r.nodeType===8)return;const k=ct(r,l(),j.value,L.value,n.virtualScrollHorizontal,S.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd),z=e.value-1,H=k.scrollMaxSize-k.offsetStart-k.offsetEnd-b.value;if(O===k.scrollStart)return;if(k.scrollMaxSize<=0){T(r,k,0,0);return}x!==k.scrollViewSize&&Y(k.scrollViewSize),p($.value.from);const U=Math.floor(k.scrollMaxSize-Math.max(k.scrollViewSize,k.offsetEnd)-Math.min(v[z],k.scrollViewSize/2));if(U>0&&Math.ceil(k.scrollStart)>=U){T(r,k,z,k.scrollMaxSize-k.offsetEnd-y.reduce(Ee,0));return}let F=0,V=k.scrollStart-k.offsetStart,G=V;if(V<=H&&V+k.scrollViewSize>=A.value)V-=A.value,F=$.value.from,G=V;else for(let i=0;V>=y[i]&&F<z;i++)V-=y[i],F+=ce;for(;V>0&&F<z;)V-=v[F],V>-k.scrollViewSize?(F++,G=V):G=v[F]+V;T(r,k,F,G)}function T(r,k,z,H,U){const F=typeof U=="string"&&U.indexOf("-force")>-1,V=F===!0?U.replace("-force",""):U,G=V!==void 0?V:"start";let i=Math.max(0,z-w.value[G]),J=i+w.value.total;J>e.value&&(J=e.value,i=Math.max(0,J-w.value.total)),O=k.scrollStart;const ge=i!==$.value.from||J!==$.value.to;if(ge===!1&&V===void 0){me(z);return}const{activeElement:pe}=document,fe=Z.value;ge===!0&&fe!==null&&fe!==pe&&fe.contains(pe)===!0&&(fe.addEventListener("focusout",B),setTimeout(()=>{fe!==null&&fe.removeEventListener("focusout",B)})),Bn(fe,z-i);const Ne=V!==void 0?v.slice(i,z).reduce(Ee,0):0;if(ge===!0){const be=J>=$.value.from&&i<=$.value.to?$.value.to:J;$.value={from:i,to:be},A.value=je(y,v,0,i),b.value=je(y,v,J,e.value),requestAnimationFrame(()=>{$.value.to!==J&&O===k.scrollStart&&($.value={from:$.value.from,to:J},b.value=je(y,v,J,e.value))})}requestAnimationFrame(()=>{if(O!==k.scrollStart)return;ge===!0&&p(i);const be=v.slice(i,z).reduce(Ee,0),_e=be+k.offsetStart+A.value,Qe=_e+v[z];let $e=_e+H;if(V!==void 0){const tt=be-Ne,oe=k.scrollStart+tt;$e=F!==!0&&oe<_e&&Qe<oe+k.scrollViewSize?oe:V==="end"?Qe-k.scrollViewSize:_e-(V==="start"?0:Math.round((k.scrollViewSize-v[z])/2))}O=$e,Dt(r,$e,n.virtualScrollHorizontal,S.lang.rtl),me(z)})}function p(r){const k=Z.value;if(k){const z=sl.call(k.children,i=>i.classList&&i.classList.contains("q-virtual-scroll--skip")===!1),H=z.length,U=n.virtualScrollHorizontal===!0?i=>i.getBoundingClientRect().width:i=>i.offsetHeight;let F=r,V,G;for(let i=0;i<H;){for(V=U(z[i]),i++;i<H&&z[i].classList.contains("q-virtual-scroll--with-prev")===!0;)V+=U(z[i]),i++;G=V-v[F],G!==0&&(v[F]+=G,y[Math.floor(F/ce)]+=G),F++}}}function B(){Z.value!==null&&Z.value!==void 0&&Z.value.focus()}function X(r,k){const z=1*a.value;(k===!0||Array.isArray(v)===!1)&&(v=[]);const H=v.length;v.length=e.value;for(let F=e.value-1;F>=H;F--)v[F]=z;const U=Math.floor((e.value-1)/ce);y=[];for(let F=0;F<=U;F++){let V=0;const G=Math.min((F+1)*ce,e.value);for(let i=F*ce;i<G;i++)V+=v[i];y.push(V)}f=-1,O=void 0,A.value=je(y,v,0,$.value.from),b.value=je(y,v,$.value.to,e.value),r>=0?(p($.value.from),he(()=>{ue(r)})):de()}function Y(r){if(r===void 0&&typeof window!="undefined"){const V=o();V!=null&&V.nodeType!==8&&(r=ct(V,l(),j.value,L.value,n.virtualScrollHorizontal,S.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd).scrollViewSize)}x=r;const k=parseFloat(n.virtualScrollSliceRatioBefore)||0,z=parseFloat(n.virtualScrollSliceRatioAfter)||0,H=1+k+z,U=r===void 0||r<=0?1:Math.ceil(r/a.value),F=Math.max(1,U,Math.ceil((n.virtualScrollSliceSize>0?n.virtualScrollSliceSize:10)/H));w.value={total:Math.ceil(F*H),start:Math.ceil(F*k),center:Math.ceil(F*(.5+k)),end:Math.ceil(F*(1+k)),view:U}}function Ce(r,k){const z=n.virtualScrollHorizontal===!0?"width":"height",H={["--q-virtual-scroll-item-"+z]:a.value+"px"};return[r==="tbody"?_(r,{class:"q-virtual-scroll__padding",key:"before",ref:j},[_("tr",[_("td",{style:{[z]:`${A.value}px`,...H},colspan:E.value})])]):_(r,{class:"q-virtual-scroll__padding",key:"before",ref:j,style:{[z]:`${A.value}px`,...H}}),_(r,{class:"q-virtual-scroll__content",key:"content",ref:Z,tabindex:-1},k.flat()),r==="tbody"?_(r,{class:"q-virtual-scroll__padding",key:"after",ref:L},[_("tr",[_("td",{style:{[z]:`${b.value}px`,...H},colspan:E.value})])]):_(r,{class:"q-virtual-scroll__padding",key:"after",ref:L,style:{[z]:`${b.value}px`,...H}})]}function me(r){f!==r&&(n.onVirtualScroll!==void 0&&s("virtualScroll",{index:r,from:$.value.from,to:$.value.to-1,direction:r<f?"decrease":"increase",ref:d}),f=r)}Y();const de=dn(te,S.platform.is.ios===!0?120:35);fn(()=>{Y()});let m=!1;return vn(()=>{m=!0}),mn(()=>{if(m!==!0)return;const r=o();O!==void 0&&r!==void 0&&r!==null&&r.nodeType!==8?Dt(r,O,n.virtualScrollHorizontal,S.lang.rtl):ue(f)}),et(()=>{de.cancel()}),Object.assign(d,{scrollTo:ue,reset:K,refresh:ee}),{virtualScrollSliceRange:$,virtualScrollSliceSizeComputed:w,setVirtualScrollSize:Y,onVirtualScrollEvt:de,localResetVirtualScroll:X,padVirtualScroll:Ce,scrollTo:ue,reset:K,refresh:ee}}const jt=e=>["add","add-unique","toggle"].includes(e),Fn=".*+?^${}()|[]\\",Ln=Object.keys(gt);var En=ye({name:"QSelect",inheritAttrs:!1,props:{...In,...gn,...gt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:jt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...tl,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:o,emit:l}){const{proxy:a}=Pe(),{$q:g}=a,n=I(!1),s=I(!1),d=I(-1),S=I(""),O=I(!1),f=I(!1);let x,y,v,A,b,w,j,L,Z;const $=I(null),E=I(null),P=I(null),C=I(null),K=I(null),ee=hn(e),ue=pn(Vt),te=h(()=>Array.isArray(e.options)?e.options.length:0),T=h(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:p,virtualScrollSliceSizeComputed:B,localResetVirtualScroll:X,padVirtualScroll:Y,onVirtualScrollEvt:Ce,scrollTo:me,setVirtualScrollSize:de}=On({virtualScrollLength:te,getVirtualScrollTarget:vl,getVirtualScrollEl:Ct,virtualScrollItemSizeComputed:T}),m=nl(),r=h(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,c=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const u=e.mapOptions===!0&&y!==void 0?y:[],q=c.map(D=>fl(D,u));return e.modelValue===null&&t===!0?q.filter(D=>D!==null):q}return c}),k=h(()=>{const t={};return Ln.forEach(c=>{const u=e[c];u!==void 0&&(t[c]=u)}),t}),z=h(()=>e.optionsDark===null?m.isDark.value:e.optionsDark),H=h(()=>Rt(r.value)),U=h(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),F=h(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),V=h(()=>te.value===0),G=h(()=>r.value.map(t=>ae.value(t)).join(", ")),i=h(()=>e.displayValue!==void 0?e.displayValue:G.value),J=h(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ge=h(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(J.value))),pe=h(()=>m.focused.value===!0?e.tabindex:-1),fe=h(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":n.value===!0?"true":"false","aria-controls":`${m.targetUid.value}_lb`};return d.value>=0&&(t["aria-activedescendant"]=`${m.targetUid.value}_${d.value}`),t}),Ne=h(()=>({id:`${m.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),be=h(()=>r.value.map((t,c)=>({index:c,opt:t,html:J.value(t),selected:!0,removeAtIndex:dl,toggleOption:we,tabindex:pe.value}))),_e=h(()=>{if(te.value===0)return[];const{from:t,to:c}=p.value;return e.options.slice(t,c).map((u,q)=>{const D=Ve.value(u)===!0,R=t+q,N={clickable:!0,active:!1,activeClass:tt.value,manualFocus:!0,focused:!1,disable:D,tabindex:-1,dense:e.optionsDense,dark:z.value,role:"option",id:`${m.targetUid.value}_${R}`,onClick:()=>{we(u)}};return D!==!0&&(ot(u)===!0&&(N.active=!0),d.value===R&&(N.focused=!0),N["aria-selected"]=N.active===!0?"true":"false",g.platform.is.desktop===!0&&(N.onMousemove=()=>{n.value===!0&&qe(R)})),{index:R,opt:u,html:J.value(u),label:ae.value(u),selected:N.active,focused:N.focused,toggleOption:we,setOptionIndex:qe,itemProps:N}})}),Qe=h(()=>e.dropdownIcon!==void 0?e.dropdownIcon:g.iconSet.arrow.dropdown),$e=h(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),tt=h(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),oe=h(()=>nt(e.optionValue,"value")),ae=h(()=>nt(e.optionLabel,"label")),Ve=h(()=>nt(e.optionDisable,"disable")),Ue=h(()=>r.value.map(t=>oe.value(t))),cl=h(()=>{const t={onInput:Vt,onChange:ue,onKeydown:xt,onKeyup:wt,onKeypress:kt,onFocus:pt,onClick(c){v===!0&&Me(c)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ue,t});ie(r,t=>{y=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&m.innerLoading.value!==!0&&(s.value!==!0&&n.value!==!0||H.value!==!0)&&(A!==!0&&Be(),(s.value===!0||n.value===!0)&&ze(""))},{immediate:!0}),ie(()=>e.fillInput,Be),ie(n,at),ie(te,_l);function St(t){return e.emitValue===!0?oe.value(t):t}function lt(t){if(t>-1&&t<r.value.length)if(e.multiple===!0){const c=e.modelValue.slice();l("remove",{index:t,value:c.splice(t,1)[0]}),l("update:modelValue",c)}else l("update:modelValue",null)}function dl(t){lt(t),m.focus()}function yt(t,c){const u=St(t);if(e.multiple!==!0){e.fillInput===!0&&Re(ae.value(t),!0,!0),l("update:modelValue",u);return}if(r.value.length===0){l("add",{index:0,value:u}),l("update:modelValue",e.multiple===!0?[u]:u);return}if(c===!0&&ot(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const q=e.modelValue.slice();l("add",{index:q.length,value:u}),q.push(u),l("update:modelValue",q)}function we(t,c){if(m.editable.value!==!0||t===void 0||Ve.value(t)===!0)return;const u=oe.value(t);if(e.multiple!==!0){c!==!0&&(Re(e.fillInput===!0?ae.value(t):"",!0,!0),ke()),E.value!==null&&E.value.focus(),(r.value.length===0||He(oe.value(r.value[0]),u)!==!0)&&l("update:modelValue",e.emitValue===!0?u:t);return}if((v!==!0||O.value===!0)&&m.focus(),pt(),r.value.length===0){const R=e.emitValue===!0?u:t;l("add",{index:0,value:R}),l("update:modelValue",e.multiple===!0?[R]:R);return}const q=e.modelValue.slice(),D=Ue.value.findIndex(R=>He(R,u));if(D>-1)l("remove",{index:D,value:q.splice(D,1)[0]});else{if(e.maxValues!==void 0&&q.length>=e.maxValues)return;const R=e.emitValue===!0?u:t;l("add",{index:q.length,value:R}),q.push(R)}l("update:modelValue",q)}function qe(t){if(g.platform.is.desktop!==!0)return;const c=t>-1&&t<te.value?t:-1;d.value!==c&&(d.value=c)}function Xe(t=1,c){if(n.value===!0){let u=d.value;do u=Ot(u+t,-1,te.value-1);while(u!==-1&&u!==d.value&&Ve.value(e.options[u])===!0);d.value!==u&&(qe(u),me(u),c!==!0&&e.useInput===!0&&e.fillInput===!0&&Ye(u>=0?ae.value(e.options[u]):w))}}function fl(t,c){const u=q=>He(oe.value(q),t);return e.options.find(u)||c.find(u)||t}function nt(t,c){const u=t!==void 0?t:c;return typeof u=="function"?u:q=>q!==null&&typeof q=="object"&&u in q?q[u]:q}function ot(t){const c=oe.value(t);return Ue.value.find(u=>He(u,c))!==void 0}function pt(t){e.useInput===!0&&E.value!==null&&(t===void 0||E.value===t.target&&t.target.value===G.value)&&E.value.select()}function bt(t){bn(t,27)===!0&&n.value===!0&&(Me(t),ke(),Be()),l("keyup",t)}function wt(t){const{value:c}=t.target;if(t.keyCode!==void 0){bt(t);return}if(t.target.value="",clearTimeout(x),Be(),typeof c=="string"&&c.length>0){const u=c.toLocaleLowerCase(),q=R=>{const N=e.options.find(le=>R.value(le).toLocaleLowerCase()===u);return N===void 0?!1:(r.value.indexOf(N)===-1?we(N):ke(),!0)},D=R=>{q(oe)!==!0&&(q(ae)===!0||R===!0||ze(c,!0,()=>D(!0)))};D()}else m.clearValue(t)}function kt(t){l("keypress",t)}function xt(t){if(l("keydown",t),wn(t)===!0)return;const c=S.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),u=t.shiftKey!==!0&&e.multiple!==!0&&(d.value>-1||c===!0);if(t.keyCode===27){st(t);return}if(t.keyCode===9&&u===!1){Ae();return}if(t.target===void 0||t.target.id!==m.targetUid.value)return;if(t.keyCode===40&&m.innerLoading.value!==!0&&n.value===!1){Se(t),Te();return}if(t.keyCode===8&&e.hideSelected!==!0&&S.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?lt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&l("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof S.value!="string"||S.value.length===0)&&(Se(t),d.value=-1,Xe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&B.value!==void 0&&(Se(t),d.value=Math.max(-1,Math.min(te.value,d.value+(t.keyCode===33?-1:1)*B.value.view)),Xe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Se(t),Xe(t.keyCode===38?-1:1,e.multiple));const q=te.value;if((L===void 0||Z<Date.now())&&(L=""),q>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||L.length>0)){n.value!==!0&&Te(t);const D=t.key.toLocaleLowerCase(),R=L.length===1&&L[0]===D;Z=Date.now()+1500,R===!1&&(Se(t),L+=D);const N=new RegExp("^"+L.split("").map(it=>Fn.indexOf(it)>-1?"\\"+it:it).join(".*"),"i");let le=d.value;if(R===!0||le<0||N.test(ae.value(e.options[le]))!==!0)do le=Ot(le+1,-1,q-1);while(le!==d.value&&(Ve.value(e.options[le])===!0||N.test(ae.value(e.options[le]))!==!0));d.value!==le&&he(()=>{qe(le),me(le),le>=0&&e.useInput===!0&&e.fillInput===!0&&Ye(ae.value(e.options[le]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||L!=="")&&(t.keyCode!==9||u===!1))){if(t.keyCode!==9&&Se(t),d.value>-1&&d.value<q){we(e.options[d.value]);return}if(c===!0){const D=(R,N)=>{if(N){if(jt(N)!==!0)return}else N=e.newValueMode;if(R==null)return;Re("",e.multiple!==!0,!0),(N==="toggle"?we:yt)(R,N==="add-unique"),e.multiple!==!0&&(E.value!==null&&E.value.focus(),ke())};if(e.onNewValue!==void 0?l("newValue",S.value,D):D(S.value),e.multiple!==!0)return}n.value===!0?Ae():m.innerLoading.value!==!0&&Te()}}function Ct(){return v===!0?K.value:P.value!==null&&P.value.contentEl!==null?P.value.contentEl:void 0}function vl(){return Ct()}function ml(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?be.value.map(t=>o["selected-item"](t)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?be.value.map((t,c)=>_(vt,{key:"option-"+c,removable:m.editable.value===!0&&Ve.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:pe.value,onRemove(){t.removeAtIndex(c)}},()=>_("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ae.value(t.opt)}))):[_("span",{[ge.value===!0?"innerHTML":"textContent"]:i.value})]}function _t(){if(V.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:S.value}):void 0;const t=o.option!==void 0?o.option:u=>_(Bl,{key:u.index,...u.itemProps},()=>_(Tl,()=>_(We,()=>_("span",{[u.html===!0?"innerHTML":"textContent"]:u.label}))));let c=Y("div",_e.value.map(t));return o["before-options"]!==void 0&&(c=o["before-options"]().concat(c)),Yt(o["after-options"],c)}function gl(t,c){const u=c===!0?{...fe.value,...m.splitAttrs.attributes.value}:void 0,q={ref:c===!0?E:void 0,key:"i_t",class:U.value,style:e.inputStyle,value:S.value!==void 0?S.value:"",type:"search",...u,id:c===!0?m.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...cl.value};return t!==!0&&v===!0&&(Array.isArray(q.class)===!0?q.class=[...q.class,"no-pointer-events"]:q.class+=" no-pointer-events"),_("input",q)}function Vt(t){clearTimeout(x),!(t&&t.target&&t.target.qComposing===!0)&&(Ye(t.target.value||""),A=!0,w=S.value,m.focused.value!==!0&&(v!==!0||O.value===!0)&&m.focus(),e.onFilter!==void 0&&(x=setTimeout(()=>{ze(S.value)},e.inputDebounce)))}function Ye(t){S.value!==t&&(S.value=t,l("inputValue",t))}function Re(t,c,u){A=u!==!0,e.useInput===!0&&(Ye(t),(c===!0||u!==!0)&&(w=t),c!==!0&&ze(t))}function ze(t,c,u){if(e.onFilter===void 0||c!==!0&&m.focused.value!==!0)return;m.innerLoading.value===!0?l("filterAbort"):(m.innerLoading.value=!0,f.value=!0),t!==""&&e.multiple!==!0&&r.value.length>0&&A!==!0&&t===ae.value(r.value[0])&&(t="");const q=setTimeout(()=>{n.value===!0&&(n.value=!1)},10);clearTimeout(b),b=q,l("filter",t,(D,R)=>{(c===!0||m.focused.value===!0)&&b===q&&(clearTimeout(b),typeof D=="function"&&D(),f.value=!1,he(()=>{m.innerLoading.value=!1,m.editable.value===!0&&(c===!0?n.value===!0&&ke():n.value===!0?at(!0):n.value=!0),typeof R=="function"&&he(()=>{R(a)}),typeof u=="function"&&he(()=>{u(a)})}))},()=>{m.focused.value===!0&&b===q&&(clearTimeout(b),m.innerLoading.value=!1,f.value=!1),n.value===!0&&(n.value=!1)})}function hl(){return _(ul,{ref:P,class:F.value,style:e.popupContentStyle,modelValue:n.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&V.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:z.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:$e.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ne.value,onScrollPassive:Ce,onBeforeShow:zt,onBeforeHide:Sl,onShow:yl},_t)}function Sl(t){At(t),Ae()}function yl(){de()}function pl(t){Me(t),E.value!==null&&E.value.focus(),O.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function bl(t){Me(t),he(()=>{O.value=!1})}function wl(){const t=[_(zn,{class:`col-auto ${m.fieldClass.value}`,...k.value,for:m.targetUid.value,dark:z.value,square:!0,loading:f.value,itemAligned:!1,filled:!0,stackLabel:S.value.length>0,...m.splitAttrs.listeners.value,onFocus:pl,onBlur:bl},{...o,rawControl:()=>m.getControl(!0),before:void 0,after:void 0})];return n.value===!0&&t.push(_("div",{ref:K,class:F.value+" scroll",style:e.popupContentStyle,...Ne.value,onClick:st,onScrollPassive:Ce},_t())),_(el,{ref:C,modelValue:s.value,position:e.useInput===!0?"top":void 0,transitionShow:j,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:zt,onBeforeHide:kl,onHide:xl,onShow:Cl},()=>_("div",{class:"q-select__dialog"+(z.value===!0?" q-select__dialog--dark q-dark":"")+(O.value===!0?" q-select__dialog--focused":"")},t))}function kl(t){At(t),C.value!==null&&C.value.__updateRefocusTarget(m.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),m.focused.value=!1}function xl(t){ke(),m.focused.value===!1&&l("blur",t),Be()}function Cl(){const t=document.activeElement;(t===null||t.id!==m.targetUid.value)&&E.value!==null&&E.value!==t&&E.value.focus(),de()}function Ae(){s.value!==!0&&(d.value=-1,n.value===!0&&(n.value=!1),m.focused.value===!1&&(clearTimeout(b),b=void 0,m.innerLoading.value===!0&&(l("filterAbort"),m.innerLoading.value=!1,f.value=!1)))}function Te(t){m.editable.value===!0&&(v===!0?(m.onControlFocusin(t),s.value=!0,he(()=>{m.focus()})):m.focus(),e.onFilter!==void 0?ze(S.value):(V.value!==!0||o["no-option"]!==void 0)&&(n.value=!0))}function ke(){s.value=!1,Ae()}function Be(){e.useInput===!0&&Re(e.multiple!==!0&&e.fillInput===!0&&r.value.length>0&&ae.value(r.value[0])||"",!0,!0)}function at(t){let c=-1;if(t===!0){if(r.value.length>0){const u=oe.value(r.value[0]);c=e.options.findIndex(q=>He(oe.value(q),u))}X(c)}qe(c)}function _l(t,c){n.value===!0&&m.innerLoading.value===!1&&(X(-1,!0),he(()=>{n.value===!0&&m.innerLoading.value===!1&&(t>c?X():at(!0))}))}function qt(){s.value===!1&&P.value!==null&&P.value.updatePosition()}function zt(t){t!==void 0&&Me(t),l("popupShow",t),m.hasPopupOpen=!0,m.onControlFocusin(t)}function At(t){t!==void 0&&Me(t),l("popupHide",t),m.hasPopupOpen=!1,m.onControlFocusout(t)}function Tt(){v=g.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||V.value===!1:!0),j=g.platform.is.ios===!0&&v===!0&&e.useInput===!0?"fade":e.transitionShow}return Sn(Tt),yn(qt),Tt(),et(()=>{clearTimeout(x)}),Object.assign(a,{showPopup:Te,hidePopup:ke,removeAtIndex:lt,add:yt,toggleOption:we,getOptionIndex:()=>d.value,setOptionIndex:qe,moveOptionSelection:Xe,filter:ze,updateMenuPosition:qt,updateInputValue:Re,isOptionSelected:ot,getEmittingOptionValue:St,isOptionDisabled:(...t)=>Ve.value.apply(null,t)===!0,getOptionValue:(...t)=>oe.value.apply(null,t),getOptionLabel:(...t)=>ae.value.apply(null,t)}),Object.assign(m,{innerValue:r,fieldClass:h(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:$,targetRef:E,hasValue:H,showPopup:Te,floatingLabel:h(()=>e.hideSelected!==!0&&H.value===!0||typeof S.value=="number"||S.value.length>0||Rt(e.displayValue)),getControlChild:()=>{if(m.editable.value!==!1&&(s.value===!0||V.value!==!0||o["no-option"]!==void 0))return v===!0?wl():hl();m.hasPopupOpen===!0&&(m.hasPopupOpen=!1)},controlEvents:{onFocusin(t){m.onControlFocusin(t)},onFocusout(t){m.onControlFocusout(t,()=>{Be(),Ae()})},onClick(t){if(st(t),v!==!0&&n.value===!0){Ae(),E.value!==null&&E.value.focus();return}Te(t)}},getControl:t=>{const c=ml(),u=t===!0||s.value!==!0||v!==!0;if(e.useInput===!0)c.push(gl(t,u));else if(m.editable.value===!0){const D=u===!0?fe.value:void 0;c.push(_("input",{ref:u===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:u===!0?m.targetUid.value:void 0,value:i.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...D,onKeydown:xt,onKeyup:bt,onKeypress:kt})),u===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&c.push(_("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:wt}))}if(ee.value!==void 0&&e.disable!==!0&&Ue.value.length>0){const D=Ue.value.map(R=>_("option",{value:R,selected:!0}));c.push(_("select",{class:"hidden",name:ee.value,multiple:e.multiple},D))}const q=e.useInput===!0||u!==!0?void 0:m.splitAttrs.attributes.value;return _("div",{class:"q-field__native row items-center",...q},c)},getInnerAppend:()=>e.loading!==!0&&f.value!==!0&&e.hideDropdownIcon!==!0?[_(se,{class:"q-select__dropdown-icon"+(n.value===!0?" rotate-180":""),name:Qe.value})]:null}),ll(m)}}),Pn=ye({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:o}){const{proxy:{$q:l}}=Pe(),a=Ht(kn,Ie);if(a===Ie)return console.error("QPage needs to be a deep child of QLayout"),Ie;if(Ht(xn,Ie)===Ie)return console.error("QPage needs to be child of QPageContainer"),Ie;const n=h(()=>{const d=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof e.styleFn=="function"){const S=a.isContainer.value===!0?a.containerHeight.value:l.screen.height;return e.styleFn(d,S)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-d+"px":l.screen.height===0?d!==0?`calc(100vh - ${d}px)`:"100vh":l.screen.height-d+"px"}}),s=h(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>_("main",{class:s.value,style:n.value},mt(o.default))}});const $n=/([a-z\-]+)(?<site>\.com|\.net|\.co.uk|\.org|\.gov|\.io|\.redd\.it|\.youtu\.be|\.co|\.tv|\.cc)/g,Rn=/.*\n+(([⬛🟨🟩⬜]+)\n?)+/g,Wt=/\p{Extended_Pictographic}/gu,Hn=/(\p{Extended_Pictographic}[\s|$]?){4,}/gu,Dn=/!\[img\]\(emote\|t5_[0-9A-Za-z]{5,6}\|[0-9A-Za-z]+\)|!\[gif]\(giphy\|[0-9A-Za-z]+(\|downsized)?\)|!\[gif]\(emote\|\w+\|\w+\)/g,jn=[{pattern:/(^|[\W\s])[aA][tT][hH]([\W\s]?|$)/g,replaceWith:" all time high "},{pattern:/(^|[\W\s])[pP][lL][sS]([\W\s]?|$)/g,replaceWith:" please "},{pattern:/(^|[\W\s])[iI][tT][mM]([\W\s]?|$)/g,replaceWith:" in the money "},{pattern:/(^|[\W\s])[oO][tT][mM]([\W\s]?|$)/g,replaceWith:" out of the money "},{pattern:/(^|[\W\s])[A][H]([\W\s]?|$)/g,replaceWith:" after hours "},{pattern:/([a-zA-Z]{1})\1{3,}/g,replaceWith:"$1"}];function Wn(e,o){var g,n;e.speech=e.text.toLowerCase();let l=e.speech+" ";if(Rn.test(e.text))return" wordle result ";if(Kn(o.muteEmojiSpam,e.speech))return" emoji spam ";let a=(g=l.match(Ut))!=null?g:[];a.length>0&&(e.linkURLs=[]);for(const s of a){const d=s.match($n);d!==null&&(l=l.replace(s,`- Link to ${d[0]}`))}l=l.replaceAll(/[\*\^\\]|&#x200B;/g,"");for(const s of jn)l=l.replaceAll(s.pattern,s.replaceWith);l=l.replaceAll(Hn," bunch of $1 emojis ");for(const s of(n=l.match(Dn))!=null?n:[])s.includes("gif")&&(l=l.replace(s," a gif. ")),s.includes("emote")&&(l=l.replace(s," an emote. "));return o.sayUsernames&&(l=`${e.userName} - ${l}`),e.speech=l,l}function Kn(e,o){var l,a;return e===!1||o.length<10||!Wt.test(o)?!1:((a=(l=o.match(Wt))==null?void 0:l.length)!=null?a:-1)*2/o.length>.7}const Nn={ratio:[String,Number]};function Qn(e,o){return h(()=>{const l=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const Un=16/9;var Kt=ye({name:"QImg",props:{...Nn,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Un},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:l}){const a=I(e.initialRatio),g=Qn(e,a);let n;const s=[I(null),I(b())],d=I(0),S=I(!1),O=I(!1),f=h(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),x=h(()=>({width:e.width,height:e.height})),y=h(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),v=h(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));ie(()=>A(),w);function A(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function b(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function w(C){clearTimeout(n),O.value=!1,C===null?(S.value=!1,s[d.value^1].value=b()):S.value=!0,s[d.value].value=C}function j({target:C}){n!==null&&(clearTimeout(n),a.value=C.naturalHeight===0?.5:C.naturalWidth/C.naturalHeight,L(C,1))}function L(C,K){n===null||K===1e3||(C.complete===!0?Z(C):n=setTimeout(()=>{L(C,K+1)},50))}function Z(C){n!==null&&(d.value=d.value^1,s[d.value].value=null,S.value=!1,O.value=!1,l("load",C.currentSrc||C.src))}function $(C){clearTimeout(n),S.value=!1,O.value=!0,s[d.value].value=null,s[d.value^1].value=b(),l("error",C)}function E(C){const K=s[C].value,ee={key:"img_"+C,class:y.value,style:v.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...K};return d.value===C?(ee.class+=" q-img__image--waiting",Object.assign(ee,{onLoad:j,onError:$})):ee.class+=" q-img__image--loaded",_("div",{class:"q-img__container absolute-full",key:"img"+C},_("img",ee))}function P(){return S.value!==!0?_("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},mt(o[O.value===!0?"error":"default"])):_("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[_(Cn,{color:e.spinnerColor,size:e.spinnerSize})])}return w(A()),et(()=>{clearTimeout(n),n=null}),()=>{const C=[];return g.value!==null&&C.push(_("div",{key:"filler",style:g.value})),O.value!==!0&&(s[0].value!==null&&C.push(E(0)),s[1].value!==null&&C.push(E(1))),C.push(_(Jt,{name:"q-transition--fade"},P)),_("div",{class:f.value,style:x.value,role:"img","aria-label":e.alt},C)}}});const Xn={class:"row"},Yn={class:"q-pa-sm col",style:{"min-height":"50px"}},Zn={class:"col-xs-9 col-sm-10 col-md-11 col-lg-11.5"},Gn={class:"row"},Jn={class:"row text-body2 line-clamp",style:{"font-size":"1em"}},eo={class:"row justify-start"},to={class:"col-xs-2 col-sm-1"},lo=["href"],no={class:"col-xs-2 col-sm-1"},oo=ht({__name:"Comment",props:{comment:null},setup(e){const o=e;let l=dt(Ml);const a=I([]),g=I(f()),n=I([]),s=I([]);ol(()=>{x(),d(),O(),console.log("links",s.value)});function d(){var A,b,w,j;let y=o.comment.text.matchAll(Il);for(const L of y)((A=L.groups)==null?void 0:A.gifid)&&((b=L.groups)==null?void 0:b.type)&&n.value.push({type:(w=L.groups)==null?void 0:w.type,id:(j=L.groups)==null?void 0:j.gifid,match:L[0]});let v=o.comment.text.matchAll(Ol);for(const L of v)n.value.push({type:"prev",id:"",match:L[0]})}function S(y){if(y.type=="giphy")return`https://i.giphy.com/media/${y.id}/giphy.webp`;if(y.type==="prev")return y.match}function O(){var v,A,b,w,j,L,Z,$,E;const y=o.comment.text.matchAll(Ut);for(const P of y)((v=P.groups)==null?void 0:v.linkp)&&s.value.indexOf((A=P.groups)==null?void 0:A.linkp)===-1&&n.value.find(C=>{var K;return C.match===((K=P.groups)==null?void 0:K.linkp)})===void 0&&s.value.push((b=P.groups)==null?void 0:b.linkp),((w=P.groups)==null?void 0:w.linkb)&&s.value.indexOf((j=P.groups)==null?void 0:j.linkb)===-1&&n.value.find(C=>{var K;return C.match===((K=P.groups)==null?void 0:K.linkb)})===void 0&&s.value.push((L=P.groups)==null?void 0:L.linkb),((Z=P.groups)==null?void 0:Z.link)&&s.value.indexOf(($=P.groups)==null?void 0:$.link)===-1&&n.value.find(C=>{var K;return C.match===((K=P.groups)==null?void 0:K.link)})===void 0&&s.value.push((E=P.groups)==null?void 0:E.link)}function f(){var y,v;return(v=(y=l==null?void 0:l.find(A=>A.community===o.comment.community))==null?void 0:y.imgIconUrl)!=null?v:""}function x(){let y=Xt(o.comment)?o.comment.text.toLocaleLowerCase().matchAll(Ft):o.comment.text.matchAll(Ft),v=[];for(const A of y){let b=A[0].replace("$","");!Fl.includes(b)&&!v.includes(b)&&v.length<6&&v.push(b)}a.value=v}return(y,v)=>(ne(),ve(Ke,null,[M(Fe),Q("div",Xn,[Q("div",Yn,[M(Kt,{fit:"scale-down",src:g.value,"spinner-color":"teal",style:{"max-width":"50px","min-width":"38px"}},null,8,["src"])]),Q("div",Zn,[Q("div",Gn,[M(vt,{square:"",dense:"",clickable:"",style:{"font-size":"10pt"},label:o.comment.userName,onClick:v[0]||(v[0]=A=>Oe(Lt)(o.comment.commentURL))},null,8,["label"]),o.comment.flair?(ne(),Le(vt,{key:0,style:{"font-size":"10pt"},color:"primary",dense:"",label:o.comment.flair},null,8,["label"])):Ge("",!0)]),Q("div",Jn,al(o.comment.text),1),Q("div",eo,[(ne(!0),ve(Ke,null,ft(n.value,A=>(ne(),ve("div",to,[M(se,{clickable:"",size:"28pt",color:"teal",class:"cursor-pointer",name:A.type=="giphy"?"gif":"image"},{default:W(()=>[M(rl,{"transition-show":"flip-up","transition-hide":"flip-down"},{default:W(()=>[M(il,{style:{"min-height":"180px","min-width":"250px",overflow:"hidden"}},{default:W(()=>[Q("a",{href:S(A),target:"_blank"},[M(Kt,{style:{"max-height":"280px","max-width":"350px"},loading:"lazy",src:S(A)},null,8,["src"])],8,lo)]),_:2},1024)]),_:2},1024)]),_:2},1032,["name"])]))),256)),(ne(!0),ve(Ke,null,ft(s.value,A=>(ne(),ve("div",no,[M(se,{name:"link",clickable:"",color:"teal",size:"26pt",class:"cursor-pointer",onClick:b=>Oe(Lt)(A)},null,8,["onClick"])]))),256))])])])],64))}}),ao={class:"q-pa-md"},io=ht({__name:"DisplayList",props:{displayList:null},setup(e){const o=e;return(l,a)=>(ne(),ve("div",ao,[e.displayList.length>0?(ne(),Le(Fe,{key:0})):Ge("",!0),(ne(!0),ve(Ke,null,ft(o.displayList,g=>(ne(),Le(oo,{comment:g,key:g.id},null,8,["comment"]))),128)),e.displayList.length>0?(ne(),Le(Fe,{key:1})):Ge("",!0)]))}}),uo={class:"row justify-start q-pb-lg"},ro={class:"col-xs-5 col-md-3 col-lg-2",style:{"font-size":"28pt"}},so={class:"row justify-center items-center"},co={key:0,class:"col-3"},fo={class:"col"},vo={class:"col"},mo={class:"col"},go={class:"col-7",style:{"border-left":"solid white 1pt"}},ho={class:"row items-center"},So={class:"col-2"},yo={class:"row justify-between q-py-sm"},po={class:"col-5"},bo={class:"col-5 text-right"},wo={class:"col-10"},ko={class:"row"},_o=ht({__name:"CommentController",setup(e){const o=I(!1),l=window.speechSynthesis;let a=I();const g=I(),n=I(te());let s=!1,d=I(!0),S=new Date().getTime();l.onvoiceschanged=function(){a.value=l.getVoices()};let O;const f=dt($l),x=dt(Rl),y=I([]);let v;window.Worker&&(console.log("setting up worker"),v=new Worker("/assets/webworker.dcff6a21.js"),v.onmessage=b),ol(async()=>{l.getVoices().length>0&&(a.value=l.getVoices()),A(),console.log("mounting comment controller done")}),_n(()=>{clearInterval(O),window.Worker&&v.postMessage({type:"pull",action:"stop"})});async function A(){if(!window.Worker)console.error("Web workers not possible in this environment! will not say anything, there may be delays!"),d.value=!1,O=setInterval(()=>{L(),new Date().getSeconds()%30},500);else{let T={type:"pull",action:"start"};console.log("posting to worker:",T),v.postMessage(T)}}function b(T){T.data.type==="pull"&&L(),T.data.type==="checkLong"&&$()}function w(){n.value={...ut}}function j(T){return!(!o.value||x.muteBots&&Xt(T))}function L(){if(s)return;let T=f.pullOne();if(!!T&&(y.value.unshift(T),y.value.length>x.postsToDisplay&&(y.value=y.value.slice(0,x.postsToDisplay)),j(T))){if(g.value===void 0)return;let B=Wn(T,x);var p=new SpeechSynthesisUtterance(B.substring(0,1e3));p.voice=g.value,p.lang=g.value.lang,p.rate=n.value.rate,p.volume=n.value.volume,p.pitch=n.value.pitch,s=!0;try{Et("Starting speak..."),Z(p)}catch{s=!1}}}function Z(T){T.onend=p=>{E()},T.onerror=p=>{console.error("Error saying speech!",p),l.cancel(),E()},S=new Date().getTime(),l.speak(T),v.postMessage({type:"checkLong",action:"start"})}function $(){C()?P():!Ll()&&!El()&&(l.pause(),l.resume())}function E(){s=!1,v.postMessage({type:"checkLong",action:"stop"})}function P(){l.cancel(),E()}function C(){if(s){var T=new Date().getTime()-S;return T/1e3>Pl}else return!1}function K(){o.value=!1,P()}function ee(){f.backlog.value.length>5&&f.clearBacklog()}ie(a,(T,p)=>{console.log("synth voices loaded",a),ue()});function ue(){if(!a.value){console.error("Tried selecting stored voice but allvoices len = 0");return}let T="voicepref",p=Pt(T);if(!p||p==="undefined"){console.log("coudn't find stored voice, saving new one");let B=a.value.find(Y=>Y.name.includes("UK")&&Y.name.includes("Male")||Y.name.includes("United Kingdom")),X=a.value.find(Y=>Y.default==!0);g.value=B||X||a.value[0],Ze(T,g.value.name)}else{console.log(`attempting to find ${p} in allvoices:`,a.value);let B=a.value.find(X=>X.name===p);console.log("loading voice from storage "+(B==null?void 0:B.name)),g.value=B!=null?B:a.value[0]}}function te(){let T={...ut};for(const[p,B]of Object.entries(T)){const X=p;let Y=Pt(`check_${p}`);Y===null&&Ze(`check_${p}`,ut[X]),T[X]=Y}return T}return ie(n,T=>{for(const[p,B]of Object.entries(n.value)){const X=p;Ze(`check_${p}`,n.value[X])}},{deep:!0}),ie(g,T=>{var p,B;T!=null&&T!=null&&Ze("voicepref",(B=(p=g.value)==null?void 0:p.name)!=null?B:"null")}),(T,p)=>(ne(),Le(Pn,{class:"items-start justify-start",padding:""},{default:W(()=>[Q("div",uo,[Q("div",ro,[Q("div",so,[o.value?(ne(),ve(Ke,{key:1},[Q("div",fo,[M(De,{dense:"",icon:"remove_from_queue",style:{"font-size":"14pt"},onClick:ee},{default:W(()=>[M(qn,{floating:"",color:"teal"},{default:W(()=>[re(al(Oe(f).backlog.value.length),1)]),_:1}),M(xe,null,{default:W(()=>[re(" Trim Backlog ")]),_:1})]),_:1})]),Q("div",vo,[M(De,{dense:"",onClick:K},{default:W(()=>[M(xe,null,{default:W(()=>[re(" Stop Speaking ")]),_:1}),M(se,{class:"q-px-md text-red-4",name:"stop",size:"26pt"})]),_:1})]),Q("div",mo,[M(De,{dense:"",onClick:p[1]||(p[1]=B=>P())},{default:W(()=>[M(xe,null,{default:W(()=>[re(" Skip ")]),_:1}),M(se,{class:"q-px-md",name:"fast_forward",size:"26pt"})]),_:1})])],64)):(ne(),ve("div",co,[M(De,{onClick:p[0]||(p[0]=B=>o.value=!0)},{default:W(()=>[M(xe,null,{default:W(()=>[re(" Start Speaking ")]),_:1}),M(se,{name:"record_voice_over",size:"26pt"})]),_:1})]))])]),Q("div",go,[Q("div",ho,[Q("div",So,[M(se,{clickable:"",class:"cursor-pointer q-pa-sm",name:"tune",style:{"font-size":"26pt"}},{default:W(()=>[M(xe,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:W(()=>[re(" Speech Settings ")]),_:1}),M(rl,{"transition-show":"jump-up","transition-hide":"flip-down"},{default:W(()=>[M(il,{class:"q-pa-md",style:{"min-height":"180px","min-width":"350px",overflow:"hidden"}},{default:W(()=>[Q("div",yo,[Q("div",po,[M(We,null,{default:W(()=>[re("Speech Tuning")]),_:1})]),Q("div",bo,[M(De,{dense:"",outline:"",size:"8pt",color:"teal",onClick:w},{default:W(()=>[M(xe,null,{default:W(()=>[re(" Reset To Default ")]),_:1}),M(se,{name:"refresh"})]),_:1})])]),M(Fe),M(We,null,{default:W(()=>[re(" Volume ")]),_:1}),M(rt,{modelValue:n.value.volume,"onUpdate:modelValue":p[2]||(p[2]=B=>n.value.volume=B),min:.1,max:1,step:.1,snap:"",label:"",color:"teal",onChange:p[3]||(p[3]=B=>{Oe(Et)("updating volume to "+B),n.value.volume=B})},null,8,["modelValue"]),M(Fe),M(We,null,{default:W(()=>[re(" pitch ")]),_:1}),M(rt,{modelValue:n.value.pitch,"onUpdate:modelValue":p[4]||(p[4]=B=>n.value.pitch=B),min:0,max:2,step:.2,snap:"",label:"",color:"teal",onChange:p[5]||(p[5]=B=>n.value.pitch=B)},null,8,["modelValue"]),M(Fe),M(We,null,{default:W(()=>[re(" rate ")]),_:1}),M(rt,{modelValue:n.value.rate,"onUpdate:modelValue":p[6]||(p[6]=B=>n.value.rate=B),min:.5,max:3,step:.1,snap:"",label:"",color:"teal",onChange:p[7]||(p[7]=B=>n.value.rate=B)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),Q("div",wo,[M(En,{modelValue:g.value,"onUpdate:modelValue":p[8]||(p[8]=B=>g.value=B),options:Oe(a),label:"Selected Voice","option-value":"name","option-label":"name",style:{"max-width":"350px"},filled:"","options-selected-class":"text-white bg-teal",labelColor:"white",dense:""},null,8,["modelValue","options"])])]),Q("div",ko,[Oe(d)?Ge("",!0):(ne(),Le(se,{key:0,name:"warning_amber",color:"amber",size:"24pt",class:"q-pa-sm"},{default:W(()=>[M(xe,null,{default:W(()=>[re(" Environment doesn't support Web Workers - Javascript throttling likely. Expect slowdowns. ")]),_:1})]),_:1}))])])]),M(io,{displayList:y.value},null,8,["displayList"])]),_:1}))}});export{_o as default};
