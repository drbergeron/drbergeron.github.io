import{u as Qt,k as Mt,l as _l,m as Vl,n as Ut,p as Ft,r as Ot,o as ql,q as zl,t as Lt,b as Al,a as We,Q as Tl,w as Bl,x as mt,s as Il,y as Ml,z as Fl,I as gt,A as $t,B as Et,E as Ol,D as st,F as Ll,H as $l,J as El,e as Pt,S as Ze,i as Pl,v as Rl,K as ct,g as xe,h as dt}from"./injectKeys.b60cfc84.js";import{c as pe,a as S,h as C,P as Xt,p as Hl,q as Yt,ah as Dl,t as jl,r as F,v as Zt,ai as Wl,D as Kl,aj as Nl,y as Ql,ak as Ul,w as ie,ax as Xl,aq as Yl,ay as Zl,az as Rt,J as Gl,aA as Jl,b as ht,T as Gt,d as lt,g as Ee,aB as en,aC as tn,aD as ln,C as Se,aE as nn,aF as Jt,aG as St,aH as el,aI as tl,aJ as ll,aK as on,aL as an,F as un,B as se,aM as rn,a9 as sn,n as cn,aN as dn,aO as fn,aP as vn,aQ as mn,e as he,at as gn,aR as hn,aS as Ht,aT as He,aU as Sn,aV as yn,ac as ft,aW as pn,ap as Me,ab as bn,aX as wn,f as Fe,k as Dt,m as kn,I as Cn,aY as xn,R as yt,o as nl,S as G,a4 as ve,Y as I,Q as Le,$ as N,a1 as Oe,U as ye,a3 as et,a0 as ol,a6 as Ke,a5 as Ge,V as D,aZ as al,O as _n,_ as re,Z as De}from"./index.c9e033a9.js";const Vn=["top","middle","bottom"];var qn=pe({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Vn.includes(e)}},setup(e,{slots:o}){const l=S(()=>e.align!==void 0?{verticalAlign:e.align}:null),a=S(()=>{const g=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(g!==void 0?` text-${g}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>C("div",{class:a.value,style:l.value,role:"status","aria-label":e.label},Xt(o.default,e.label!==void 0?[e.label]:[]))}}),il=pe({name:"QMenu",inheritAttrs:!1,props:{...Qt,...Hl,...Yt,...Dl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Mt},self:{type:String,validator:Mt},offset:{type:Array,validator:_l},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...jl,"click","escapeKey"],setup(e,{slots:o,emit:l,attrs:a}){let g=null,n,p,i;const h=Ee(),{proxy:M}=h,{$q:d}=M,f=F(null),b=F(!1),m=S(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),T=Zt(e,d),{registerTick:x,removeTick:k}=Wl(),{registerTimeout:E}=Kl(),{transitionProps:j,transitionStyle:J}=Nl(e),{localScrollTarget:P,changeScrollEvent:L,unconfigureScrollTarget:Z}=Vl(e,A),{anchorEl:q,canShow:ee}=Ut({showing:b}),{hide:te}=Ql({showing:b,canShow:ee,handleShow:v,handleHide:s,hideOnRouteChange:m,processOnMount:!0}),{showPortal:ue,hidePortal:le,renderPortal:z}=Ul(h,f,X),y={anchorEl:q,innerRef:f,onClickOutside(u){if(e.persistent!==!0&&b.value===!0)return te(u),(u.type==="touchstart"||u.target.classList.contains("q-dialog__backdrop"))&&Se(u),!0}},B=S(()=>Ft(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),Q=S(()=>e.cover===!0?B.value:Ft(e.self||"top start",d.lang.rtl)),U=S(()=>(e.square===!0?" q-menu--square":"")+(T.value===!0?" q-menu--dark q-dark":"")),_e=S(()=>e.autoClose===!0?{onClick:R}:{}),me=S(()=>b.value===!0&&e.persistent!==!0);ie(me,u=>{u===!0?(tn(O),zl(y)):(Rt(O),Ot(y))});function de(){en(()=>{let u=f.value;u&&u.contains(document.activeElement)!==!0&&(u=u.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.querySelector("[autofocus], [data-autofocus]")||u,u.focus({preventScroll:!0}))})}function v(u){if(g=e.noRefocus===!1?document.activeElement:null,Xl(K),ue(),A(),n=void 0,u!==void 0&&(e.touchPosition||e.contextMenu)){const Y=Yl(u);if(Y.left!==void 0){const{top:ge,left:be}=q.value.getBoundingClientRect();n={left:Y.left-be,top:Y.top-ge}}}p===void 0&&(p=ie(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,_)),e.noFocus!==!0&&document.activeElement.blur(),x(()=>{_(),e.noFocus!==!0&&de()}),E(()=>{d.platform.is.ios===!0&&(i=e.autoClose,f.value.click()),_(),ue(!0),l("show",u)},e.transitionDuration)}function s(u){k(),le(),w(!0),g!==null&&(u===void 0||u.qClickOutside!==!0)&&(((u&&u.type.indexOf("key")===0?g.closest('[tabindex]:not([tabindex^="-"])'):void 0)||g).focus(),g=null),E(()=>{le(!0),l("hide",u)},e.transitionDuration)}function w(u){n=void 0,p!==void 0&&(p(),p=void 0),(u===!0||b.value===!0)&&(Zl(K),Z(),Ot(y),Rt(O)),u!==!0&&(g=null)}function A(){(q.value!==null||e.scrollTarget!==void 0)&&(P.value=Gl(q.value,e.scrollTarget),L(P.value,_))}function R(u){i!==!0?(Jl(M,u),l("click",u)):i=!1}function K(u){me.value===!0&&e.noFocus!==!0&&ln(f.value,u.target)!==!0&&de()}function O(u){l("escapeKey"),te(u)}function _(){const u=f.value;u===null||q.value===null||ql({el:u,offset:e.offset,anchorEl:q.value,anchorOrigin:B.value,selfOrigin:Q.value,absoluteOffset:n,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function X(){return C(Gt,j.value,()=>b.value===!0?C("div",{role:"menu",...a,ref:f,tabindex:-1,class:["q-menu q-position-engine scroll"+U.value,a.class],style:[a.style,J.value],..._e.value},ht(o.default)):null)}return lt(w),Object.assign(M,{focus:de,updatePosition:_}),z}}),ul=pe({name:"QPopupProxy",props:{...Qt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:o,emit:l,attrs:a}){const{proxy:g}=Ee(),{$q:n}=g,p=F(!1),i=F(null),h=S(()=>parseInt(e.breakpoint,10)),{canShow:M}=Ut({showing:p});function d(){return n.screen.width<h.value||n.screen.height<h.value?"dialog":"menu"}const f=F(d()),b=S(()=>f.value==="menu"?{maxHeight:"99vh"}:{});ie(()=>d(),x=>{p.value!==!0&&(f.value=x)});function m(x){p.value=!0,l("show",x)}function T(x){p.value=!1,f.value=d(),l("hide",x)}return Object.assign(g,{show(x){M(x)===!0&&i.value.show(x)},hide(x){i.value.hide(x)},toggle(x){i.value.toggle(x)}}),nn(g,"currentComponent",()=>({type:f.value,ref:i.value})),()=>{const x={ref:i,...b.value,...a,onShow:m,onHide:T};let k;return f.value==="dialog"?k=Jt:(k=il,Object.assign(x,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),C(k,x,o.default)}}}),zn=pe({name:"QField",inheritAttrs:!1,props:St,emits:el,setup(){return tl(ll())}});const An={xs:8,sm:10,md:14,lg:20,xl:24};var Je=pe({name:"QChip",props:{...Yt,...on,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:o,emit:l}){const{proxy:{$q:a}}=Ee(),g=Zt(e,a),n=an(e,An),p=S(()=>e.selected===!0||e.icon!==void 0),i=S(()=>e.selected===!0?e.iconSelected||a.iconSet.chip.selected:e.icon),h=S(()=>e.iconRemove||a.iconSet.chip.remove),M=S(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),d=S(()=>{const k=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(k?` text-${k} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(M.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(g.value===!0?" q-chip--dark q-dark":"")}),f=S(()=>{const k=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},E={...k,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||a.lang.label.remove};return{chip:k,remove:E}});function b(k){k.keyCode===13&&m(k)}function m(k){e.disable||(l("update:selected",!e.selected),l("click",k))}function T(k){(k.keyCode===void 0||k.keyCode===13)&&(Se(k),e.disable===!1&&(l("update:modelValue",!1),l("remove")))}function x(){const k=[];M.value===!0&&k.push(C("div",{class:"q-focus-helper"})),p.value===!0&&k.push(C(se,{class:"q-chip__icon q-chip__icon--left",name:i.value}));const E=e.label!==void 0?[C("div",{class:"ellipsis"},[e.label])]:void 0;return k.push(C("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},rn(o.default,E))),e.iconRight&&k.push(C(se,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&k.push(C(se,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...f.value.remove,onClick:T,onKeyup:T})),k}return()=>{if(e.modelValue===!1)return;const k={class:d.value,style:n.value};return M.value===!0&&Object.assign(k,f.value.chip,{onClick:m,onKeyup:b}),un("div",k,x(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[sn,e.ripple]])}}});let tt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,tt=e.scrollLeft>=0,e.remove()}const ce=1e3,Tn=["start","center","end","start-force","center-force","end-force"],rl=Array.prototype.filter,Bn=window.getComputedStyle(document.body).overflowAnchor===void 0?cn:function(e,o){e!==null&&(cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;const l=e.children||[];rl.call(l,g=>g.dataset&&g.dataset.qVsAnchor!==void 0).forEach(g=>{delete g.dataset.qVsAnchor});const a=l[o];a&&a.dataset&&(a.dataset.qVsAnchor="")}))};function $e(e,o){return e+o}function vt(e,o,l,a,g,n,p,i){const h=e===window?document.scrollingElement||document.documentElement:e,M=g===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-p-i,scrollMaxSize:0,offsetStart:-p,offsetEnd:-i};if(g===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=h.scrollLeft,d.scrollViewSize+=h.clientWidth),d.scrollMaxSize=h.scrollWidth,n===!0&&(d.scrollStart=(tt===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=h.scrollTop,d.scrollViewSize+=h.clientHeight),d.scrollMaxSize=h.scrollHeight),l!==null)for(let f=l.previousElementSibling;f!==null;f=f.previousElementSibling)f.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=f[M]);if(a!==null)for(let f=a.nextElementSibling;f!==null;f=f.nextElementSibling)f.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=f[M]);if(o!==e){const f=h.getBoundingClientRect(),b=o.getBoundingClientRect();g===!0?(d.offsetStart+=b.left-f.left,d.offsetEnd-=b.width):(d.offsetStart+=b.top-f.top,d.offsetEnd-=b.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function jt(e,o,l,a){o==="end"&&(o=(e===window?document.body:e)[l===!0?"scrollWidth":"scrollHeight"]),e===window?l===!0?(a===!0&&(o=(tt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):l===!0?(a===!0&&(o=(tt===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function je(e,o,l,a){if(l>=a)return 0;const g=o.length,n=Math.floor(l/ce),p=Math.floor((a-1)/ce)+1;let i=e.slice(n,p).reduce($e,0);return l%ce!==0&&(i-=o.slice(n*ce,l).reduce($e,0)),a%ce!==0&&a!==g&&(i-=o.slice(a,p*ce).reduce($e,0)),i}const In={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Mn={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...In};function Fn({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:l,virtualScrollItemSizeComputed:a}){const g=Ee(),{props:n,emit:p,proxy:i}=g,{$q:h}=i;let M,d,f,b=[],m;const T=F(0),x=F(0),k=F({}),E=F(null),j=F(null),J=F(null),P=F({from:0,to:0}),L=S(()=>n.tableColspan!==void 0?n.tableColspan:100);a===void 0&&(a=S(()=>n.virtualScrollItemSize));const Z=S(()=>a.value+";"+n.virtualScrollHorizontal),q=S(()=>Z.value+";"+n.virtualScrollSliceRatioBefore+";"+n.virtualScrollSliceRatioAfter);ie(q,()=>{U()}),ie(Z,ee);function ee(){Q(d,!0)}function te(s){Q(s===void 0?d:s)}function ue(s,w){const A=o();if(A==null||A.nodeType===8)return;const R=vt(A,l(),E.value,j.value,n.virtualScrollHorizontal,h.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd);f!==R.scrollViewSize&&U(R.scrollViewSize),z(A,R,Math.min(e.value-1,Math.max(0,parseInt(s,10)||0)),0,Tn.indexOf(w)>-1?w:d>-1&&s>d?"end":"start")}function le(){const s=o();if(s==null||s.nodeType===8)return;const w=vt(s,l(),E.value,j.value,n.virtualScrollHorizontal,h.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd),A=e.value-1,R=w.scrollMaxSize-w.offsetStart-w.offsetEnd-x.value;if(M===w.scrollStart)return;if(w.scrollMaxSize<=0){z(s,w,0,0);return}f!==w.scrollViewSize&&U(w.scrollViewSize),y(P.value.from);const K=Math.floor(w.scrollMaxSize-Math.max(w.scrollViewSize,w.offsetEnd)-Math.min(m[A],w.scrollViewSize/2));if(K>0&&Math.ceil(w.scrollStart)>=K){z(s,w,A,w.scrollMaxSize-w.offsetEnd-b.reduce($e,0));return}let O=0,_=w.scrollStart-w.offsetStart,X=_;if(_<=R&&_+w.scrollViewSize>=T.value)_-=T.value,O=P.value.from,X=_;else for(let u=0;_>=b[u]&&O<A;u++)_-=b[u],O+=ce;for(;_>0&&O<A;)_-=m[O],_>-w.scrollViewSize?(O++,X=_):X=m[O]+_;z(s,w,O,X)}function z(s,w,A,R,K){const O=typeof K=="string"&&K.indexOf("-force")>-1,_=O===!0?K.replace("-force",""):K,X=_!==void 0?_:"start";let u=Math.max(0,A-k.value[X]),Y=u+k.value.total;Y>e.value&&(Y=e.value,u=Math.max(0,Y-k.value.total)),M=w.scrollStart;const ge=u!==P.value.from||Y!==P.value.to;if(ge===!1&&_===void 0){me(A);return}const{activeElement:be}=document,fe=J.value;ge===!0&&fe!==null&&fe!==be&&fe.contains(be)===!0&&(fe.addEventListener("focusout",B),setTimeout(()=>{fe!==null&&fe.removeEventListener("focusout",B)})),Bn(fe,A-u);const Ne=_!==void 0?m.slice(u,A).reduce($e,0):0;if(ge===!0){const we=Y>=P.value.from&&u<=P.value.to?P.value.to:Y;P.value={from:u,to:we},T.value=je(b,m,0,u),x.value=je(b,m,Y,e.value),requestAnimationFrame(()=>{P.value.to!==Y&&M===w.scrollStart&&(P.value={from:P.value.from,to:Y},x.value=je(b,m,Y,e.value))})}requestAnimationFrame(()=>{if(M!==w.scrollStart)return;ge===!0&&y(u);const we=m.slice(u,A).reduce($e,0),Ve=we+w.offsetStart+T.value,Qe=Ve+m[A];let Pe=Ve+R;if(_!==void 0){const nt=we-Ne,oe=w.scrollStart+nt;Pe=O!==!0&&oe<Ve&&Qe<oe+w.scrollViewSize?oe:_==="end"?Qe-w.scrollViewSize:Ve-(_==="start"?0:Math.round((w.scrollViewSize-m[A])/2))}M=Pe,jt(s,Pe,n.virtualScrollHorizontal,h.lang.rtl),me(A)})}function y(s){const w=J.value;if(w){const A=rl.call(w.children,u=>u.classList&&u.classList.contains("q-virtual-scroll--skip")===!1),R=A.length,K=n.virtualScrollHorizontal===!0?u=>u.getBoundingClientRect().width:u=>u.offsetHeight;let O=s,_,X;for(let u=0;u<R;){for(_=K(A[u]),u++;u<R&&A[u].classList.contains("q-virtual-scroll--with-prev")===!0;)_+=K(A[u]),u++;X=_-m[O],X!==0&&(m[O]+=X,b[Math.floor(O/ce)]+=X),O++}}}function B(){J.value!==null&&J.value!==void 0&&J.value.focus()}function Q(s,w){const A=1*a.value;(w===!0||Array.isArray(m)===!1)&&(m=[]);const R=m.length;m.length=e.value;for(let O=e.value-1;O>=R;O--)m[O]=A;const K=Math.floor((e.value-1)/ce);b=[];for(let O=0;O<=K;O++){let _=0;const X=Math.min((O+1)*ce,e.value);for(let u=O*ce;u<X;u++)_+=m[u];b.push(_)}d=-1,M=void 0,T.value=je(b,m,0,P.value.from),x.value=je(b,m,P.value.to,e.value),s>=0?(y(P.value.from),he(()=>{ue(s)})):de()}function U(s){if(s===void 0&&typeof window!="undefined"){const _=o();_!=null&&_.nodeType!==8&&(s=vt(_,l(),E.value,j.value,n.virtualScrollHorizontal,h.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd).scrollViewSize)}f=s;const w=parseFloat(n.virtualScrollSliceRatioBefore)||0,A=parseFloat(n.virtualScrollSliceRatioAfter)||0,R=1+w+A,K=s===void 0||s<=0?1:Math.ceil(s/a.value),O=Math.max(1,K,Math.ceil((n.virtualScrollSliceSize>0?n.virtualScrollSliceSize:10)/R));k.value={total:Math.ceil(O*R),start:Math.ceil(O*w),center:Math.ceil(O*(.5+w)),end:Math.ceil(O*(1+w)),view:K}}function _e(s,w){const A=n.virtualScrollHorizontal===!0?"width":"height",R={["--q-virtual-scroll-item-"+A]:a.value+"px"};return[s==="tbody"?C(s,{class:"q-virtual-scroll__padding",key:"before",ref:E},[C("tr",[C("td",{style:{[A]:`${T.value}px`,...R},colspan:L.value})])]):C(s,{class:"q-virtual-scroll__padding",key:"before",ref:E,style:{[A]:`${T.value}px`,...R}}),C(s,{class:"q-virtual-scroll__content",key:"content",ref:J,tabindex:-1},w.flat()),s==="tbody"?C(s,{class:"q-virtual-scroll__padding",key:"after",ref:j},[C("tr",[C("td",{style:{[A]:`${x.value}px`,...R},colspan:L.value})])]):C(s,{class:"q-virtual-scroll__padding",key:"after",ref:j,style:{[A]:`${x.value}px`,...R}})]}function me(s){d!==s&&(n.onVirtualScroll!==void 0&&p("virtualScroll",{index:s,from:P.value.from,to:P.value.to-1,direction:s<d?"decrease":"increase",ref:i}),d=s)}U();const de=dn(le,h.platform.is.ios===!0?120:35);fn(()=>{U()});let v=!1;return vn(()=>{v=!0}),mn(()=>{if(v!==!0)return;const s=o();M!==void 0&&s!==void 0&&s!==null&&s.nodeType!==8?jt(s,M,n.virtualScrollHorizontal,h.lang.rtl):ue(d)}),lt(()=>{de.cancel()}),Object.assign(i,{scrollTo:ue,reset:ee,refresh:te}),{virtualScrollSliceRange:P,virtualScrollSliceSizeComputed:k,setVirtualScrollSize:U,onVirtualScrollEvt:de,localResetVirtualScroll:Q,padVirtualScroll:_e,scrollTo:ue,reset:ee,refresh:te}}const Wt=e=>["add","add-unique","toggle"].includes(e),On=".*+?^${}()|[]\\",Ln=Object.keys(St);var $n=pe({name:"QSelect",inheritAttrs:!1,props:{...Mn,...gn,...St,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Wt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...el,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:o,emit:l}){const{proxy:a}=Ee(),{$q:g}=a,n=F(!1),p=F(!1),i=F(-1),h=F(""),M=F(!1),d=F(!1);let f,b,m,T,x,k,E,j,J;const P=F(null),L=F(null),Z=F(null),q=F(null),ee=F(null),te=hn(e),ue=pn(zt),le=S(()=>Array.isArray(e.options)?e.options.length:0),z=S(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:y,virtualScrollSliceSizeComputed:B,localResetVirtualScroll:Q,padVirtualScroll:U,onVirtualScrollEvt:_e,scrollTo:me,setVirtualScrollSize:de}=Fn({virtualScrollLength:le,getVirtualScrollTarget:fl,getVirtualScrollEl:Vt,virtualScrollItemSizeComputed:z}),v=ll(),s=S(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,c=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const r=e.mapOptions===!0&&b!==void 0?b:[],V=c.map(H=>dl(H,r));return e.modelValue===null&&t===!0?V.filter(H=>H!==null):V}return c}),w=S(()=>{const t={};return Ln.forEach(c=>{const r=e[c];r!==void 0&&(t[c]=r)}),t}),A=S(()=>e.optionsDark===null?v.isDark.value:e.optionsDark),R=S(()=>Ht(s.value)),K=S(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||s.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),O=S(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),_=S(()=>le.value===0),X=S(()=>s.value.map(t=>ae.value(t)).join(", ")),u=S(()=>e.displayValue!==void 0?e.displayValue:X.value),Y=S(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ge=S(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||s.value.some(Y.value))),be=S(()=>v.focused.value===!0?e.tabindex:-1),fe=S(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":n.value===!0?"true":"false","aria-controls":`${v.targetUid.value}_lb`};return i.value>=0&&(t["aria-activedescendant"]=`${v.targetUid.value}_${i.value}`),t}),Ne=S(()=>({id:`${v.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),we=S(()=>s.value.map((t,c)=>({index:c,opt:t,html:Y.value(t),selected:!0,removeAtIndex:cl,toggleOption:ke,tabindex:be.value}))),Ve=S(()=>{if(le.value===0)return[];const{from:t,to:c}=y.value;return e.options.slice(t,c).map((r,V)=>{const H=qe.value(r)===!0,$=t+V,W={clickable:!0,active:!1,activeClass:nt.value,manualFocus:!0,focused:!1,disable:H,tabindex:-1,dense:e.optionsDense,dark:A.value,role:"option",id:`${v.targetUid.value}_${$}`,onClick:()=>{ke(r)}};return H!==!0&&(it(r)===!0&&(W.active=!0),i.value===$&&(W.focused=!0),W["aria-selected"]=W.active===!0?"true":"false",g.platform.is.desktop===!0&&(W.onMousemove=()=>{n.value===!0&&ze($)})),{index:$,opt:r,html:Y.value(r),label:ae.value(r),selected:W.active,focused:W.focused,toggleOption:ke,setOptionIndex:ze,itemProps:W}})}),Qe=S(()=>e.dropdownIcon!==void 0?e.dropdownIcon:g.iconSet.arrow.dropdown),Pe=S(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),nt=S(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),oe=S(()=>at(e.optionValue,"value")),ae=S(()=>at(e.optionLabel,"label")),qe=S(()=>at(e.optionDisable,"disable")),Ue=S(()=>s.value.map(t=>oe.value(t))),sl=S(()=>{const t={onInput:zt,onChange:ue,onKeydown:_t,onKeyup:Ct,onKeypress:xt,onFocus:wt,onClick(c){m===!0&&Me(c)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ue,t});ie(s,t=>{b=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&v.innerLoading.value!==!0&&(p.value!==!0&&n.value!==!0||R.value!==!0)&&(T!==!0&&Ie(),(p.value===!0||n.value===!0)&&Ae(""))},{immediate:!0}),ie(()=>e.fillInput,Ie),ie(n,ut),ie(le,xl);function pt(t){return e.emitValue===!0?oe.value(t):t}function ot(t){if(t>-1&&t<s.value.length)if(e.multiple===!0){const c=e.modelValue.slice();l("remove",{index:t,value:c.splice(t,1)[0]}),l("update:modelValue",c)}else l("update:modelValue",null)}function cl(t){ot(t),v.focus()}function bt(t,c){const r=pt(t);if(e.multiple!==!0){e.fillInput===!0&&Re(ae.value(t),!0,!0),l("update:modelValue",r);return}if(s.value.length===0){l("add",{index:0,value:r}),l("update:modelValue",e.multiple===!0?[r]:r);return}if(c===!0&&it(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const V=e.modelValue.slice();l("add",{index:V.length,value:r}),V.push(r),l("update:modelValue",V)}function ke(t,c){if(v.editable.value!==!0||t===void 0||qe.value(t)===!0)return;const r=oe.value(t);if(e.multiple!==!0){c!==!0&&(Re(e.fillInput===!0?ae.value(t):"",!0,!0),Ce()),L.value!==null&&L.value.focus(),(s.value.length===0||He(oe.value(s.value[0]),r)!==!0)&&l("update:modelValue",e.emitValue===!0?r:t);return}if((m!==!0||M.value===!0)&&v.focus(),wt(),s.value.length===0){const $=e.emitValue===!0?r:t;l("add",{index:0,value:$}),l("update:modelValue",e.multiple===!0?[$]:$);return}const V=e.modelValue.slice(),H=Ue.value.findIndex($=>He($,r));if(H>-1)l("remove",{index:H,value:V.splice(H,1)[0]});else{if(e.maxValues!==void 0&&V.length>=e.maxValues)return;const $=e.emitValue===!0?r:t;l("add",{index:V.length,value:$}),V.push($)}l("update:modelValue",V)}function ze(t){if(g.platform.is.desktop!==!0)return;const c=t>-1&&t<le.value?t:-1;i.value!==c&&(i.value=c)}function Xe(t=1,c){if(n.value===!0){let r=i.value;do r=Lt(r+t,-1,le.value-1);while(r!==-1&&r!==i.value&&qe.value(e.options[r])===!0);i.value!==r&&(ze(r),me(r),c!==!0&&e.useInput===!0&&e.fillInput===!0&&Ye(r>=0?ae.value(e.options[r]):k))}}function dl(t,c){const r=V=>He(oe.value(V),t);return e.options.find(r)||c.find(r)||t}function at(t,c){const r=t!==void 0?t:c;return typeof r=="function"?r:V=>V!==null&&typeof V=="object"&&r in V?V[r]:V}function it(t){const c=oe.value(t);return Ue.value.find(r=>He(r,c))!==void 0}function wt(t){e.useInput===!0&&L.value!==null&&(t===void 0||L.value===t.target&&t.target.value===X.value)&&L.value.select()}function kt(t){bn(t,27)===!0&&n.value===!0&&(Me(t),Ce(),Ie()),l("keyup",t)}function Ct(t){const{value:c}=t.target;if(t.keyCode!==void 0){kt(t);return}if(t.target.value="",clearTimeout(f),Ie(),typeof c=="string"&&c.length>0){const r=c.toLocaleLowerCase(),V=$=>{const W=e.options.find(ne=>$.value(ne).toLocaleLowerCase()===r);return W===void 0?!1:(s.value.indexOf(W)===-1?ke(W):Ce(),!0)},H=$=>{V(oe)!==!0&&(V(ae)===!0||$===!0||Ae(c,!0,()=>H(!0)))};H()}else v.clearValue(t)}function xt(t){l("keypress",t)}function _t(t){if(l("keydown",t),wn(t)===!0)return;const c=h.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),r=t.shiftKey!==!0&&e.multiple!==!0&&(i.value>-1||c===!0);if(t.keyCode===27){ft(t);return}if(t.keyCode===9&&r===!1){Te();return}if(t.target===void 0||t.target.id!==v.targetUid.value)return;if(t.keyCode===40&&v.innerLoading.value!==!0&&n.value===!1){Se(t),Be();return}if(t.keyCode===8&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ot(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&l("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(Se(t),i.value=-1,Xe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&B.value!==void 0&&(Se(t),i.value=Math.max(-1,Math.min(le.value,i.value+(t.keyCode===33?-1:1)*B.value.view)),Xe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Se(t),Xe(t.keyCode===38?-1:1,e.multiple));const V=le.value;if((j===void 0||J<Date.now())&&(j=""),V>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||j.length>0)){n.value!==!0&&Be(t);const H=t.key.toLocaleLowerCase(),$=j.length===1&&j[0]===H;J=Date.now()+1500,$===!1&&(Se(t),j+=H);const W=new RegExp("^"+j.split("").map(rt=>On.indexOf(rt)>-1?"\\"+rt:rt).join(".*"),"i");let ne=i.value;if($===!0||ne<0||W.test(ae.value(e.options[ne]))!==!0)do ne=Lt(ne+1,-1,V-1);while(ne!==i.value&&(qe.value(e.options[ne])===!0||W.test(ae.value(e.options[ne]))!==!0));i.value!==ne&&he(()=>{ze(ne),me(ne),ne>=0&&e.useInput===!0&&e.fillInput===!0&&Ye(ae.value(e.options[ne]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||j!=="")&&(t.keyCode!==9||r===!1))){if(t.keyCode!==9&&Se(t),i.value>-1&&i.value<V){ke(e.options[i.value]);return}if(c===!0){const H=($,W)=>{if(W){if(Wt(W)!==!0)return}else W=e.newValueMode;if($==null)return;Re("",e.multiple!==!0,!0),(W==="toggle"?ke:bt)($,W==="add-unique"),e.multiple!==!0&&(L.value!==null&&L.value.focus(),Ce())};if(e.onNewValue!==void 0?l("newValue",h.value,H):H(h.value),e.multiple!==!0)return}n.value===!0?Te():v.innerLoading.value!==!0&&Be()}}function Vt(){return m===!0?ee.value:Z.value!==null&&Z.value.contentEl!==null?Z.value.contentEl:void 0}function fl(){return Vt()}function vl(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?we.value.map(t=>o["selected-item"](t)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?we.value.map((t,c)=>C(Je,{key:"option-"+c,removable:v.editable.value===!0&&qe.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:be.value,onRemove(){t.removeAtIndex(c)}},()=>C("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ae.value(t.opt)}))):[C("span",{[ge.value===!0?"innerHTML":"textContent"]:u.value})]}function qt(){if(_.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:h.value}):void 0;const t=o.option!==void 0?o.option:r=>C(Tl,{key:r.index,...r.itemProps},()=>C(Al,()=>C(We,()=>C("span",{[r.html===!0?"innerHTML":"textContent"]:r.label}))));let c=U("div",Ve.value.map(t));return o["before-options"]!==void 0&&(c=o["before-options"]().concat(c)),Xt(o["after-options"],c)}function ml(t,c){const r=c===!0?{...fe.value,...v.splitAttrs.attributes.value}:void 0,V={ref:c===!0?L:void 0,key:"i_t",class:K.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...r,id:c===!0?v.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...sl.value};return t!==!0&&m===!0&&(Array.isArray(V.class)===!0?V.class=[...V.class,"no-pointer-events"]:V.class+=" no-pointer-events"),C("input",V)}function zt(t){clearTimeout(f),!(t&&t.target&&t.target.qComposing===!0)&&(Ye(t.target.value||""),T=!0,k=h.value,v.focused.value!==!0&&(m!==!0||M.value===!0)&&v.focus(),e.onFilter!==void 0&&(f=setTimeout(()=>{Ae(h.value)},e.inputDebounce)))}function Ye(t){h.value!==t&&(h.value=t,l("inputValue",t))}function Re(t,c,r){T=r!==!0,e.useInput===!0&&(Ye(t),(c===!0||r!==!0)&&(k=t),c!==!0&&Ae(t))}function Ae(t,c,r){if(e.onFilter===void 0||c!==!0&&v.focused.value!==!0)return;v.innerLoading.value===!0?l("filterAbort"):(v.innerLoading.value=!0,d.value=!0),t!==""&&e.multiple!==!0&&s.value.length>0&&T!==!0&&t===ae.value(s.value[0])&&(t="");const V=setTimeout(()=>{n.value===!0&&(n.value=!1)},10);clearTimeout(x),x=V,l("filter",t,(H,$)=>{(c===!0||v.focused.value===!0)&&x===V&&(clearTimeout(x),typeof H=="function"&&H(),d.value=!1,he(()=>{v.innerLoading.value=!1,v.editable.value===!0&&(c===!0?n.value===!0&&Ce():n.value===!0?ut(!0):n.value=!0),typeof $=="function"&&he(()=>{$(a)}),typeof r=="function"&&he(()=>{r(a)})}))},()=>{v.focused.value===!0&&x===V&&(clearTimeout(x),v.innerLoading.value=!1,d.value=!1),n.value===!0&&(n.value=!1)})}function gl(){return C(il,{ref:Z,class:O.value,style:e.popupContentStyle,modelValue:n.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&_.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:A.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Pe.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ne.value,onScrollPassive:_e,onBeforeShow:Tt,onBeforeHide:hl,onShow:Sl},qt)}function hl(t){Bt(t),Te()}function Sl(){de()}function yl(t){Me(t),L.value!==null&&L.value.focus(),M.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function pl(t){Me(t),he(()=>{M.value=!1})}function bl(){const t=[C(zn,{class:`col-auto ${v.fieldClass.value}`,...w.value,for:v.targetUid.value,dark:A.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:h.value.length>0,...v.splitAttrs.listeners.value,onFocus:yl,onBlur:pl},{...o,rawControl:()=>v.getControl(!0),before:void 0,after:void 0})];return n.value===!0&&t.push(C("div",{ref:ee,class:O.value+" scroll",style:e.popupContentStyle,...Ne.value,onClick:ft,onScrollPassive:_e},qt())),C(Jt,{ref:q,modelValue:p.value,position:e.useInput===!0?"top":void 0,transitionShow:E,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Tt,onBeforeHide:wl,onHide:kl,onShow:Cl},()=>C("div",{class:"q-select__dialog"+(A.value===!0?" q-select__dialog--dark q-dark":"")+(M.value===!0?" q-select__dialog--focused":"")},t))}function wl(t){Bt(t),q.value!==null&&q.value.__updateRefocusTarget(v.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),v.focused.value=!1}function kl(t){Ce(),v.focused.value===!1&&l("blur",t),Ie()}function Cl(){const t=document.activeElement;(t===null||t.id!==v.targetUid.value)&&L.value!==null&&L.value!==t&&L.value.focus(),de()}function Te(){p.value!==!0&&(i.value=-1,n.value===!0&&(n.value=!1),v.focused.value===!1&&(clearTimeout(x),x=void 0,v.innerLoading.value===!0&&(l("filterAbort"),v.innerLoading.value=!1,d.value=!1)))}function Be(t){v.editable.value===!0&&(m===!0?(v.onControlFocusin(t),p.value=!0,he(()=>{v.focus()})):v.focus(),e.onFilter!==void 0?Ae(h.value):(_.value!==!0||o["no-option"]!==void 0)&&(n.value=!0))}function Ce(){p.value=!1,Te()}function Ie(){e.useInput===!0&&Re(e.multiple!==!0&&e.fillInput===!0&&s.value.length>0&&ae.value(s.value[0])||"",!0,!0)}function ut(t){let c=-1;if(t===!0){if(s.value.length>0){const r=oe.value(s.value[0]);c=e.options.findIndex(V=>He(oe.value(V),r))}Q(c)}ze(c)}function xl(t,c){n.value===!0&&v.innerLoading.value===!1&&(Q(-1,!0),he(()=>{n.value===!0&&v.innerLoading.value===!1&&(t>c?Q():ut(!0))}))}function At(){p.value===!1&&Z.value!==null&&Z.value.updatePosition()}function Tt(t){t!==void 0&&Me(t),l("popupShow",t),v.hasPopupOpen=!0,v.onControlFocusin(t)}function Bt(t){t!==void 0&&Me(t),l("popupHide",t),v.hasPopupOpen=!1,v.onControlFocusout(t)}function It(){m=g.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||_.value===!1:!0),E=g.platform.is.ios===!0&&m===!0&&e.useInput===!0?"fade":e.transitionShow}return Sn(It),yn(At),It(),lt(()=>{clearTimeout(f)}),Object.assign(a,{showPopup:Be,hidePopup:Ce,removeAtIndex:ot,add:bt,toggleOption:ke,getOptionIndex:()=>i.value,setOptionIndex:ze,moveOptionSelection:Xe,filter:Ae,updateMenuPosition:At,updateInputValue:Re,isOptionSelected:it,getEmittingOptionValue:pt,isOptionDisabled:(...t)=>qe.value.apply(null,t)===!0,getOptionValue:(...t)=>oe.value.apply(null,t),getOptionLabel:(...t)=>ae.value.apply(null,t)}),Object.assign(v,{innerValue:s,fieldClass:S(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:P,targetRef:L,hasValue:R,showPopup:Be,floatingLabel:S(()=>e.hideSelected!==!0&&R.value===!0||typeof h.value=="number"||h.value.length>0||Ht(e.displayValue)),getControlChild:()=>{if(v.editable.value!==!1&&(p.value===!0||_.value!==!0||o["no-option"]!==void 0))return m===!0?bl():gl();v.hasPopupOpen===!0&&(v.hasPopupOpen=!1)},controlEvents:{onFocusin(t){v.onControlFocusin(t)},onFocusout(t){v.onControlFocusout(t,()=>{Ie(),Te()})},onClick(t){if(ft(t),m!==!0&&n.value===!0){Te(),L.value!==null&&L.value.focus();return}Be(t)}},getControl:t=>{const c=vl(),r=t===!0||p.value!==!0||m!==!0;if(e.useInput===!0)c.push(ml(t,r));else if(v.editable.value===!0){const H=r===!0?fe.value:void 0;c.push(C("input",{ref:r===!0?L:void 0,key:"d_t",class:"q-select__focus-target",id:r===!0?v.targetUid.value:void 0,value:u.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...H,onKeydown:_t,onKeyup:kt,onKeypress:xt})),r===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&c.push(C("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ct}))}if(te.value!==void 0&&e.disable!==!0&&Ue.value.length>0){const H=Ue.value.map($=>C("option",{value:$,selected:!0}));c.push(C("select",{class:"hidden",name:te.value,multiple:e.multiple},H))}const V=e.useInput===!0||r!==!0?void 0:v.splitAttrs.attributes.value;return C("div",{class:"q-field__native row items-center",...V},c)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[C(se,{class:"q-select__dropdown-icon"+(n.value===!0?" rotate-180":""),name:Qe.value})]:null}),tl(v)}}),En=pe({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:o}){const{proxy:{$q:l}}=Ee(),a=Dt(kn,Fe);if(a===Fe)return console.error("QPage needs to be a deep child of QLayout"),Fe;if(Dt(Cn,Fe)===Fe)return console.error("QPage needs to be child of QPageContainer"),Fe;const n=S(()=>{const i=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof e.styleFn=="function"){const h=a.isContainer.value===!0?a.containerHeight.value:l.screen.height;return e.styleFn(i,h)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-i+"px":l.screen.height===0?i!==0?`calc(100vh - ${i}px)`:"100vh":l.screen.height-i+"px"}}),p=S(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>C("main",{class:p.value,style:n.value},ht(o.default))}});const Pn=/([a-z\-]+)(?<site>\.com|\.net|\.co.uk|\.org|\.gov|\.io|\.redd\.it|\.youtu\.be|\.co|\.tv|\.cc)/g,Rn=/.*\n+(([â¬›ðŸŸ¨ðŸŸ©â¬œ]+)\n?)+/g,Kt=/\p{Extended_Pictographic}/gu,Hn=/(\p{Extended_Pictographic}[\s|$]?){4,}/gu,Dn=/!\[img\]\(emote\|t5_[0-9A-Za-z]{5,6}\|[0-9A-Za-z]+\)|!\[gif]\(giphy\|[0-9A-Za-z]+(\|downsized)?\)|!\[gif]\(emote\|\w+\|\w+\)/g,jn=[{pattern:/(^|[\W\s])[aA][tT][hH]([\W\s]?|$)/g,replaceWith:" all time high "},{pattern:/(^|[\W\s])[pP][lL][sS]([\W\s]?|$)/g,replaceWith:" please "},{pattern:/(^|[\W\s])[iI][tT][mM]([\W\s]?|$)/g,replaceWith:" in the money "},{pattern:/(^|[\W\s])[oO][tT][mM]([\W\s]?|$)/g,replaceWith:" out of the money "},{pattern:/(^|[\W\s])[A][H]([\W\s]?|$)/g,replaceWith:" after hours "},{pattern:/([a-zA-Z]{1})\1{3,}/g,replaceWith:"$1"}];function Wn(e,o){var g,n,p;e.speech=e.text.toLowerCase();let l=e.speech+" ";if(Rn.test(e.text))return" wordle result ";if(Kn(o.muteEmojiSpam,e.speech))return" emoji spam ";let a=(g=l.match(Bl))!=null?g:[];a.length>0&&(e.linkURLs=[]);for(const i of a){e.hasLink=!0;const h=i.match(Pn);h!==null&&(l=l.replace(i,`- Link to ${h[0]}`),(n=e.linkURLs)==null||n.push(i))}l=l.replaceAll(/[\*\^\\]|&#x200B;/g,"");for(const i of jn)l=l.replaceAll(i.pattern,i.replaceWith);l=l.replaceAll(Hn," bunch of $1 emojis ");for(const i of(p=e.text.match(Dn))!=null?p:[])i.includes("gif")&&(l=l.replace(i," a gif. ")),i.includes("emote")&&(l=l.replace(i," an emote. "));return o.sayUsernames&&(l=`${e.userName} - ${e.speech}`),e.speech=l,l}function Kn(e,o){var l,a;return e===!1||o.length<10||!Kt.test(o)?!1:((a=(l=o.match(Kt))==null?void 0:l.length)!=null?a:-1)*2/o.length>.7}const Nn={ratio:[String,Number]};function Qn(e,o){return S(()=>{const l=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const Un=16/9;var Nt=pe({name:"QImg",props:{...Nn,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Un},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:l}){const a=F(e.initialRatio),g=Qn(e,a);let n;const p=[F(null),F(x())],i=F(0),h=F(!1),M=F(!1),d=S(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),f=S(()=>({width:e.width,height:e.height})),b=S(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),m=S(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));ie(()=>T(),k);function T(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function x(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function k(q){clearTimeout(n),M.value=!1,q===null?(h.value=!1,p[i.value^1].value=x()):h.value=!0,p[i.value].value=q}function E({target:q}){n!==null&&(clearTimeout(n),a.value=q.naturalHeight===0?.5:q.naturalWidth/q.naturalHeight,j(q,1))}function j(q,ee){n===null||ee===1e3||(q.complete===!0?J(q):n=setTimeout(()=>{j(q,ee+1)},50))}function J(q){n!==null&&(i.value=i.value^1,p[i.value].value=null,h.value=!1,M.value=!1,l("load",q.currentSrc||q.src))}function P(q){clearTimeout(n),h.value=!1,M.value=!0,p[i.value].value=null,p[i.value^1].value=x(),l("error",q)}function L(q){const ee=p[q].value,te={key:"img_"+q,class:b.value,style:m.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...ee};return i.value===q?(te.class+=" q-img__image--waiting",Object.assign(te,{onLoad:E,onError:P})):te.class+=" q-img__image--loaded",C("div",{class:"q-img__container absolute-full",key:"img"+q},C("img",te))}function Z(){return h.value!==!0?C("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ht(o[M.value===!0?"error":"default"])):C("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[C(xn,{color:e.spinnerColor,size:e.spinnerSize})])}return k(T()),lt(()=>{clearTimeout(n),n=null}),()=>{const q=[];return g.value!==null&&q.push(C("div",{key:"filler",style:g.value})),M.value!==!0&&(p[0].value!==null&&q.push(L(0)),p[1].value!==null&&q.push(L(1))),q.push(C(Gt,{name:"q-transition--fade"},Z)),C("div",{class:d.value,style:f.value,role:"img","aria-label":e.alt},q)}}});const Xn={class:"row"},Yn={class:"column q-pa-sm col-1",style:{"min-height":"50px"}},Zn={class:"column col-9"},Gn={class:"row"},Jn={class:"row"},eo={class:"col-sm-12"},to={class:"ellipsis-3-lines text-body2",style:{"font-size":"1em"}},lo={style:{"font-size":"26pt"}},no=["href"],oo={class:"row col-1"},ao={class:"col-10"},io={class:"col-1"},uo=yt({__name:"Comment",props:{comment:null},setup(e){const o=e;let l=mt(Il);const a=F([]),g=F(h()),n=F([]);nl(()=>{M(),p()});function p(){var m,T,x,k;let f=o.comment.text.matchAll(Ml);for(const E of f)((m=E.groups)==null?void 0:m.gifid)&&((T=E.groups)==null?void 0:T.type)&&n.value.push({type:(x=E.groups)==null?void 0:x.type,id:(k=E.groups)==null?void 0:k.gifid,match:E[0]});let b=o.comment.text.matchAll(Fl);for(const E of b)n.value.push({type:"prev",id:"",match:E[0]})}function i(f){if(f.type=="giphy")return`https://i.giphy.com/media/${f.id}/giphy.webp`;if(f.type==="prev")return f.match}function h(){var f,b;return(b=(f=l==null?void 0:l.find(m=>m.community===o.comment.community))==null?void 0:f.imgIconUrl)!=null?b:""}function M(){let f=gt(o.comment)?o.comment.text.toLocaleLowerCase().matchAll($t):o.comment.text.matchAll($t),b=[];for(const m of f){let T=m[0].replace("$","");!Ol.includes(T)&&!b.includes(T)&&b.length<6&&b.push(T)}a.value=b}function d(f){window.open("https://www.marketwatch.com/investing/stock/"+f)}return(f,b)=>{var m;return G(),ve(Ke,null,[I(Le),N("div",Xn,[N("div",Yn,[I(Nt,{fit:"scale-down",src:g.value,"spinner-color":"teal",style:{"max-width":"48px","min-width":"25px"}},null,8,["src"])]),N("div",Zn,[N("div",Gn,[I(Je,{square:"",dense:"",clickable:"",style:{"font-size":"10pt"},label:o.comment.userName,onClick:b[0]||(b[0]=T=>Oe(Et)(o.comment.commentURL))},null,8,["label"]),o.comment.flair?(G(),ye(Je,{key:0,style:{"font-size":"10pt"},color:"primary",dense:"",label:o.comment.flair},null,8,["label"])):et("",!0)]),N("div",Jn,[N("div",eo,[N("div",to,ol(o.comment.text),1),N("div",lo,[(G(!0),ve(Ke,null,Ge(n.value,T=>(G(),ye(se,{clickable:"",class:"cursor-pointer",name:T.type=="giphy"?"gif":"image"},{default:D(()=>[I(ul,{"transition-show":"flip-up","transition-hide":"flip-down"},{default:D(()=>[I(al,{style:{"min-height":"180px","min-width":"250px",overflow:"hidden"}},{default:D(()=>[N("a",{href:i(T),target:"_blank"},[I(Nt,{style:{"max-height":"280px","max-width":"350px"},loading:"lazy",src:i(T)},null,8,["src"])],8,no)]),_:2},1024)]),_:2},1024)]),_:2},1032,["name"]))),256))])])])]),N("div",oo,[(G(!0),ve(Ke,null,Ge(a.value,T=>(G(),ve("div",ao,[I(Je,{clickable:"",color:"teal",label:T,onClick:x=>d(T),dense:""},null,8,["label","onClick"])]))),256)),N("div",io,[(G(!0),ve(Ke,null,Ge((m=o.comment.linkURLs)!=null?m:[],T=>(G(),ye(se,{size:"20pt",class:"cursor-pointer",color:"teal",name:"link",onClick:x=>Oe(Et)(T)},null,8,["onClick"]))),256))])])])],64)}}}),ro={class:"q-pa-md"},so=yt({__name:"DisplayList",props:{displayList:null},setup(e){const o=e;return(l,a)=>(G(),ve("div",ro,[e.displayList.length>0?(G(),ye(Le,{key:0})):et("",!0),(G(!0),ve(Ke,null,Ge(o.displayList,g=>(G(),ye(uo,{comment:g,key:g.id},null,8,["comment"]))),128)),e.displayList.length>0?(G(),ye(Le,{key:1})):et("",!0)]))}}),co={class:"row justify-start q-pb-lg"},fo={key:0,class:"col-lg-2 col-md-3 col-sm-5 col-xs-5 text-center"},vo={key:1,class:"col-lg-2 col-md-3 col-sm-5 col-xs-5 text-center",style:{"font-size":"28pt"}},mo={class:"col-*",style:{"border-left":"solid white 1pt"}},go={class:"row justify-between q-py-sm"},ho={class:"col-5"},So={class:"col-5 text-right"},yo={class:"col"},po={class:"row"},bo={class:"col-sm-*"},wo={class:"col-sm-*"},xo=yt({__name:"CommentController",setup(e){const o=F(!1),l=window.speechSynthesis;let a=F();const g=F(),n=F(le());let p=!1,i=F(!0),h=new Date().getTime();l.onvoiceschanged=function(){a.value=l.getVoices()};let M;const d=mt(Pl),f=mt(Rl),b=F([]);let m;window.Worker&&(console.log("setting up worker"),m=new Worker("/assets/webworker.dcff6a21.js"),m.onmessage=x),nl(async()=>{l.getVoices().length>0&&(a.value=l.getVoices()),T(),console.log("mounting comment controller done")}),_n(()=>{clearInterval(M),window.Worker&&m.postMessage({type:"pull",action:"stop"})});async function T(){if(!window.Worker)console.error("Web workers not possible in this environment! will not say anything, there may be delays!"),i.value=!1,M=setInterval(()=>{j(),new Date().getSeconds()%30},500);else{let z={type:"pull",action:"start"};console.log("posting to worker:",z),m.postMessage(z)}}function x(z){z.data.type==="pull"&&j(),z.data.type==="checkLong"&&P()}function k(){n.value={...ct}}function E(z){return st(`checking should say comment ${o.value}, ${f.muteBots}, ${gt(z)}`),o.value&&f.muteBots&&!gt(z)}function j(){if(p)return;let z=d.pullOne();if(!!z&&(b.value.unshift(z),b.value.length>f.postsToDisplay&&(b.value=b.value.slice(0,f.postsToDisplay)),E(z))){if(g.value===void 0)return;let B=Wn(z,f);var y=new SpeechSynthesisUtterance(B.substring(0,1e3));y.voice=g.value,y.lang=g.value.lang,y.rate=n.value.rate,y.volume=n.value.volume,y.pitch=n.value.pitch,p=!0;try{st("Starting speak..."),J(y)}catch{p=!1}}}function J(z){z.onend=y=>{L()},z.onerror=y=>{console.error("Error saying speech!",y),l.cancel(),L()},h=new Date().getTime(),l.speak(z),m.postMessage({type:"checkLong",action:"start"})}function P(){q()?Z():!Ll()&&!$l()&&(l.pause(),l.resume())}function L(){p=!1,m.postMessage({type:"checkLong",action:"stop"})}function Z(){l.cancel(),L()}function q(){if(p){var z=new Date().getTime()-h;return z/1e3>El}else return!1}function ee(){o.value=!1,Z()}function te(){d.backlog.value.length>5&&d.clearBacklog()}ie(a,(z,y)=>{console.log("synth voices loaded",a),ue()});function ue(){if(!a.value){console.error("Tried selecting stored voice but allvoices len = 0");return}let z="voicepref",y=Pt(z);if(!y||y==="undefined"){console.log("coudn't find stored voice, saving new one");let B=a.value.find(U=>U.name.includes("UK")&&U.name.includes("Male")||U.name.includes("United Kingdom")),Q=a.value.find(U=>U.default==!0);g.value=B||Q||a.value[0],Ze(z,g.value.name)}else{console.log(`attempting to find ${y} in allvoices:`,a.value);let B=a.value.find(Q=>Q.name===y);console.log("loading voice from storage "+(B==null?void 0:B.name)),g.value=B!=null?B:a.value[0]}}function le(){let z={...ct};for(const[y,B]of Object.entries(z)){const Q=y;let U=Pt(`check_${y}`);U===null&&Ze(`check_${y}`,ct[Q]),z[Q]=U}return z}return ie(n,z=>{for(const[y,B]of Object.entries(n.value)){const Q=y;Ze(`check_${y}`,n.value[Q])}},{deep:!0}),ie(g,z=>{var y,B;z!=null&&z!=null&&Ze("voicepref",(B=(y=g.value)==null?void 0:y.name)!=null?B:"null")}),(z,y)=>(G(),ye(En,{class:"items-start justify-start",padding:""},{default:D(()=>[N("div",co,[o.value?(G(),ve("div",vo,[I(De,{dense:"",icon:"remove_from_queue",style:{"font-size":"14pt"},onClick:te},{default:D(()=>[I(qn,{floating:"",color:"teal"},{default:D(()=>[re(ol(Oe(d).backlog.value.length),1)]),_:1}),I(xe,null,{default:D(()=>[re(" Trim Backlog ")]),_:1})]),_:1}),I(De,{dense:"",onClick:ee},{default:D(()=>[I(xe,null,{default:D(()=>[re(" Stop Speaking ")]),_:1}),I(se,{class:"q-px-md text-red-4",name:"stop",size:"26pt"})]),_:1}),I(De,{dense:"",onClick:y[1]||(y[1]=B=>Z())},{default:D(()=>[I(xe,null,{default:D(()=>[re(" Skip ")]),_:1}),I(se,{class:"q-px-md",name:"fast_forward",size:"26pt"})]),_:1})])):(G(),ve("div",fo,[I(De,{onClick:y[0]||(y[0]=B=>o.value=!0)},{default:D(()=>[I(xe,null,{default:D(()=>[re(" Start Speaking ")]),_:1}),I(se,{name:"record_voice_over",size:"26pt"})]),_:1})])),N("div",mo,[I(se,{clickable:"",class:"cursor-pointer q-pa-sm",name:"tune",style:{"font-size":"26pt"}},{default:D(()=>[I(xe,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:D(()=>[re(" Speech Settings ")]),_:1}),I(ul,{"transition-show":"jump-up","transition-hide":"flip-down"},{default:D(()=>[I(al,{class:"q-pa-md",style:{"min-height":"180px","min-width":"350px",overflow:"hidden"}},{default:D(()=>[N("div",go,[N("div",ho,[I(We,null,{default:D(()=>[re("Speech Tuning")]),_:1})]),N("div",So,[I(De,{dense:"",outline:"",size:"8pt",color:"teal",onClick:k},{default:D(()=>[I(xe,null,{default:D(()=>[re(" Reset To Default ")]),_:1}),I(se,{name:"refresh"})]),_:1})])]),I(Le),I(We,null,{default:D(()=>[re(" Volume ")]),_:1}),I(dt,{modelValue:n.value.volume,"onUpdate:modelValue":y[2]||(y[2]=B=>n.value.volume=B),min:.1,max:1,step:.1,snap:"",label:"",color:"teal",onChange:y[3]||(y[3]=B=>{Oe(st)("updating volume to "+B),n.value.volume=B})},null,8,["modelValue"]),I(Le),I(We,null,{default:D(()=>[re(" pitch ")]),_:1}),I(dt,{modelValue:n.value.pitch,"onUpdate:modelValue":y[4]||(y[4]=B=>n.value.pitch=B),min:0,max:2,step:.2,snap:"",label:"",color:"teal",onChange:y[5]||(y[5]=B=>n.value.pitch=B)},null,8,["modelValue"]),I(Le),I(We,null,{default:D(()=>[re(" rate ")]),_:1}),I(dt,{modelValue:n.value.rate,"onUpdate:modelValue":y[6]||(y[6]=B=>n.value.rate=B),min:.5,max:3,step:.1,snap:"",label:"",color:"teal",onChange:y[7]||(y[7]=B=>n.value.rate=B)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),N("div",yo,[N("div",po,[N("div",bo,[I($n,{modelValue:g.value,"onUpdate:modelValue":y[8]||(y[8]=B=>g.value=B),options:Oe(a),label:"Selected Voice","option-value":"name","option-label":"name",style:{"min-width":"250px","max-width":"400px"},filled:"","options-selected-class":"text-white bg-teal",labelColor:"white",dense:""},null,8,["modelValue","options"])]),N("div",wo,[Oe(i)?et("",!0):(G(),ye(se,{key:0,name:"warning_amber",color:"amber",size:"24pt",class:"q-pa-sm"},{default:D(()=>[I(xe,null,{default:D(()=>[re(" Environment doesn't support Web Workers - Javascript throttling likely. Expect slowdowns. ")]),_:1})]),_:1}))])])])]),I(so,{displayList:b.value},null,8,["displayList"])]),_:1}))}});export{xo as default};
