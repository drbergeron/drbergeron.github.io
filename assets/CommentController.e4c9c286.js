import{u as Kt,k as At,l as _l,m as Vl,n as Qt,p as It,r as Ft,o as ql,q as zl,t as Ot,b as Tl,a as je,Q as Bl,w as ft,s as Al,x as Il,y as Fl,I as Ut,z as Mt,P as Wt,A as Pt,B as Ol,D as Lt,E as Ml,F as Pl,H as Ll,J as El,K as Rl,G as Et,S as Ge,i as $l,v as Hl,L as rt,g as _e,h as st}from"./injectKeys.0ee73ec6.js";import{c as pe,a as h,h as _,P as Xt,p as Dl,q as Yt,ag as Nl,t as jl,r as O,v as Gt,ah as Kl,D as Ql,ai as Ul,y as Wl,aj as Xl,w as ie,aw as Yl,ap as Gl,ax as Jl,ay as Rt,J as Zl,az as en,b as mt,T as Jt,d as tt,g as Ee,aA as tn,aB as ln,aC as nn,C as Se,aD as on,aE as Zt,aF as gt,aG as el,aH as tl,aI as ll,aJ as an,aK as un,F as rn,B as se,aL as sn,a8 as cn,n as dn,aM as fn,aN as vn,aO as mn,aP as gn,e as he,as as hn,aQ as Sn,aR as $t,aS as He,aT as yn,aU as bn,ab as ct,aV as pn,ao as Oe,aa as wn,aW as kn,f as Me,k as Ht,m as Cn,I as xn,aX as _n,R as ht,o as nl,S as G,a3 as ye,Y as I,Q as Pe,$ as U,a1 as Ve,U as be,aY as Ke,a0 as ol,a5 as Je,a4 as vt,V as D,aZ as al,O as Vn,_ as re,Z as De}from"./index.664d539a.js";const qn=["top","middle","bottom"];var zn=pe({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>qn.includes(e)}},setup(e,{slots:o}){const n=h(()=>e.align!==void 0?{verticalAlign:e.align}:null),u=h(()=>{const S=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(S!==void 0?` text-${S}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>_("div",{class:u.value,style:n.value,role:"status","aria-label":e.label},Xt(o.default,e.label!==void 0?[e.label]:[]))}}),il=pe({name:"QMenu",inheritAttrs:!1,props:{...Kt,...Dl,...Yt,...Nl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:At},self:{type:String,validator:At},offset:{type:Array,validator:_l},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...jl,"click","escapeKey"],setup(e,{slots:o,emit:n,attrs:u}){let S=null,l,w,d;const y=Ee(),{proxy:F}=y,{$q:c}=F,b=O(null),m=O(!1),f=h(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),A=Gt(e,c),{registerTick:k,removeTick:C}=Kl(),{registerTimeout:N}=Ql(),{transitionProps:P,transitionStyle:J}=Ul(e),{localScrollTarget:R,changeScrollEvent:L,unconfigureScrollTarget:Y}=Vl(e,B),{anchorEl:z,canShow:Z}=Qt({showing:m}),{hide:ee}=Wl({showing:m,canShow:Z,handleShow:v,handleHide:r,hideOnRouteChange:f,processOnMount:!0}),{showPortal:ue,hidePortal:te,renderPortal:de}=Xl(y,b,W),x={anchorEl:z,innerRef:b,onClickOutside(a){if(e.persistent!==!0&&m.value===!0)return ee(a),(a.type==="touchstart"||a.target.classList.contains("q-dialog__backdrop"))&&Se(a),!0}},g=h(()=>It(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),T=h(()=>e.cover===!0?g.value:It(e.self||"top start",c.lang.rtl)),K=h(()=>(e.square===!0?" q-menu--square":"")+(A.value===!0?" q-menu--dark q-dark":"")),oe=h(()=>e.autoClose===!0?{onClick:$}:{}),me=h(()=>m.value===!0&&e.persistent!==!0);ie(me,a=>{a===!0?(ln(M),zl(x)):(Rt(M),Ft(x))});function fe(){tn(()=>{let a=b.value;a&&a.contains(document.activeElement)!==!0&&(a=a.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.querySelector("[autofocus], [data-autofocus]")||a,a.focus({preventScroll:!0}))})}function v(a){if(S=e.noRefocus===!1?document.activeElement:null,Yl(Q),ue(),B(),l=void 0,a!==void 0&&(e.touchPosition||e.contextMenu)){const X=Gl(a);if(X.left!==void 0){const{top:ge,left:we}=z.value.getBoundingClientRect();l={left:X.left-we,top:X.top-ge}}}w===void 0&&(w=ie(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,V)),e.noFocus!==!0&&document.activeElement.blur(),k(()=>{V(),e.noFocus!==!0&&fe()}),N(()=>{c.platform.is.ios===!0&&(d=e.autoClose,b.value.click()),V(),ue(!0),n("show",a)},e.transitionDuration)}function r(a){C(),te(),p(!0),S!==null&&(a===void 0||a.qClickOutside!==!0)&&(((a&&a.type.indexOf("key")===0?S.closest('[tabindex]:not([tabindex^="-"])'):void 0)||S).focus(),S=null),N(()=>{te(!0),n("hide",a)},e.transitionDuration)}function p(a){l=void 0,w!==void 0&&(w(),w=void 0),(a===!0||m.value===!0)&&(Jl(Q),Y(),Ft(x),Rt(M)),a!==!0&&(S=null)}function B(){(z.value!==null||e.scrollTarget!==void 0)&&(R.value=Zl(z.value,e.scrollTarget),L(R.value,V))}function $(a){d!==!0?(en(F,a),n("click",a)):d=!1}function Q(a){me.value===!0&&e.noFocus!==!0&&nn(b.value,a.target)!==!0&&fe()}function M(a){n("escapeKey"),ee(a)}function V(){const a=b.value;a===null||z.value===null||ql({el:a,offset:e.offset,anchorEl:z.value,anchorOrigin:g.value,selfOrigin:T.value,absoluteOffset:l,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function W(){return _(Jt,P.value,()=>m.value===!0?_("div",{role:"menu",...u,ref:b,tabindex:-1,class:["q-menu q-position-engine scroll"+K.value,u.class],style:[u.style,J.value],...oe.value},mt(o.default)):null)}return tt(p),Object.assign(F,{focus:fe,updatePosition:V}),de}}),ul=pe({name:"QPopupProxy",props:{...Kt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:o,emit:n,attrs:u}){const{proxy:S}=Ee(),{$q:l}=S,w=O(!1),d=O(null),y=h(()=>parseInt(e.breakpoint,10)),{canShow:F}=Qt({showing:w});function c(){return l.screen.width<y.value||l.screen.height<y.value?"dialog":"menu"}const b=O(c()),m=h(()=>b.value==="menu"?{maxHeight:"99vh"}:{});ie(()=>c(),k=>{w.value!==!0&&(b.value=k)});function f(k){w.value=!0,n("show",k)}function A(k){w.value=!1,b.value=c(),n("hide",k)}return Object.assign(S,{show(k){F(k)===!0&&d.value.show(k)},hide(k){d.value.hide(k)},toggle(k){d.value.toggle(k)}}),on(S,"currentComponent",()=>({type:b.value,ref:d.value})),()=>{const k={ref:d,...m.value,...u,onShow:f,onHide:A};let C;return b.value==="dialog"?C=Zt:(C=il,Object.assign(k,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),_(C,k,o.default)}}}),Tn=pe({name:"QField",inheritAttrs:!1,props:gt,emits:el,setup(){return tl(ll())}});const Bn={xs:8,sm:10,md:14,lg:20,xl:24};var Ze=pe({name:"QChip",props:{...Yt,...an,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:o,emit:n}){const{proxy:{$q:u}}=Ee(),S=Gt(e,u),l=un(e,Bn),w=h(()=>e.selected===!0||e.icon!==void 0),d=h(()=>e.selected===!0?e.iconSelected||u.iconSet.chip.selected:e.icon),y=h(()=>e.iconRemove||u.iconSet.chip.remove),F=h(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=h(()=>{const C=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(C?` text-${C} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(F.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(S.value===!0?" q-chip--dark q-dark":"")}),b=h(()=>{const C=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},N={...C,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||u.lang.label.remove};return{chip:C,remove:N}});function m(C){C.keyCode===13&&f(C)}function f(C){e.disable||(n("update:selected",!e.selected),n("click",C))}function A(C){(C.keyCode===void 0||C.keyCode===13)&&(Se(C),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function k(){const C=[];F.value===!0&&C.push(_("div",{class:"q-focus-helper"})),w.value===!0&&C.push(_(se,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const N=e.label!==void 0?[_("div",{class:"ellipsis"},[e.label])]:void 0;return C.push(_("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},sn(o.default,N))),e.iconRight&&C.push(_(se,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&C.push(_(se,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:y.value,...b.value.remove,onClick:A,onKeyup:A})),C}return()=>{if(e.modelValue===!1)return;const C={class:c.value,style:l.value};return F.value===!0&&Object.assign(C,b.value.chip,{onClick:f,onKeyup:m}),rn("div",C,k(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[cn,e.ripple]])}}});let et=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,et=e.scrollLeft>=0,e.remove()}const ce=1e3,An=["start","center","end","start-force","center-force","end-force"],rl=Array.prototype.filter,In=window.getComputedStyle(document.body).overflowAnchor===void 0?dn:function(e,o){e!==null&&(cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;const n=e.children||[];rl.call(n,S=>S.dataset&&S.dataset.qVsAnchor!==void 0).forEach(S=>{delete S.dataset.qVsAnchor});const u=n[o];u&&u.dataset&&(u.dataset.qVsAnchor="")}))};function Le(e,o){return e+o}function dt(e,o,n,u,S,l,w,d){const y=e===window?document.scrollingElement||document.documentElement:e,F=S===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-w-d,scrollMaxSize:0,offsetStart:-w,offsetEnd:-d};if(S===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=y.scrollLeft,c.scrollViewSize+=y.clientWidth),c.scrollMaxSize=y.scrollWidth,l===!0&&(c.scrollStart=(et===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=y.scrollTop,c.scrollViewSize+=y.clientHeight),c.scrollMaxSize=y.scrollHeight),n!==null)for(let b=n.previousElementSibling;b!==null;b=b.previousElementSibling)b.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=b[F]);if(u!==null)for(let b=u.nextElementSibling;b!==null;b=b.nextElementSibling)b.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=b[F]);if(o!==e){const b=y.getBoundingClientRect(),m=o.getBoundingClientRect();S===!0?(c.offsetStart+=m.left-b.left,c.offsetEnd-=m.width):(c.offsetStart+=m.top-b.top,c.offsetEnd-=m.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function Dt(e,o,n,u){o==="end"&&(o=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(u===!0&&(o=(et===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):n===!0?(u===!0&&(o=(et===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function Ne(e,o,n,u){if(n>=u)return 0;const S=o.length,l=Math.floor(n/ce),w=Math.floor((u-1)/ce)+1;let d=e.slice(l,w).reduce(Le,0);return n%ce!==0&&(d-=o.slice(l*ce,n).reduce(Le,0)),u%ce!==0&&u!==S&&(d-=o.slice(u,w*ce).reduce(Le,0)),d}const Fn={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},On={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Fn};function Mn({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:n,virtualScrollItemSizeComputed:u}){const S=Ee(),{props:l,emit:w,proxy:d}=S,{$q:y}=d;let F,c,b,m=[],f;const A=O(0),k=O(0),C=O({}),N=O(null),P=O(null),J=O(null),R=O({from:0,to:0}),L=h(()=>l.tableColspan!==void 0?l.tableColspan:100);u===void 0&&(u=h(()=>l.virtualScrollItemSize));const Y=h(()=>u.value+";"+l.virtualScrollHorizontal),z=h(()=>Y.value+";"+l.virtualScrollSliceRatioBefore+";"+l.virtualScrollSliceRatioAfter);ie(z,()=>{K()}),ie(Y,Z);function Z(){T(c,!0)}function ee(r){T(r===void 0?c:r)}function ue(r,p){const B=o();if(B==null||B.nodeType===8)return;const $=dt(B,n(),N.value,P.value,l.virtualScrollHorizontal,y.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd);b!==$.scrollViewSize&&K($.scrollViewSize),de(B,$,Math.min(e.value-1,Math.max(0,parseInt(r,10)||0)),0,An.indexOf(p)>-1?p:c>-1&&r>c?"end":"start")}function te(){const r=o();if(r==null||r.nodeType===8)return;const p=dt(r,n(),N.value,P.value,l.virtualScrollHorizontal,y.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd),B=e.value-1,$=p.scrollMaxSize-p.offsetStart-p.offsetEnd-k.value;if(F===p.scrollStart)return;if(p.scrollMaxSize<=0){de(r,p,0,0);return}b!==p.scrollViewSize&&K(p.scrollViewSize),x(R.value.from);const Q=Math.floor(p.scrollMaxSize-Math.max(p.scrollViewSize,p.offsetEnd)-Math.min(f[B],p.scrollViewSize/2));if(Q>0&&Math.ceil(p.scrollStart)>=Q){de(r,p,B,p.scrollMaxSize-p.offsetEnd-m.reduce(Le,0));return}let M=0,V=p.scrollStart-p.offsetStart,W=V;if(V<=$&&V+p.scrollViewSize>=A.value)V-=A.value,M=R.value.from,W=V;else for(let a=0;V>=m[a]&&M<B;a++)V-=m[a],M+=ce;for(;V>0&&M<B;)V-=f[M],V>-p.scrollViewSize?(M++,W=V):W=f[M]+V;de(r,p,M,W)}function de(r,p,B,$,Q){const M=typeof Q=="string"&&Q.indexOf("-force")>-1,V=M===!0?Q.replace("-force",""):Q,W=V!==void 0?V:"start";let a=Math.max(0,B-C.value[W]),X=a+C.value.total;X>e.value&&(X=e.value,a=Math.max(0,X-C.value.total)),F=p.scrollStart;const ge=a!==R.value.from||X!==R.value.to;if(ge===!1&&V===void 0){me(B);return}const{activeElement:we}=document,ve=J.value;ge===!0&&ve!==null&&ve!==we&&ve.contains(we)===!0&&(ve.addEventListener("focusout",g),setTimeout(()=>{ve!==null&&ve.removeEventListener("focusout",g)})),In(ve,B-a);const Qe=V!==void 0?f.slice(a,B).reduce(Le,0):0;if(ge===!0){const ke=X>=R.value.from&&a<=R.value.to?R.value.to:X;R.value={from:a,to:ke},A.value=Ne(m,f,0,a),k.value=Ne(m,f,X,e.value),requestAnimationFrame(()=>{R.value.to!==X&&F===p.scrollStart&&(R.value={from:R.value.from,to:X},k.value=Ne(m,f,X,e.value))})}requestAnimationFrame(()=>{if(F!==p.scrollStart)return;ge===!0&&x(a);const ke=f.slice(a,B).reduce(Le,0),qe=ke+p.offsetStart+A.value,Ue=qe+f[B];let Re=qe+$;if(V!==void 0){const lt=ke-Qe,ne=p.scrollStart+lt;Re=M!==!0&&ne<qe&&Ue<ne+p.scrollViewSize?ne:V==="end"?Ue-p.scrollViewSize:qe-(V==="start"?0:Math.round((p.scrollViewSize-f[B])/2))}F=Re,Dt(r,Re,l.virtualScrollHorizontal,y.lang.rtl),me(B)})}function x(r){const p=J.value;if(p){const B=rl.call(p.children,a=>a.classList&&a.classList.contains("q-virtual-scroll--skip")===!1),$=B.length,Q=l.virtualScrollHorizontal===!0?a=>a.getBoundingClientRect().width:a=>a.offsetHeight;let M=r,V,W;for(let a=0;a<$;){for(V=Q(B[a]),a++;a<$&&B[a].classList.contains("q-virtual-scroll--with-prev")===!0;)V+=Q(B[a]),a++;W=V-f[M],W!==0&&(f[M]+=W,m[Math.floor(M/ce)]+=W),M++}}}function g(){J.value!==null&&J.value!==void 0&&J.value.focus()}function T(r,p){const B=1*u.value;(p===!0||Array.isArray(f)===!1)&&(f=[]);const $=f.length;f.length=e.value;for(let M=e.value-1;M>=$;M--)f[M]=B;const Q=Math.floor((e.value-1)/ce);m=[];for(let M=0;M<=Q;M++){let V=0;const W=Math.min((M+1)*ce,e.value);for(let a=M*ce;a<W;a++)V+=f[a];m.push(V)}c=-1,F=void 0,A.value=Ne(m,f,0,R.value.from),k.value=Ne(m,f,R.value.to,e.value),r>=0?(x(R.value.from),he(()=>{ue(r)})):fe()}function K(r){if(r===void 0&&typeof window!="undefined"){const V=o();V!=null&&V.nodeType!==8&&(r=dt(V,n(),N.value,P.value,l.virtualScrollHorizontal,y.lang.rtl,l.virtualScrollStickySizeStart,l.virtualScrollStickySizeEnd).scrollViewSize)}b=r;const p=parseFloat(l.virtualScrollSliceRatioBefore)||0,B=parseFloat(l.virtualScrollSliceRatioAfter)||0,$=1+p+B,Q=r===void 0||r<=0?1:Math.ceil(r/u.value),M=Math.max(1,Q,Math.ceil((l.virtualScrollSliceSize>0?l.virtualScrollSliceSize:10)/$));C.value={total:Math.ceil(M*$),start:Math.ceil(M*p),center:Math.ceil(M*(.5+p)),end:Math.ceil(M*(1+p)),view:Q}}function oe(r,p){const B=l.virtualScrollHorizontal===!0?"width":"height",$={["--q-virtual-scroll-item-"+B]:u.value+"px"};return[r==="tbody"?_(r,{class:"q-virtual-scroll__padding",key:"before",ref:N},[_("tr",[_("td",{style:{[B]:`${A.value}px`,...$},colspan:L.value})])]):_(r,{class:"q-virtual-scroll__padding",key:"before",ref:N,style:{[B]:`${A.value}px`,...$}}),_(r,{class:"q-virtual-scroll__content",key:"content",ref:J,tabindex:-1},p.flat()),r==="tbody"?_(r,{class:"q-virtual-scroll__padding",key:"after",ref:P},[_("tr",[_("td",{style:{[B]:`${k.value}px`,...$},colspan:L.value})])]):_(r,{class:"q-virtual-scroll__padding",key:"after",ref:P,style:{[B]:`${k.value}px`,...$}})]}function me(r){c!==r&&(l.onVirtualScroll!==void 0&&w("virtualScroll",{index:r,from:R.value.from,to:R.value.to-1,direction:r<c?"decrease":"increase",ref:d}),c=r)}K();const fe=fn(te,y.platform.is.ios===!0?120:35);vn(()=>{K()});let v=!1;return mn(()=>{v=!0}),gn(()=>{if(v!==!0)return;const r=o();F!==void 0&&r!==void 0&&r!==null&&r.nodeType!==8?Dt(r,F,l.virtualScrollHorizontal,y.lang.rtl):ue(c)}),tt(()=>{fe.cancel()}),Object.assign(d,{scrollTo:ue,reset:Z,refresh:ee}),{virtualScrollSliceRange:R,virtualScrollSliceSizeComputed:C,setVirtualScrollSize:K,onVirtualScrollEvt:fe,localResetVirtualScroll:T,padVirtualScroll:oe,scrollTo:ue,reset:Z,refresh:ee}}const Nt=e=>["add","add-unique","toggle"].includes(e),Pn=".*+?^${}()|[]\\",Ln=Object.keys(gt);var En=pe({name:"QSelect",inheritAttrs:!1,props:{...On,...hn,...gt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Nt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...el,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:o,emit:n}){const{proxy:u}=Ee(),{$q:S}=u,l=O(!1),w=O(!1),d=O(-1),y=O(""),F=O(!1),c=O(!1);let b,m,f,A,k,C,N,P,J;const R=O(null),L=O(null),Y=O(null),z=O(null),Z=O(null),ee=Sn(e),ue=pn(Vt),te=h(()=>Array.isArray(e.options)?e.options.length:0),de=h(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:x,virtualScrollSliceSizeComputed:g,localResetVirtualScroll:T,padVirtualScroll:K,onVirtualScrollEvt:oe,scrollTo:me,setVirtualScrollSize:fe}=Mn({virtualScrollLength:te,getVirtualScrollTarget:fl,getVirtualScrollEl:xt,virtualScrollItemSizeComputed:de}),v=ll(),r=h(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,s=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const i=e.mapOptions===!0&&m!==void 0?m:[],q=s.map(H=>dl(H,i));return e.modelValue===null&&t===!0?q.filter(H=>H!==null):q}return s}),p=h(()=>{const t={};return Ln.forEach(s=>{const i=e[s];i!==void 0&&(t[s]=i)}),t}),B=h(()=>e.optionsDark===null?v.isDark.value:e.optionsDark),$=h(()=>$t(r.value)),Q=h(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),M=h(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),V=h(()=>te.value===0),W=h(()=>r.value.map(t=>ae.value(t)).join(", ")),a=h(()=>e.displayValue!==void 0?e.displayValue:W.value),X=h(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ge=h(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(X.value))),we=h(()=>v.focused.value===!0?e.tabindex:-1),ve=h(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":l.value===!0?"true":"false","aria-controls":`${v.targetUid.value}_lb`};return d.value>=0&&(t["aria-activedescendant"]=`${v.targetUid.value}_${d.value}`),t}),Qe=h(()=>({id:`${v.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ke=h(()=>r.value.map((t,s)=>({index:s,opt:t,html:X.value(t),selected:!0,removeAtIndex:cl,toggleOption:Ce,tabindex:we.value}))),qe=h(()=>{if(te.value===0)return[];const{from:t,to:s}=x.value;return e.options.slice(t,s).map((i,q)=>{const H=ze.value(i)===!0,E=t+q,j={clickable:!0,active:!1,activeClass:lt.value,manualFocus:!0,focused:!1,disable:H,tabindex:-1,dense:e.optionsDense,dark:B.value,role:"option",id:`${v.targetUid.value}_${E}`,onClick:()=>{Ce(i)}};return H!==!0&&(at(i)===!0&&(j.active=!0),d.value===E&&(j.focused=!0),j["aria-selected"]=j.active===!0?"true":"false",S.platform.is.desktop===!0&&(j.onMousemove=()=>{l.value===!0&&Te(E)})),{index:E,opt:i,html:X.value(i),label:ae.value(i),selected:j.active,focused:j.focused,toggleOption:Ce,setOptionIndex:Te,itemProps:j}})}),Ue=h(()=>e.dropdownIcon!==void 0?e.dropdownIcon:S.iconSet.arrow.dropdown),Re=h(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),lt=h(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ne=h(()=>ot(e.optionValue,"value")),ae=h(()=>ot(e.optionLabel,"label")),ze=h(()=>ot(e.optionDisable,"disable")),We=h(()=>r.value.map(t=>ne.value(t))),sl=h(()=>{const t={onInput:Vt,onChange:ue,onKeydown:Ct,onKeyup:wt,onKeypress:kt,onFocus:bt,onClick(s){f===!0&&Oe(s)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ue,t});ie(r,t=>{m=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&v.innerLoading.value!==!0&&(w.value!==!0&&l.value!==!0||$.value!==!0)&&(A!==!0&&Fe(),(w.value===!0||l.value===!0)&&Be(""))},{immediate:!0}),ie(()=>e.fillInput,Fe),ie(l,it),ie(te,xl);function St(t){return e.emitValue===!0?ne.value(t):t}function nt(t){if(t>-1&&t<r.value.length)if(e.multiple===!0){const s=e.modelValue.slice();n("remove",{index:t,value:s.splice(t,1)[0]}),n("update:modelValue",s)}else n("update:modelValue",null)}function cl(t){nt(t),v.focus()}function yt(t,s){const i=St(t);if(e.multiple!==!0){e.fillInput===!0&&$e(ae.value(t),!0,!0),n("update:modelValue",i);return}if(r.value.length===0){n("add",{index:0,value:i}),n("update:modelValue",e.multiple===!0?[i]:i);return}if(s===!0&&at(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const q=e.modelValue.slice();n("add",{index:q.length,value:i}),q.push(i),n("update:modelValue",q)}function Ce(t,s){if(v.editable.value!==!0||t===void 0||ze.value(t)===!0)return;const i=ne.value(t);if(e.multiple!==!0){s!==!0&&($e(e.fillInput===!0?ae.value(t):"",!0,!0),xe()),L.value!==null&&L.value.focus(),(r.value.length===0||He(ne.value(r.value[0]),i)!==!0)&&n("update:modelValue",e.emitValue===!0?i:t);return}if((f!==!0||F.value===!0)&&v.focus(),bt(),r.value.length===0){const E=e.emitValue===!0?i:t;n("add",{index:0,value:E}),n("update:modelValue",e.multiple===!0?[E]:E);return}const q=e.modelValue.slice(),H=We.value.findIndex(E=>He(E,i));if(H>-1)n("remove",{index:H,value:q.splice(H,1)[0]});else{if(e.maxValues!==void 0&&q.length>=e.maxValues)return;const E=e.emitValue===!0?i:t;n("add",{index:q.length,value:E}),q.push(E)}n("update:modelValue",q)}function Te(t){if(S.platform.is.desktop!==!0)return;const s=t>-1&&t<te.value?t:-1;d.value!==s&&(d.value=s)}function Xe(t=1,s){if(l.value===!0){let i=d.value;do i=Ot(i+t,-1,te.value-1);while(i!==-1&&i!==d.value&&ze.value(e.options[i])===!0);d.value!==i&&(Te(i),me(i),s!==!0&&e.useInput===!0&&e.fillInput===!0&&Ye(i>=0?ae.value(e.options[i]):C))}}function dl(t,s){const i=q=>He(ne.value(q),t);return e.options.find(i)||s.find(i)||t}function ot(t,s){const i=t!==void 0?t:s;return typeof i=="function"?i:q=>q!==null&&typeof q=="object"&&i in q?q[i]:q}function at(t){const s=ne.value(t);return We.value.find(i=>He(i,s))!==void 0}function bt(t){e.useInput===!0&&L.value!==null&&(t===void 0||L.value===t.target&&t.target.value===W.value)&&L.value.select()}function pt(t){wn(t,27)===!0&&l.value===!0&&(Oe(t),xe(),Fe()),n("keyup",t)}function wt(t){const{value:s}=t.target;if(t.keyCode!==void 0){pt(t);return}if(t.target.value="",clearTimeout(b),Fe(),typeof s=="string"&&s.length>0){const i=s.toLocaleLowerCase(),q=E=>{const j=e.options.find(le=>E.value(le).toLocaleLowerCase()===i);return j===void 0?!1:(r.value.indexOf(j)===-1?Ce(j):xe(),!0)},H=E=>{q(ne)!==!0&&(q(ae)===!0||E===!0||Be(s,!0,()=>H(!0)))};H()}else v.clearValue(t)}function kt(t){n("keypress",t)}function Ct(t){if(n("keydown",t),kn(t)===!0)return;const s=y.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),i=t.shiftKey!==!0&&e.multiple!==!0&&(d.value>-1||s===!0);if(t.keyCode===27){ct(t);return}if(t.keyCode===9&&i===!1){Ae();return}if(t.target===void 0||t.target.id!==v.targetUid.value)return;if(t.keyCode===40&&v.innerLoading.value!==!0&&l.value===!1){Se(t),Ie();return}if(t.keyCode===8&&e.hideSelected!==!0&&y.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?nt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof y.value!="string"||y.value.length===0)&&(Se(t),d.value=-1,Xe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&g.value!==void 0&&(Se(t),d.value=Math.max(-1,Math.min(te.value,d.value+(t.keyCode===33?-1:1)*g.value.view)),Xe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Se(t),Xe(t.keyCode===38?-1:1,e.multiple));const q=te.value;if((P===void 0||J<Date.now())&&(P=""),q>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||P.length>0)){l.value!==!0&&Ie(t);const H=t.key.toLocaleLowerCase(),E=P.length===1&&P[0]===H;J=Date.now()+1500,E===!1&&(Se(t),P+=H);const j=new RegExp("^"+P.split("").map(ut=>Pn.indexOf(ut)>-1?"\\"+ut:ut).join(".*"),"i");let le=d.value;if(E===!0||le<0||j.test(ae.value(e.options[le]))!==!0)do le=Ot(le+1,-1,q-1);while(le!==d.value&&(ze.value(e.options[le])===!0||j.test(ae.value(e.options[le]))!==!0));d.value!==le&&he(()=>{Te(le),me(le),le>=0&&e.useInput===!0&&e.fillInput===!0&&Ye(ae.value(e.options[le]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||P!=="")&&(t.keyCode!==9||i===!1))){if(t.keyCode!==9&&Se(t),d.value>-1&&d.value<q){Ce(e.options[d.value]);return}if(s===!0){const H=(E,j)=>{if(j){if(Nt(j)!==!0)return}else j=e.newValueMode;if(E==null)return;$e("",e.multiple!==!0,!0),(j==="toggle"?Ce:yt)(E,j==="add-unique"),e.multiple!==!0&&(L.value!==null&&L.value.focus(),xe())};if(e.onNewValue!==void 0?n("newValue",y.value,H):H(y.value),e.multiple!==!0)return}l.value===!0?Ae():v.innerLoading.value!==!0&&Ie()}}function xt(){return f===!0?Z.value:Y.value!==null&&Y.value.contentEl!==null?Y.value.contentEl:void 0}function fl(){return xt()}function vl(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?ke.value.map(t=>o["selected-item"](t)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?ke.value.map((t,s)=>_(Ze,{key:"option-"+s,removable:v.editable.value===!0&&ze.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:we.value,onRemove(){t.removeAtIndex(s)}},()=>_("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ae.value(t.opt)}))):[_("span",{[ge.value===!0?"innerHTML":"textContent"]:a.value})]}function _t(){if(V.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:y.value}):void 0;const t=o.option!==void 0?o.option:i=>_(Bl,{key:i.index,...i.itemProps},()=>_(Tl,()=>_(je,()=>_("span",{[i.html===!0?"innerHTML":"textContent"]:i.label}))));let s=K("div",qe.value.map(t));return o["before-options"]!==void 0&&(s=o["before-options"]().concat(s)),Xt(o["after-options"],s)}function ml(t,s){const i=s===!0?{...ve.value,...v.splitAttrs.attributes.value}:void 0,q={ref:s===!0?L:void 0,key:"i_t",class:Q.value,style:e.inputStyle,value:y.value!==void 0?y.value:"",type:"search",...i,id:s===!0?v.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...sl.value};return t!==!0&&f===!0&&(Array.isArray(q.class)===!0?q.class=[...q.class,"no-pointer-events"]:q.class+=" no-pointer-events"),_("input",q)}function Vt(t){clearTimeout(b),!(t&&t.target&&t.target.qComposing===!0)&&(Ye(t.target.value||""),A=!0,C=y.value,v.focused.value!==!0&&(f!==!0||F.value===!0)&&v.focus(),e.onFilter!==void 0&&(b=setTimeout(()=>{Be(y.value)},e.inputDebounce)))}function Ye(t){y.value!==t&&(y.value=t,n("inputValue",t))}function $e(t,s,i){A=i!==!0,e.useInput===!0&&(Ye(t),(s===!0||i!==!0)&&(C=t),s!==!0&&Be(t))}function Be(t,s,i){if(e.onFilter===void 0||s!==!0&&v.focused.value!==!0)return;v.innerLoading.value===!0?n("filterAbort"):(v.innerLoading.value=!0,c.value=!0),t!==""&&e.multiple!==!0&&r.value.length>0&&A!==!0&&t===ae.value(r.value[0])&&(t="");const q=setTimeout(()=>{l.value===!0&&(l.value=!1)},10);clearTimeout(k),k=q,n("filter",t,(H,E)=>{(s===!0||v.focused.value===!0)&&k===q&&(clearTimeout(k),typeof H=="function"&&H(),c.value=!1,he(()=>{v.innerLoading.value=!1,v.editable.value===!0&&(s===!0?l.value===!0&&xe():l.value===!0?it(!0):l.value=!0),typeof E=="function"&&he(()=>{E(u)}),typeof i=="function"&&he(()=>{i(u)})}))},()=>{v.focused.value===!0&&k===q&&(clearTimeout(k),v.innerLoading.value=!1,c.value=!1),l.value===!0&&(l.value=!1)})}function gl(){return _(il,{ref:Y,class:M.value,style:e.popupContentStyle,modelValue:l.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&V.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:B.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Re.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Qe.value,onScrollPassive:oe,onBeforeShow:zt,onBeforeHide:hl,onShow:Sl},_t)}function hl(t){Tt(t),Ae()}function Sl(){fe()}function yl(t){Oe(t),L.value!==null&&L.value.focus(),F.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function bl(t){Oe(t),he(()=>{F.value=!1})}function pl(){const t=[_(Tn,{class:`col-auto ${v.fieldClass.value}`,...p.value,for:v.targetUid.value,dark:B.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:y.value.length>0,...v.splitAttrs.listeners.value,onFocus:yl,onBlur:bl},{...o,rawControl:()=>v.getControl(!0),before:void 0,after:void 0})];return l.value===!0&&t.push(_("div",{ref:Z,class:M.value+" scroll",style:e.popupContentStyle,...Qe.value,onClick:ct,onScrollPassive:oe},_t())),_(Zt,{ref:z,modelValue:w.value,position:e.useInput===!0?"top":void 0,transitionShow:N,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:zt,onBeforeHide:wl,onHide:kl,onShow:Cl},()=>_("div",{class:"q-select__dialog"+(B.value===!0?" q-select__dialog--dark q-dark":"")+(F.value===!0?" q-select__dialog--focused":"")},t))}function wl(t){Tt(t),z.value!==null&&z.value.__updateRefocusTarget(v.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),v.focused.value=!1}function kl(t){xe(),v.focused.value===!1&&n("blur",t),Fe()}function Cl(){const t=document.activeElement;(t===null||t.id!==v.targetUid.value)&&L.value!==null&&L.value!==t&&L.value.focus(),fe()}function Ae(){w.value!==!0&&(d.value=-1,l.value===!0&&(l.value=!1),v.focused.value===!1&&(clearTimeout(k),k=void 0,v.innerLoading.value===!0&&(n("filterAbort"),v.innerLoading.value=!1,c.value=!1)))}function Ie(t){v.editable.value===!0&&(f===!0?(v.onControlFocusin(t),w.value=!0,he(()=>{v.focus()})):v.focus(),e.onFilter!==void 0?Be(y.value):(V.value!==!0||o["no-option"]!==void 0)&&(l.value=!0))}function xe(){w.value=!1,Ae()}function Fe(){e.useInput===!0&&$e(e.multiple!==!0&&e.fillInput===!0&&r.value.length>0&&ae.value(r.value[0])||"",!0,!0)}function it(t){let s=-1;if(t===!0){if(r.value.length>0){const i=ne.value(r.value[0]);s=e.options.findIndex(q=>He(ne.value(q),i))}T(s)}Te(s)}function xl(t,s){l.value===!0&&v.innerLoading.value===!1&&(T(-1,!0),he(()=>{l.value===!0&&v.innerLoading.value===!1&&(t>s?T():it(!0))}))}function qt(){w.value===!1&&Y.value!==null&&Y.value.updatePosition()}function zt(t){t!==void 0&&Oe(t),n("popupShow",t),v.hasPopupOpen=!0,v.onControlFocusin(t)}function Tt(t){t!==void 0&&Oe(t),n("popupHide",t),v.hasPopupOpen=!1,v.onControlFocusout(t)}function Bt(){f=S.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||V.value===!1:!0),N=S.platform.is.ios===!0&&f===!0&&e.useInput===!0?"fade":e.transitionShow}return yn(Bt),bn(qt),Bt(),tt(()=>{clearTimeout(b)}),Object.assign(u,{showPopup:Ie,hidePopup:xe,removeAtIndex:nt,add:yt,toggleOption:Ce,getOptionIndex:()=>d.value,setOptionIndex:Te,moveOptionSelection:Xe,filter:Be,updateMenuPosition:qt,updateInputValue:$e,isOptionSelected:at,getEmittingOptionValue:St,isOptionDisabled:(...t)=>ze.value.apply(null,t)===!0,getOptionValue:(...t)=>ne.value.apply(null,t),getOptionLabel:(...t)=>ae.value.apply(null,t)}),Object.assign(v,{innerValue:r,fieldClass:h(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:R,targetRef:L,hasValue:$,showPopup:Ie,floatingLabel:h(()=>e.hideSelected!==!0&&$.value===!0||typeof y.value=="number"||y.value.length>0||$t(e.displayValue)),getControlChild:()=>{if(v.editable.value!==!1&&(w.value===!0||V.value!==!0||o["no-option"]!==void 0))return f===!0?pl():gl();v.hasPopupOpen===!0&&(v.hasPopupOpen=!1)},controlEvents:{onFocusin(t){v.onControlFocusin(t)},onFocusout(t){v.onControlFocusout(t,()=>{Fe(),Ae()})},onClick(t){if(ct(t),f!==!0&&l.value===!0){Ae(),L.value!==null&&L.value.focus();return}Ie(t)}},getControl:t=>{const s=vl(),i=t===!0||w.value!==!0||f!==!0;if(e.useInput===!0)s.push(ml(t,i));else if(v.editable.value===!0){const H=i===!0?ve.value:void 0;s.push(_("input",{ref:i===!0?L:void 0,key:"d_t",class:"q-select__focus-target",id:i===!0?v.targetUid.value:void 0,value:a.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...H,onKeydown:Ct,onKeyup:pt,onKeypress:kt})),i===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&s.push(_("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:wt}))}if(ee.value!==void 0&&e.disable!==!0&&We.value.length>0){const H=We.value.map(E=>_("option",{value:E,selected:!0}));s.push(_("select",{class:"hidden",name:ee.value,multiple:e.multiple},H))}const q=e.useInput===!0||i!==!0?void 0:v.splitAttrs.attributes.value;return _("div",{class:"q-field__native row items-center",...q},s)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[_(se,{class:"q-select__dropdown-icon"+(l.value===!0?" rotate-180":""),name:Ue.value})]:null}),tl(v)}}),Rn=pe({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:o}){const{proxy:{$q:n}}=Ee(),u=Ht(Cn,Me);if(u===Me)return console.error("QPage needs to be a deep child of QLayout"),Me;if(Ht(xn,Me)===Me)return console.error("QPage needs to be child of QPageContainer"),Me;const l=h(()=>{const d=(u.header.space===!0?u.header.size:0)+(u.footer.space===!0?u.footer.size:0);if(typeof e.styleFn=="function"){const y=u.isContainer.value===!0?u.containerHeight.value:n.screen.height;return e.styleFn(d,y)}return{minHeight:u.isContainer.value===!0?u.containerHeight.value-d+"px":n.screen.height===0?d!==0?`calc(100vh - ${d}px)`:"100vh":n.screen.height-d+"px"}}),w=h(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>_("main",{class:w.value,style:l.value},mt(o.default))}});const $n={ratio:[String,Number]};function Hn(e,o){return h(()=>{const n=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}const Dn=16/9;var jt=pe({name:"QImg",props:{...$n,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Dn},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:n}){const u=O(e.initialRatio),S=Hn(e,u);let l;const w=[O(null),O(k())],d=O(0),y=O(!1),F=O(!1),c=h(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),b=h(()=>({width:e.width,height:e.height})),m=h(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),f=h(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));ie(()=>A(),C);function A(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function k(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function C(z){clearTimeout(l),F.value=!1,z===null?(y.value=!1,w[d.value^1].value=k()):y.value=!0,w[d.value].value=z}function N({target:z}){l!==null&&(clearTimeout(l),u.value=z.naturalHeight===0?.5:z.naturalWidth/z.naturalHeight,P(z,1))}function P(z,Z){l===null||Z===1e3||(z.complete===!0?J(z):l=setTimeout(()=>{P(z,Z+1)},50))}function J(z){l!==null&&(d.value=d.value^1,w[d.value].value=null,y.value=!1,F.value=!1,n("load",z.currentSrc||z.src))}function R(z){clearTimeout(l),y.value=!1,F.value=!0,w[d.value].value=null,w[d.value^1].value=k(),n("error",z)}function L(z){const Z=w[z].value,ee={key:"img_"+z,class:m.value,style:f.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...Z};return d.value===z?(ee.class+=" q-img__image--waiting",Object.assign(ee,{onLoad:N,onError:R})):ee.class+=" q-img__image--loaded",_("div",{class:"q-img__container absolute-full",key:"img"+z},_("img",ee))}function Y(){return y.value!==!0?_("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},mt(o[F.value===!0?"error":"default"])):_("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[_(_n,{color:e.spinnerColor,size:e.spinnerSize})])}return C(A()),tt(()=>{clearTimeout(l),l=null}),()=>{const z=[];return S.value!==null&&z.push(_("div",{key:"filler",style:S.value})),F.value!==!0&&(w[0].value!==null&&z.push(L(0)),w[1].value!==null&&z.push(L(1))),z.push(_(Jt,{name:"q-transition--fade"},Y)),_("div",{class:c.value,style:b.value,role:"img","aria-label":e.alt},z)}}});const Nn={class:"row"},jn={class:"column q-pa-sm col-1",style:{"min-height":"50px"}},Kn={class:"column col-9"},Qn={class:"row"},Un={class:"row"},Wn={class:"col-sm-12"},Xn={class:"ellipsis-3-lines text-body2",style:{"font-size":"1em"}},Yn={style:{"font-size":"26pt"}},Gn=["href"],Jn={class:"row col-1"},Zn={class:"col-10"},eo={class:"col-1"},to=ht({__name:"Comment",props:{comment:null},setup(e){const o=e;let n=ft(Al);const u=O([]),S=O(y()),l=O([]);nl(()=>{c(),w()});function w(){var A,k,C,N;let m=o.comment.text.matchAll(Il);for(const P of m)((A=P.groups)==null?void 0:A.gifid)&&((k=P.groups)==null?void 0:k.type)&&l.value.push({type:(C=P.groups)==null?void 0:C.type,id:(N=P.groups)==null?void 0:N.gifid,match:P[0]});let f=o.comment.text.matchAll(Fl);for(const P of f)l.value.push({type:"prev",id:"",match:P[0]})}function d(m){if(m.type=="giphy")return`https://i.giphy.com/media/${m.id}/giphy.webp`;if(m.type==="prev")return m.match}function y(){var m,f;return(f=(m=n==null?void 0:n.find(A=>A.community===o.comment.community))==null?void 0:m.imgIconUrl)!=null?f:""}function F(m){return m.includes("|")?m.substring(m.indexOf("|")+1,m.lastIndexOf("|")):""}function c(){let m=Ut(o.comment)?o.comment.text.toLocaleLowerCase().matchAll(Mt):o.comment.text.matchAll(Mt),f=[];for(const A of m){let k=A[0].replace("$","");!Ol.includes(k)&&!f.includes(k)&&f.length<6&&f.push(k)}u.value=f}function b(m){window.open("https://www.marketwatch.com/investing/stock/"+m)}return(m,f)=>(G(),ye(Je,null,[I(Pe),U("div",Nn,[U("div",jn,[I(jt,{fit:"scale-down",src:S.value,"spinner-color":"teal",style:{"max-width":"48px","min-width":"25px"}},null,8,["src"])]),U("div",Kn,[U("div",Qn,[I(Ze,{square:"",dense:"",clickable:"",style:{"font-size":"10pt"},label:Ve(Wt)(o.comment.userName),onClick:f[0]||(f[0]=A=>Ve(Pt)(o.comment.commentURL))},null,8,["label"]),o.comment.userName.includes("|")?(G(),be(Ze,{key:0,style:{"font-size":"10pt"},color:"primary",dense:"",label:F(o.comment.userName)},null,8,["label"])):Ke("",!0)]),U("div",Un,[U("div",Wn,[U("div",Xn,ol(o.comment.text),1),U("div",Yn,[(G(!0),ye(Je,null,vt(l.value,A=>(G(),be(se,{clickable:"",class:"cursor-pointer",name:A.type=="giphy"?"gif":"image"},{default:D(()=>[I(ul,{"transition-show":"flip-up","transition-hide":"flip-down"},{default:D(()=>[I(al,{style:{"min-height":"180px","min-width":"250px",overflow:"hidden"}},{default:D(()=>[U("a",{href:d(A),target:"_blank"},[I(jt,{style:{"max-height":"280px","max-width":"350px"},loading:"lazy",src:d(A)},null,8,["src"])],8,Gn)]),_:2},1024)]),_:2},1024)]),_:2},1032,["name"]))),256))])])])]),U("div",Jn,[(G(!0),ye(Je,null,vt(u.value,A=>(G(),ye("div",Zn,[I(Ze,{clickable:"",color:"teal",label:A,onClick:k=>b(A),dense:""},null,8,["label","onClick"])]))),256)),U("div",eo,[o.comment.linkURL?(G(),be(se,{key:0,size:"20pt",class:"cursor-pointer",color:"teal",name:"link",onClick:f[1]||(f[1]=A=>Ve(Pt)(o.comment.linkURL))})):Ke("",!0)])])])],64))}}),lo={class:"q-pa-md"},no=ht({__name:"DisplayList",props:{displayList:null},setup(e){const o=e;return(n,u)=>(G(),ye("div",lo,[e.displayList.length>0?(G(),be(Pe,{key:0})):Ke("",!0),(G(!0),ye(Je,null,vt(o.displayList,S=>(G(),be(to,{comment:S,key:S.id},null,8,["comment"]))),128)),e.displayList.length>0?(G(),be(Pe,{key:1})):Ke("",!0)]))}}),oo={class:"row justify-start q-pb-lg"},ao={key:0,class:"col-lg-2 col-md-3 col-sm-5 col-xs-5 text-center"},io={key:1,class:"col-lg-2 col-md-3 col-sm-5 col-xs-5 text-center",style:{"font-size":"28pt"}},uo={class:"col-*",style:{"border-left":"solid white 1pt"}},ro={class:"row justify-between q-py-sm"},so={class:"col-5"},co={class:"col-5 text-right"},fo={class:"col"},vo={class:"row"},mo={class:"col-sm-*"},go={class:"col-sm-*"},yo=ht({__name:"CommentController",setup(e){const o=O(!1),n=window.speechSynthesis;let u=O();const S=O(),l=O(de());let w=!1,d=O(!0),y=new Date().getTime();n.onvoiceschanged=function(){u.value=n.getVoices()};let F;const c=ft($l),b=ft(Hl),m=O([]);let f;window.Worker&&(console.log("setting up worker"),f=new Worker("/assets/webworker.dcff6a21.js"),f.onmessage=k),nl(async()=>{n.getVoices().length>0&&(u.value=n.getVoices()),A(),console.log("mounting comment controller done")}),Vn(()=>{clearInterval(F),window.Worker&&f.postMessage({type:"pull",action:"stop"})});async function A(){if(!window.Worker)console.error("Web workers not possible in this environment! will not say anything, there may be delays!"),d.value=!1,F=setInterval(()=>{P(),new Date().getSeconds()%30},500);else{let x={type:"pull",action:"start"};console.log("posting to worker:",x),f.postMessage(x)}}function k(x){x.data.type==="pull"&&P(),x.data.type==="checkLong"&&R()}function C(){l.value={...rt}}function N(x){return o.value&&b.muteBots&&!Ut(x)}function P(){if(w)return;let x=c.pullOne();if(!!x&&(m.value.unshift(x),m.value.length>b.postsToDisplay&&(m.value=m.value.slice(0,b.postsToDisplay)),N(x))){if(S.value===void 0)return;let T=Z(x);var g=new SpeechSynthesisUtterance(T.substring(0,1e3));g.voice=S.value,g.lang=S.value.lang,g.rate=l.value.rate,g.volume=l.value.volume,g.pitch=l.value.pitch,w=!0;try{Lt("Starting speak..."),J(g)}catch{w=!1}}}function J(x){x.onend=()=>{L()},x.onerror=()=>{console.error("Error saying speech!"),L()},y=new Date().getTime(),n.speak(x),f.postMessage({type:"checkLong",action:"start"})}function R(){z()?Y():!Ml()&&!Pl()&&(n.pause(),n.resume())}function L(){w=!1,f.postMessage({type:"checkLong",action:"stop"})}function Y(){n.cancel(),L()}function z(){if(w){var x=new Date().getTime()-y;return x/1e3>Ll}else return!1}function Z(x){let g=x.speech;return El(x.text)&&(g=" wordle result "),Rl(b.muteEmojiSpam,x.speech)&&(g=" emoji spam "),b.sayUsernames&&(g=`${Wt(x.userName)} - ${x.speech}`),g}function ee(){o.value=!1,Y()}function ue(){c.backlog.value.length>5&&c.clearBacklog()}ie(u,(x,g)=>{console.log("synth voices loaded",u),te()});function te(){if(!u.value){console.error("Tried selecting stored voice but allvoices len = 0");return}let x="voicepref",g=Et(x);if(!g||g==="undefined"){console.log("coudn't find stored voice, saving new one");let T=u.value.find(oe=>oe.name.includes("UK")),K=u.value.find(oe=>oe.default==!0);S.value=T||K||u.value[0],Ge(x,S.value.name)}else{console.log(`attempting to find ${g} in allvoices:`,u.value);let T=u.value.find(K=>K.name===g);console.log("loading voice from storage "+(T==null?void 0:T.name)),S.value=T!=null?T:u.value[0]}}function de(){let x={...rt};for(const[g,T]of Object.entries(x)){const K=g;let oe=Et(`check_${g}`);oe===null&&Ge(`check_${g}`,rt[K]),x[K]=oe}return x}return ie(l,x=>{for(const[g,T]of Object.entries(l.value)){const K=g;Ge(`check_${g}`,l.value[K])}},{deep:!0}),ie(S,x=>{var g,T;x!=null&&x!=null&&Ge("voicepref",(T=(g=S.value)==null?void 0:g.name)!=null?T:"null")}),(x,g)=>(G(),be(Rn,{class:"items-start justify-start",padding:""},{default:D(()=>[U("div",oo,[o.value?(G(),ye("div",io,[I(De,{dense:"",icon:"remove_from_queue",style:{"font-size":"14pt"},onClick:ue},{default:D(()=>[I(zn,{floating:"",color:"teal"},{default:D(()=>[re(ol(Ve(c).backlog.value.length),1)]),_:1}),I(_e,null,{default:D(()=>[re(" Trim Backlog ")]),_:1})]),_:1}),I(De,{dense:"",onClick:ee},{default:D(()=>[I(_e,null,{default:D(()=>[re(" Stop Speaking ")]),_:1}),I(se,{class:"q-px-md text-red-4",name:"stop",size:"26pt"})]),_:1}),I(De,{dense:"",onClick:g[1]||(g[1]=T=>Y())},{default:D(()=>[I(_e,null,{default:D(()=>[re(" Skip ")]),_:1}),I(se,{class:"q-px-md",name:"fast_forward",size:"26pt"})]),_:1})])):(G(),ye("div",ao,[I(De,{onClick:g[0]||(g[0]=T=>o.value=!0)},{default:D(()=>[I(_e,null,{default:D(()=>[re(" Start Speaking ")]),_:1}),I(se,{name:"record_voice_over",size:"26pt"})]),_:1})])),U("div",uo,[I(se,{clickable:"",class:"cursor-pointer q-pa-sm",name:"tune",style:{"font-size":"26pt"}},{default:D(()=>[I(_e,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:D(()=>[re(" Speech Settings ")]),_:1}),I(ul,{"transition-show":"jump-up","transition-hide":"flip-down"},{default:D(()=>[I(al,{class:"q-pa-md",style:{"min-height":"180px","min-width":"350px",overflow:"hidden"}},{default:D(()=>[U("div",ro,[U("div",so,[I(je,null,{default:D(()=>[re("Speech Tuning")]),_:1})]),U("div",co,[I(De,{dense:"",outline:"",size:"8pt",color:"teal",onClick:C},{default:D(()=>[I(_e,null,{default:D(()=>[re(" Reset To Default ")]),_:1}),I(se,{name:"refresh"})]),_:1})])]),I(Pe),I(je,null,{default:D(()=>[re(" Volume ")]),_:1}),I(st,{modelValue:l.value.volume,"onUpdate:modelValue":g[2]||(g[2]=T=>l.value.volume=T),min:.1,max:1,step:.1,snap:"",label:"",color:"teal",onChange:g[3]||(g[3]=T=>{Ve(Lt)("updating volume to "+T),l.value.volume=T})},null,8,["modelValue"]),I(Pe),I(je,null,{default:D(()=>[re(" pitch ")]),_:1}),I(st,{modelValue:l.value.pitch,"onUpdate:modelValue":g[4]||(g[4]=T=>l.value.pitch=T),min:0,max:2,step:.2,snap:"",label:"",color:"teal",onChange:g[5]||(g[5]=T=>l.value.pitch=T)},null,8,["modelValue"]),I(Pe),I(je,null,{default:D(()=>[re(" rate ")]),_:1}),I(st,{modelValue:l.value.rate,"onUpdate:modelValue":g[6]||(g[6]=T=>l.value.rate=T),min:.5,max:3,step:.1,snap:"",label:"",color:"teal",onChange:g[7]||(g[7]=T=>l.value.rate=T)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),U("div",fo,[U("div",vo,[U("div",mo,[I(En,{modelValue:S.value,"onUpdate:modelValue":g[8]||(g[8]=T=>S.value=T),options:Ve(u),label:"Selected Voice","option-value":"name","option-label":"name",style:{"min-width":"250px","max-width":"400px"},filled:"","options-selected-class":"text-white bg-teal",labelColor:"white",dense:""},null,8,["modelValue","options"])]),U("div",go,[Ve(d)?Ke("",!0):(G(),be(se,{key:0,name:"warning_amber",color:"amber",size:"24pt",class:"q-pa-sm"},{default:D(()=>[I(_e,null,{default:D(()=>[re(" Environment doesn't support Web Workers - Javascript throttling likely. Expect slowdowns. ")]),_:1})]),_:1}))])])])]),I(no,{displayList:m.value},null,8,["displayList"])]),_:1}))}});export{yo as default};
