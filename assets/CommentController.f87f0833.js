import{u as Qt,k as Mt,l as _l,m as Vl,n as Ut,p as Ft,r as Ot,o as ql,q as zl,t as $t,b as Al,a as We,Q as Tl,w as Bl,x as vt,s as Il,y as Ml,z as Fl,I as mt,A as Et,B as Lt,E as Ol,D as rt,F as $l,H as El,J as Ll,e as Pt,S as Ze,i as Pl,v as Rl,K as st,g as xe,h as ct}from"./injectKeys.e78a2611.js";import{c as pe,a as S,h as C,P as Xt,p as Hl,q as Yt,ah as Dl,t as jl,r as M,v as Zt,ai as Wl,D as Nl,aj as Kl,y as Ql,ak as Ul,w as ie,ax as Xl,aq as Yl,ay as Zl,az as Rt,J as Gl,aA as Jl,b as ht,T as Gt,d as tt,g as Le,aB as en,aC as tn,aD as ln,C as he,aE as nn,aF as Jt,aG as St,aH as el,aI as tl,aJ as ll,aK as on,aL as an,F as un,B as se,aM as rn,a9 as sn,n as cn,aN as dn,aO as fn,aP as vn,aQ as mn,e as ge,at as gn,aR as hn,aS as Ht,aT as He,aU as Sn,aV as yn,ac as dt,aW as pn,ap as Me,ab as bn,aX as wn,f as Fe,k as Dt,m as kn,I as Cn,aY as xn,R as yt,o as nl,S as G,a4 as Se,Y as B,Q as $e,$ as K,a1 as Oe,U as ye,a3 as Ne,a0 as ol,a6 as Ge,a5 as gt,V as D,aZ as al,O as _n,_ as re,Z as De}from"./index.11a0eead.js";const Vn=["top","middle","bottom"];var qn=pe({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Vn.includes(e)}},setup(e,{slots:o}){const l=S(()=>e.align!==void 0?{verticalAlign:e.align}:null),a=S(()=>{const h=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(h!==void 0?` text-${h}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>C("div",{class:a.value,style:l.value,role:"status","aria-label":e.label},Xt(o.default,e.label!==void 0?[e.label]:[]))}}),il=pe({name:"QMenu",inheritAttrs:!1,props:{...Qt,...Hl,...Yt,...Dl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Mt},self:{type:String,validator:Mt},offset:{type:Array,validator:_l},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...jl,"click","escapeKey"],setup(e,{slots:o,emit:l,attrs:a}){let h=null,n,g,s;const b=Le(),{proxy:I}=b,{$q:d}=I,v=M(null),y=M(!1),f=S(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),O=Zt(e,d),{registerTick:x,removeTick:k}=Wl(),{registerTimeout:L}=Nl(),{transitionProps:j,transitionStyle:J}=Kl(e),{localScrollTarget:P,changeScrollEvent:$,unconfigureScrollTarget:Z}=Vl(e,A),{anchorEl:q,canShow:ee}=Ut({showing:y}),{hide:te}=Ql({showing:y,canShow:ee,handleShow:m,handleHide:r,hideOnRouteChange:f,processOnMount:!0}),{showPortal:ue,hidePortal:le,renderPortal:z}=Ul(b,v,X),p={anchorEl:q,innerRef:v,onClickOutside(i){if(e.persistent!==!0&&y.value===!0)return te(i),(i.type==="touchstart"||i.target.classList.contains("q-dialog__backdrop"))&&he(i),!0}},T=S(()=>Ft(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),Q=S(()=>e.cover===!0?T.value:Ft(e.self||"top start",d.lang.rtl)),U=S(()=>(e.square===!0?" q-menu--square":"")+(O.value===!0?" q-menu--dark q-dark":"")),_e=S(()=>e.autoClose===!0?{onClick:R}:{}),ve=S(()=>y.value===!0&&e.persistent!==!0);ie(ve,i=>{i===!0?(tn(F),zl(p)):(Rt(F),Ot(p))});function de(){en(()=>{let i=v.value;i&&i.contains(document.activeElement)!==!0&&(i=i.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.querySelector("[autofocus], [data-autofocus]")||i,i.focus({preventScroll:!0}))})}function m(i){if(h=e.noRefocus===!1?document.activeElement:null,Xl(N),ue(),A(),n=void 0,i!==void 0&&(e.touchPosition||e.contextMenu)){const Y=Yl(i);if(Y.left!==void 0){const{top:me,left:be}=q.value.getBoundingClientRect();n={left:Y.left-be,top:Y.top-me}}}g===void 0&&(g=ie(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,_)),e.noFocus!==!0&&document.activeElement.blur(),x(()=>{_(),e.noFocus!==!0&&de()}),L(()=>{d.platform.is.ios===!0&&(s=e.autoClose,v.value.click()),_(),ue(!0),l("show",i)},e.transitionDuration)}function r(i){k(),le(),w(!0),h!==null&&(i===void 0||i.qClickOutside!==!0)&&(((i&&i.type.indexOf("key")===0?h.closest('[tabindex]:not([tabindex^="-"])'):void 0)||h).focus(),h=null),L(()=>{le(!0),l("hide",i)},e.transitionDuration)}function w(i){n=void 0,g!==void 0&&(g(),g=void 0),(i===!0||y.value===!0)&&(Zl(N),Z(),Ot(p),Rt(F)),i!==!0&&(h=null)}function A(){(q.value!==null||e.scrollTarget!==void 0)&&(P.value=Gl(q.value,e.scrollTarget),$(P.value,_))}function R(i){s!==!0?(Jl(I,i),l("click",i)):s=!1}function N(i){ve.value===!0&&e.noFocus!==!0&&ln(v.value,i.target)!==!0&&de()}function F(i){l("escapeKey"),te(i)}function _(){const i=v.value;i===null||q.value===null||ql({el:i,offset:e.offset,anchorEl:q.value,anchorOrigin:T.value,selfOrigin:Q.value,absoluteOffset:n,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function X(){return C(Gt,j.value,()=>y.value===!0?C("div",{role:"menu",...a,ref:v,tabindex:-1,class:["q-menu q-position-engine scroll"+U.value,a.class],style:[a.style,J.value],..._e.value},ht(o.default)):null)}return tt(w),Object.assign(I,{focus:de,updatePosition:_}),z}}),ul=pe({name:"QPopupProxy",props:{...Qt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:o,emit:l,attrs:a}){const{proxy:h}=Le(),{$q:n}=h,g=M(!1),s=M(null),b=S(()=>parseInt(e.breakpoint,10)),{canShow:I}=Ut({showing:g});function d(){return n.screen.width<b.value||n.screen.height<b.value?"dialog":"menu"}const v=M(d()),y=S(()=>v.value==="menu"?{maxHeight:"99vh"}:{});ie(()=>d(),x=>{g.value!==!0&&(v.value=x)});function f(x){g.value=!0,l("show",x)}function O(x){g.value=!1,v.value=d(),l("hide",x)}return Object.assign(h,{show(x){I(x)===!0&&s.value.show(x)},hide(x){s.value.hide(x)},toggle(x){s.value.toggle(x)}}),nn(h,"currentComponent",()=>({type:v.value,ref:s.value})),()=>{const x={ref:s,...y.value,...a,onShow:f,onHide:O};let k;return v.value==="dialog"?k=Jt:(k=il,Object.assign(x,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),C(k,x,o.default)}}}),zn=pe({name:"QField",inheritAttrs:!1,props:St,emits:el,setup(){return tl(ll())}});const An={xs:8,sm:10,md:14,lg:20,xl:24};var Je=pe({name:"QChip",props:{...Yt,...on,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:o,emit:l}){const{proxy:{$q:a}}=Le(),h=Zt(e,a),n=an(e,An),g=S(()=>e.selected===!0||e.icon!==void 0),s=S(()=>e.selected===!0?e.iconSelected||a.iconSet.chip.selected:e.icon),b=S(()=>e.iconRemove||a.iconSet.chip.remove),I=S(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),d=S(()=>{const k=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(k?` text-${k} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(I.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(h.value===!0?" q-chip--dark q-dark":"")}),v=S(()=>{const k=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},L={...k,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||a.lang.label.remove};return{chip:k,remove:L}});function y(k){k.keyCode===13&&f(k)}function f(k){e.disable||(l("update:selected",!e.selected),l("click",k))}function O(k){(k.keyCode===void 0||k.keyCode===13)&&(he(k),e.disable===!1&&(l("update:modelValue",!1),l("remove")))}function x(){const k=[];I.value===!0&&k.push(C("div",{class:"q-focus-helper"})),g.value===!0&&k.push(C(se,{class:"q-chip__icon q-chip__icon--left",name:s.value}));const L=e.label!==void 0?[C("div",{class:"ellipsis"},[e.label])]:void 0;return k.push(C("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},rn(o.default,L))),e.iconRight&&k.push(C(se,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&k.push(C(se,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:b.value,...v.value.remove,onClick:O,onKeyup:O})),k}return()=>{if(e.modelValue===!1)return;const k={class:d.value,style:n.value};return I.value===!0&&Object.assign(k,v.value.chip,{onClick:f,onKeyup:y}),un("div",k,x(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[sn,e.ripple]])}}});let et=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,et=e.scrollLeft>=0,e.remove()}const ce=1e3,Tn=["start","center","end","start-force","center-force","end-force"],rl=Array.prototype.filter,Bn=window.getComputedStyle(document.body).overflowAnchor===void 0?cn:function(e,o){e!==null&&(cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;const l=e.children||[];rl.call(l,h=>h.dataset&&h.dataset.qVsAnchor!==void 0).forEach(h=>{delete h.dataset.qVsAnchor});const a=l[o];a&&a.dataset&&(a.dataset.qVsAnchor="")}))};function Ee(e,o){return e+o}function ft(e,o,l,a,h,n,g,s){const b=e===window?document.scrollingElement||document.documentElement:e,I=h===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-g-s,scrollMaxSize:0,offsetStart:-g,offsetEnd:-s};if(h===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=b.scrollLeft,d.scrollViewSize+=b.clientWidth),d.scrollMaxSize=b.scrollWidth,n===!0&&(d.scrollStart=(et===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=b.scrollTop,d.scrollViewSize+=b.clientHeight),d.scrollMaxSize=b.scrollHeight),l!==null)for(let v=l.previousElementSibling;v!==null;v=v.previousElementSibling)v.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=v[I]);if(a!==null)for(let v=a.nextElementSibling;v!==null;v=v.nextElementSibling)v.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=v[I]);if(o!==e){const v=b.getBoundingClientRect(),y=o.getBoundingClientRect();h===!0?(d.offsetStart+=y.left-v.left,d.offsetEnd-=y.width):(d.offsetStart+=y.top-v.top,d.offsetEnd-=y.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function jt(e,o,l,a){o==="end"&&(o=(e===window?document.body:e)[l===!0?"scrollWidth":"scrollHeight"]),e===window?l===!0?(a===!0&&(o=(et===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):l===!0?(a===!0&&(o=(et===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function je(e,o,l,a){if(l>=a)return 0;const h=o.length,n=Math.floor(l/ce),g=Math.floor((a-1)/ce)+1;let s=e.slice(n,g).reduce(Ee,0);return l%ce!==0&&(s-=o.slice(n*ce,l).reduce(Ee,0)),a%ce!==0&&a!==h&&(s-=o.slice(a,g*ce).reduce(Ee,0)),s}const In={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Mn={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...In};function Fn({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:l,virtualScrollItemSizeComputed:a}){const h=Le(),{props:n,emit:g,proxy:s}=h,{$q:b}=s;let I,d,v,y=[],f;const O=M(0),x=M(0),k=M({}),L=M(null),j=M(null),J=M(null),P=M({from:0,to:0}),$=S(()=>n.tableColspan!==void 0?n.tableColspan:100);a===void 0&&(a=S(()=>n.virtualScrollItemSize));const Z=S(()=>a.value+";"+n.virtualScrollHorizontal),q=S(()=>Z.value+";"+n.virtualScrollSliceRatioBefore+";"+n.virtualScrollSliceRatioAfter);ie(q,()=>{U()}),ie(Z,ee);function ee(){Q(d,!0)}function te(r){Q(r===void 0?d:r)}function ue(r,w){const A=o();if(A==null||A.nodeType===8)return;const R=ft(A,l(),L.value,j.value,n.virtualScrollHorizontal,b.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd);v!==R.scrollViewSize&&U(R.scrollViewSize),z(A,R,Math.min(e.value-1,Math.max(0,parseInt(r,10)||0)),0,Tn.indexOf(w)>-1?w:d>-1&&r>d?"end":"start")}function le(){const r=o();if(r==null||r.nodeType===8)return;const w=ft(r,l(),L.value,j.value,n.virtualScrollHorizontal,b.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd),A=e.value-1,R=w.scrollMaxSize-w.offsetStart-w.offsetEnd-x.value;if(I===w.scrollStart)return;if(w.scrollMaxSize<=0){z(r,w,0,0);return}v!==w.scrollViewSize&&U(w.scrollViewSize),p(P.value.from);const N=Math.floor(w.scrollMaxSize-Math.max(w.scrollViewSize,w.offsetEnd)-Math.min(f[A],w.scrollViewSize/2));if(N>0&&Math.ceil(w.scrollStart)>=N){z(r,w,A,w.scrollMaxSize-w.offsetEnd-y.reduce(Ee,0));return}let F=0,_=w.scrollStart-w.offsetStart,X=_;if(_<=R&&_+w.scrollViewSize>=O.value)_-=O.value,F=P.value.from,X=_;else for(let i=0;_>=y[i]&&F<A;i++)_-=y[i],F+=ce;for(;_>0&&F<A;)_-=f[F],_>-w.scrollViewSize?(F++,X=_):X=f[F]+_;z(r,w,F,X)}function z(r,w,A,R,N){const F=typeof N=="string"&&N.indexOf("-force")>-1,_=F===!0?N.replace("-force",""):N,X=_!==void 0?_:"start";let i=Math.max(0,A-k.value[X]),Y=i+k.value.total;Y>e.value&&(Y=e.value,i=Math.max(0,Y-k.value.total)),I=w.scrollStart;const me=i!==P.value.from||Y!==P.value.to;if(me===!1&&_===void 0){ve(A);return}const{activeElement:be}=document,fe=J.value;me===!0&&fe!==null&&fe!==be&&fe.contains(be)===!0&&(fe.addEventListener("focusout",T),setTimeout(()=>{fe!==null&&fe.removeEventListener("focusout",T)})),Bn(fe,A-i);const Ke=_!==void 0?f.slice(i,A).reduce(Ee,0):0;if(me===!0){const we=Y>=P.value.from&&i<=P.value.to?P.value.to:Y;P.value={from:i,to:we},O.value=je(y,f,0,i),x.value=je(y,f,Y,e.value),requestAnimationFrame(()=>{P.value.to!==Y&&I===w.scrollStart&&(P.value={from:P.value.from,to:Y},x.value=je(y,f,Y,e.value))})}requestAnimationFrame(()=>{if(I!==w.scrollStart)return;me===!0&&p(i);const we=f.slice(i,A).reduce(Ee,0),Ve=we+w.offsetStart+O.value,Qe=Ve+f[A];let Pe=Ve+R;if(_!==void 0){const lt=we-Ke,oe=w.scrollStart+lt;Pe=F!==!0&&oe<Ve&&Qe<oe+w.scrollViewSize?oe:_==="end"?Qe-w.scrollViewSize:Ve-(_==="start"?0:Math.round((w.scrollViewSize-f[A])/2))}I=Pe,jt(r,Pe,n.virtualScrollHorizontal,b.lang.rtl),ve(A)})}function p(r){const w=J.value;if(w){const A=rl.call(w.children,i=>i.classList&&i.classList.contains("q-virtual-scroll--skip")===!1),R=A.length,N=n.virtualScrollHorizontal===!0?i=>i.getBoundingClientRect().width:i=>i.offsetHeight;let F=r,_,X;for(let i=0;i<R;){for(_=N(A[i]),i++;i<R&&A[i].classList.contains("q-virtual-scroll--with-prev")===!0;)_+=N(A[i]),i++;X=_-f[F],X!==0&&(f[F]+=X,y[Math.floor(F/ce)]+=X),F++}}}function T(){J.value!==null&&J.value!==void 0&&J.value.focus()}function Q(r,w){const A=1*a.value;(w===!0||Array.isArray(f)===!1)&&(f=[]);const R=f.length;f.length=e.value;for(let F=e.value-1;F>=R;F--)f[F]=A;const N=Math.floor((e.value-1)/ce);y=[];for(let F=0;F<=N;F++){let _=0;const X=Math.min((F+1)*ce,e.value);for(let i=F*ce;i<X;i++)_+=f[i];y.push(_)}d=-1,I=void 0,O.value=je(y,f,0,P.value.from),x.value=je(y,f,P.value.to,e.value),r>=0?(p(P.value.from),ge(()=>{ue(r)})):de()}function U(r){if(r===void 0&&typeof window!="undefined"){const _=o();_!=null&&_.nodeType!==8&&(r=ft(_,l(),L.value,j.value,n.virtualScrollHorizontal,b.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd).scrollViewSize)}v=r;const w=parseFloat(n.virtualScrollSliceRatioBefore)||0,A=parseFloat(n.virtualScrollSliceRatioAfter)||0,R=1+w+A,N=r===void 0||r<=0?1:Math.ceil(r/a.value),F=Math.max(1,N,Math.ceil((n.virtualScrollSliceSize>0?n.virtualScrollSliceSize:10)/R));k.value={total:Math.ceil(F*R),start:Math.ceil(F*w),center:Math.ceil(F*(.5+w)),end:Math.ceil(F*(1+w)),view:N}}function _e(r,w){const A=n.virtualScrollHorizontal===!0?"width":"height",R={["--q-virtual-scroll-item-"+A]:a.value+"px"};return[r==="tbody"?C(r,{class:"q-virtual-scroll__padding",key:"before",ref:L},[C("tr",[C("td",{style:{[A]:`${O.value}px`,...R},colspan:$.value})])]):C(r,{class:"q-virtual-scroll__padding",key:"before",ref:L,style:{[A]:`${O.value}px`,...R}}),C(r,{class:"q-virtual-scroll__content",key:"content",ref:J,tabindex:-1},w.flat()),r==="tbody"?C(r,{class:"q-virtual-scroll__padding",key:"after",ref:j},[C("tr",[C("td",{style:{[A]:`${x.value}px`,...R},colspan:$.value})])]):C(r,{class:"q-virtual-scroll__padding",key:"after",ref:j,style:{[A]:`${x.value}px`,...R}})]}function ve(r){d!==r&&(n.onVirtualScroll!==void 0&&g("virtualScroll",{index:r,from:P.value.from,to:P.value.to-1,direction:r<d?"decrease":"increase",ref:s}),d=r)}U();const de=dn(le,b.platform.is.ios===!0?120:35);fn(()=>{U()});let m=!1;return vn(()=>{m=!0}),mn(()=>{if(m!==!0)return;const r=o();I!==void 0&&r!==void 0&&r!==null&&r.nodeType!==8?jt(r,I,n.virtualScrollHorizontal,b.lang.rtl):ue(d)}),tt(()=>{de.cancel()}),Object.assign(s,{scrollTo:ue,reset:ee,refresh:te}),{virtualScrollSliceRange:P,virtualScrollSliceSizeComputed:k,setVirtualScrollSize:U,onVirtualScrollEvt:de,localResetVirtualScroll:Q,padVirtualScroll:_e,scrollTo:ue,reset:ee,refresh:te}}const Wt=e=>["add","add-unique","toggle"].includes(e),On=".*+?^${}()|[]\\",$n=Object.keys(St);var En=pe({name:"QSelect",inheritAttrs:!1,props:{...Mn,...gn,...St,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Wt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...el,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:o,emit:l}){const{proxy:a}=Le(),{$q:h}=a,n=M(!1),g=M(!1),s=M(-1),b=M(""),I=M(!1),d=M(!1);let v,y,f,O,x,k,L,j,J;const P=M(null),$=M(null),Z=M(null),q=M(null),ee=M(null),te=hn(e),ue=pn(zt),le=S(()=>Array.isArray(e.options)?e.options.length:0),z=S(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:p,virtualScrollSliceSizeComputed:T,localResetVirtualScroll:Q,padVirtualScroll:U,onVirtualScrollEvt:_e,scrollTo:ve,setVirtualScrollSize:de}=Fn({virtualScrollLength:le,getVirtualScrollTarget:fl,getVirtualScrollEl:Vt,virtualScrollItemSizeComputed:z}),m=ll(),r=S(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,c=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const u=e.mapOptions===!0&&y!==void 0?y:[],V=c.map(H=>dl(H,u));return e.modelValue===null&&t===!0?V.filter(H=>H!==null):V}return c}),w=S(()=>{const t={};return $n.forEach(c=>{const u=e[c];u!==void 0&&(t[c]=u)}),t}),A=S(()=>e.optionsDark===null?m.isDark.value:e.optionsDark),R=S(()=>Ht(r.value)),N=S(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),F=S(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),_=S(()=>le.value===0),X=S(()=>r.value.map(t=>ae.value(t)).join(", ")),i=S(()=>e.displayValue!==void 0?e.displayValue:X.value),Y=S(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),me=S(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(Y.value))),be=S(()=>m.focused.value===!0?e.tabindex:-1),fe=S(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":n.value===!0?"true":"false","aria-controls":`${m.targetUid.value}_lb`};return s.value>=0&&(t["aria-activedescendant"]=`${m.targetUid.value}_${s.value}`),t}),Ke=S(()=>({id:`${m.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),we=S(()=>r.value.map((t,c)=>({index:c,opt:t,html:Y.value(t),selected:!0,removeAtIndex:cl,toggleOption:ke,tabindex:be.value}))),Ve=S(()=>{if(le.value===0)return[];const{from:t,to:c}=p.value;return e.options.slice(t,c).map((u,V)=>{const H=qe.value(u)===!0,E=t+V,W={clickable:!0,active:!1,activeClass:lt.value,manualFocus:!0,focused:!1,disable:H,tabindex:-1,dense:e.optionsDense,dark:A.value,role:"option",id:`${m.targetUid.value}_${E}`,onClick:()=>{ke(u)}};return H!==!0&&(at(u)===!0&&(W.active=!0),s.value===E&&(W.focused=!0),W["aria-selected"]=W.active===!0?"true":"false",h.platform.is.desktop===!0&&(W.onMousemove=()=>{n.value===!0&&ze(E)})),{index:E,opt:u,html:Y.value(u),label:ae.value(u),selected:W.active,focused:W.focused,toggleOption:ke,setOptionIndex:ze,itemProps:W}})}),Qe=S(()=>e.dropdownIcon!==void 0?e.dropdownIcon:h.iconSet.arrow.dropdown),Pe=S(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),lt=S(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),oe=S(()=>ot(e.optionValue,"value")),ae=S(()=>ot(e.optionLabel,"label")),qe=S(()=>ot(e.optionDisable,"disable")),Ue=S(()=>r.value.map(t=>oe.value(t))),sl=S(()=>{const t={onInput:zt,onChange:ue,onKeydown:_t,onKeyup:Ct,onKeypress:xt,onFocus:wt,onClick(c){f===!0&&Me(c)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ue,t});ie(r,t=>{y=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&m.innerLoading.value!==!0&&(g.value!==!0&&n.value!==!0||R.value!==!0)&&(O!==!0&&Ie(),(g.value===!0||n.value===!0)&&Ae(""))},{immediate:!0}),ie(()=>e.fillInput,Ie),ie(n,it),ie(le,xl);function pt(t){return e.emitValue===!0?oe.value(t):t}function nt(t){if(t>-1&&t<r.value.length)if(e.multiple===!0){const c=e.modelValue.slice();l("remove",{index:t,value:c.splice(t,1)[0]}),l("update:modelValue",c)}else l("update:modelValue",null)}function cl(t){nt(t),m.focus()}function bt(t,c){const u=pt(t);if(e.multiple!==!0){e.fillInput===!0&&Re(ae.value(t),!0,!0),l("update:modelValue",u);return}if(r.value.length===0){l("add",{index:0,value:u}),l("update:modelValue",e.multiple===!0?[u]:u);return}if(c===!0&&at(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const V=e.modelValue.slice();l("add",{index:V.length,value:u}),V.push(u),l("update:modelValue",V)}function ke(t,c){if(m.editable.value!==!0||t===void 0||qe.value(t)===!0)return;const u=oe.value(t);if(e.multiple!==!0){c!==!0&&(Re(e.fillInput===!0?ae.value(t):"",!0,!0),Ce()),$.value!==null&&$.value.focus(),(r.value.length===0||He(oe.value(r.value[0]),u)!==!0)&&l("update:modelValue",e.emitValue===!0?u:t);return}if((f!==!0||I.value===!0)&&m.focus(),wt(),r.value.length===0){const E=e.emitValue===!0?u:t;l("add",{index:0,value:E}),l("update:modelValue",e.multiple===!0?[E]:E);return}const V=e.modelValue.slice(),H=Ue.value.findIndex(E=>He(E,u));if(H>-1)l("remove",{index:H,value:V.splice(H,1)[0]});else{if(e.maxValues!==void 0&&V.length>=e.maxValues)return;const E=e.emitValue===!0?u:t;l("add",{index:V.length,value:E}),V.push(E)}l("update:modelValue",V)}function ze(t){if(h.platform.is.desktop!==!0)return;const c=t>-1&&t<le.value?t:-1;s.value!==c&&(s.value=c)}function Xe(t=1,c){if(n.value===!0){let u=s.value;do u=$t(u+t,-1,le.value-1);while(u!==-1&&u!==s.value&&qe.value(e.options[u])===!0);s.value!==u&&(ze(u),ve(u),c!==!0&&e.useInput===!0&&e.fillInput===!0&&Ye(u>=0?ae.value(e.options[u]):k))}}function dl(t,c){const u=V=>He(oe.value(V),t);return e.options.find(u)||c.find(u)||t}function ot(t,c){const u=t!==void 0?t:c;return typeof u=="function"?u:V=>V!==null&&typeof V=="object"&&u in V?V[u]:V}function at(t){const c=oe.value(t);return Ue.value.find(u=>He(u,c))!==void 0}function wt(t){e.useInput===!0&&$.value!==null&&(t===void 0||$.value===t.target&&t.target.value===X.value)&&$.value.select()}function kt(t){bn(t,27)===!0&&n.value===!0&&(Me(t),Ce(),Ie()),l("keyup",t)}function Ct(t){const{value:c}=t.target;if(t.keyCode!==void 0){kt(t);return}if(t.target.value="",clearTimeout(v),Ie(),typeof c=="string"&&c.length>0){const u=c.toLocaleLowerCase(),V=E=>{const W=e.options.find(ne=>E.value(ne).toLocaleLowerCase()===u);return W===void 0?!1:(r.value.indexOf(W)===-1?ke(W):Ce(),!0)},H=E=>{V(oe)!==!0&&(V(ae)===!0||E===!0||Ae(c,!0,()=>H(!0)))};H()}else m.clearValue(t)}function xt(t){l("keypress",t)}function _t(t){if(l("keydown",t),wn(t)===!0)return;const c=b.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),u=t.shiftKey!==!0&&e.multiple!==!0&&(s.value>-1||c===!0);if(t.keyCode===27){dt(t);return}if(t.keyCode===9&&u===!1){Te();return}if(t.target===void 0||t.target.id!==m.targetUid.value)return;if(t.keyCode===40&&m.innerLoading.value!==!0&&n.value===!1){he(t),Be();return}if(t.keyCode===8&&e.hideSelected!==!0&&b.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?nt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&l("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof b.value!="string"||b.value.length===0)&&(he(t),s.value=-1,Xe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&T.value!==void 0&&(he(t),s.value=Math.max(-1,Math.min(le.value,s.value+(t.keyCode===33?-1:1)*T.value.view)),Xe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(he(t),Xe(t.keyCode===38?-1:1,e.multiple));const V=le.value;if((j===void 0||J<Date.now())&&(j=""),V>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||j.length>0)){n.value!==!0&&Be(t);const H=t.key.toLocaleLowerCase(),E=j.length===1&&j[0]===H;J=Date.now()+1500,E===!1&&(he(t),j+=H);const W=new RegExp("^"+j.split("").map(ut=>On.indexOf(ut)>-1?"\\"+ut:ut).join(".*"),"i");let ne=s.value;if(E===!0||ne<0||W.test(ae.value(e.options[ne]))!==!0)do ne=$t(ne+1,-1,V-1);while(ne!==s.value&&(qe.value(e.options[ne])===!0||W.test(ae.value(e.options[ne]))!==!0));s.value!==ne&&ge(()=>{ze(ne),ve(ne),ne>=0&&e.useInput===!0&&e.fillInput===!0&&Ye(ae.value(e.options[ne]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||j!=="")&&(t.keyCode!==9||u===!1))){if(t.keyCode!==9&&he(t),s.value>-1&&s.value<V){ke(e.options[s.value]);return}if(c===!0){const H=(E,W)=>{if(W){if(Wt(W)!==!0)return}else W=e.newValueMode;if(E==null)return;Re("",e.multiple!==!0,!0),(W==="toggle"?ke:bt)(E,W==="add-unique"),e.multiple!==!0&&($.value!==null&&$.value.focus(),Ce())};if(e.onNewValue!==void 0?l("newValue",b.value,H):H(b.value),e.multiple!==!0)return}n.value===!0?Te():m.innerLoading.value!==!0&&Be()}}function Vt(){return f===!0?ee.value:Z.value!==null&&Z.value.contentEl!==null?Z.value.contentEl:void 0}function fl(){return Vt()}function vl(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?we.value.map(t=>o["selected-item"](t)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?we.value.map((t,c)=>C(Je,{key:"option-"+c,removable:m.editable.value===!0&&qe.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:be.value,onRemove(){t.removeAtIndex(c)}},()=>C("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ae.value(t.opt)}))):[C("span",{[me.value===!0?"innerHTML":"textContent"]:i.value})]}function qt(){if(_.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:b.value}):void 0;const t=o.option!==void 0?o.option:u=>C(Tl,{key:u.index,...u.itemProps},()=>C(Al,()=>C(We,()=>C("span",{[u.html===!0?"innerHTML":"textContent"]:u.label}))));let c=U("div",Ve.value.map(t));return o["before-options"]!==void 0&&(c=o["before-options"]().concat(c)),Xt(o["after-options"],c)}function ml(t,c){const u=c===!0?{...fe.value,...m.splitAttrs.attributes.value}:void 0,V={ref:c===!0?$:void 0,key:"i_t",class:N.value,style:e.inputStyle,value:b.value!==void 0?b.value:"",type:"search",...u,id:c===!0?m.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...sl.value};return t!==!0&&f===!0&&(Array.isArray(V.class)===!0?V.class=[...V.class,"no-pointer-events"]:V.class+=" no-pointer-events"),C("input",V)}function zt(t){clearTimeout(v),!(t&&t.target&&t.target.qComposing===!0)&&(Ye(t.target.value||""),O=!0,k=b.value,m.focused.value!==!0&&(f!==!0||I.value===!0)&&m.focus(),e.onFilter!==void 0&&(v=setTimeout(()=>{Ae(b.value)},e.inputDebounce)))}function Ye(t){b.value!==t&&(b.value=t,l("inputValue",t))}function Re(t,c,u){O=u!==!0,e.useInput===!0&&(Ye(t),(c===!0||u!==!0)&&(k=t),c!==!0&&Ae(t))}function Ae(t,c,u){if(e.onFilter===void 0||c!==!0&&m.focused.value!==!0)return;m.innerLoading.value===!0?l("filterAbort"):(m.innerLoading.value=!0,d.value=!0),t!==""&&e.multiple!==!0&&r.value.length>0&&O!==!0&&t===ae.value(r.value[0])&&(t="");const V=setTimeout(()=>{n.value===!0&&(n.value=!1)},10);clearTimeout(x),x=V,l("filter",t,(H,E)=>{(c===!0||m.focused.value===!0)&&x===V&&(clearTimeout(x),typeof H=="function"&&H(),d.value=!1,ge(()=>{m.innerLoading.value=!1,m.editable.value===!0&&(c===!0?n.value===!0&&Ce():n.value===!0?it(!0):n.value=!0),typeof E=="function"&&ge(()=>{E(a)}),typeof u=="function"&&ge(()=>{u(a)})}))},()=>{m.focused.value===!0&&x===V&&(clearTimeout(x),m.innerLoading.value=!1,d.value=!1),n.value===!0&&(n.value=!1)})}function gl(){return C(il,{ref:Z,class:F.value,style:e.popupContentStyle,modelValue:n.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&_.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:A.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Pe.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ke.value,onScrollPassive:_e,onBeforeShow:Tt,onBeforeHide:hl,onShow:Sl},qt)}function hl(t){Bt(t),Te()}function Sl(){de()}function yl(t){Me(t),$.value!==null&&$.value.focus(),I.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function pl(t){Me(t),ge(()=>{I.value=!1})}function bl(){const t=[C(zn,{class:`col-auto ${m.fieldClass.value}`,...w.value,for:m.targetUid.value,dark:A.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:b.value.length>0,...m.splitAttrs.listeners.value,onFocus:yl,onBlur:pl},{...o,rawControl:()=>m.getControl(!0),before:void 0,after:void 0})];return n.value===!0&&t.push(C("div",{ref:ee,class:F.value+" scroll",style:e.popupContentStyle,...Ke.value,onClick:dt,onScrollPassive:_e},qt())),C(Jt,{ref:q,modelValue:g.value,position:e.useInput===!0?"top":void 0,transitionShow:L,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Tt,onBeforeHide:wl,onHide:kl,onShow:Cl},()=>C("div",{class:"q-select__dialog"+(A.value===!0?" q-select__dialog--dark q-dark":"")+(I.value===!0?" q-select__dialog--focused":"")},t))}function wl(t){Bt(t),q.value!==null&&q.value.__updateRefocusTarget(m.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),m.focused.value=!1}function kl(t){Ce(),m.focused.value===!1&&l("blur",t),Ie()}function Cl(){const t=document.activeElement;(t===null||t.id!==m.targetUid.value)&&$.value!==null&&$.value!==t&&$.value.focus(),de()}function Te(){g.value!==!0&&(s.value=-1,n.value===!0&&(n.value=!1),m.focused.value===!1&&(clearTimeout(x),x=void 0,m.innerLoading.value===!0&&(l("filterAbort"),m.innerLoading.value=!1,d.value=!1)))}function Be(t){m.editable.value===!0&&(f===!0?(m.onControlFocusin(t),g.value=!0,ge(()=>{m.focus()})):m.focus(),e.onFilter!==void 0?Ae(b.value):(_.value!==!0||o["no-option"]!==void 0)&&(n.value=!0))}function Ce(){g.value=!1,Te()}function Ie(){e.useInput===!0&&Re(e.multiple!==!0&&e.fillInput===!0&&r.value.length>0&&ae.value(r.value[0])||"",!0,!0)}function it(t){let c=-1;if(t===!0){if(r.value.length>0){const u=oe.value(r.value[0]);c=e.options.findIndex(V=>He(oe.value(V),u))}Q(c)}ze(c)}function xl(t,c){n.value===!0&&m.innerLoading.value===!1&&(Q(-1,!0),ge(()=>{n.value===!0&&m.innerLoading.value===!1&&(t>c?Q():it(!0))}))}function At(){g.value===!1&&Z.value!==null&&Z.value.updatePosition()}function Tt(t){t!==void 0&&Me(t),l("popupShow",t),m.hasPopupOpen=!0,m.onControlFocusin(t)}function Bt(t){t!==void 0&&Me(t),l("popupHide",t),m.hasPopupOpen=!1,m.onControlFocusout(t)}function It(){f=h.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||_.value===!1:!0),L=h.platform.is.ios===!0&&f===!0&&e.useInput===!0?"fade":e.transitionShow}return Sn(It),yn(At),It(),tt(()=>{clearTimeout(v)}),Object.assign(a,{showPopup:Be,hidePopup:Ce,removeAtIndex:nt,add:bt,toggleOption:ke,getOptionIndex:()=>s.value,setOptionIndex:ze,moveOptionSelection:Xe,filter:Ae,updateMenuPosition:At,updateInputValue:Re,isOptionSelected:at,getEmittingOptionValue:pt,isOptionDisabled:(...t)=>qe.value.apply(null,t)===!0,getOptionValue:(...t)=>oe.value.apply(null,t),getOptionLabel:(...t)=>ae.value.apply(null,t)}),Object.assign(m,{innerValue:r,fieldClass:S(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:P,targetRef:$,hasValue:R,showPopup:Be,floatingLabel:S(()=>e.hideSelected!==!0&&R.value===!0||typeof b.value=="number"||b.value.length>0||Ht(e.displayValue)),getControlChild:()=>{if(m.editable.value!==!1&&(g.value===!0||_.value!==!0||o["no-option"]!==void 0))return f===!0?bl():gl();m.hasPopupOpen===!0&&(m.hasPopupOpen=!1)},controlEvents:{onFocusin(t){m.onControlFocusin(t)},onFocusout(t){m.onControlFocusout(t,()=>{Ie(),Te()})},onClick(t){if(dt(t),f!==!0&&n.value===!0){Te(),$.value!==null&&$.value.focus();return}Be(t)}},getControl:t=>{const c=vl(),u=t===!0||g.value!==!0||f!==!0;if(e.useInput===!0)c.push(ml(t,u));else if(m.editable.value===!0){const H=u===!0?fe.value:void 0;c.push(C("input",{ref:u===!0?$:void 0,key:"d_t",class:"q-select__focus-target",id:u===!0?m.targetUid.value:void 0,value:i.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...H,onKeydown:_t,onKeyup:kt,onKeypress:xt})),u===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&c.push(C("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ct}))}if(te.value!==void 0&&e.disable!==!0&&Ue.value.length>0){const H=Ue.value.map(E=>C("option",{value:E,selected:!0}));c.push(C("select",{class:"hidden",name:te.value,multiple:e.multiple},H))}const V=e.useInput===!0||u!==!0?void 0:m.splitAttrs.attributes.value;return C("div",{class:"q-field__native row items-center",...V},c)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[C(se,{class:"q-select__dropdown-icon"+(n.value===!0?" rotate-180":""),name:Qe.value})]:null}),tl(m)}}),Ln=pe({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:o}){const{proxy:{$q:l}}=Le(),a=Dt(kn,Fe);if(a===Fe)return console.error("QPage needs to be a deep child of QLayout"),Fe;if(Dt(Cn,Fe)===Fe)return console.error("QPage needs to be child of QPageContainer"),Fe;const n=S(()=>{const s=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof e.styleFn=="function"){const b=a.isContainer.value===!0?a.containerHeight.value:l.screen.height;return e.styleFn(s,b)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-s+"px":l.screen.height===0?s!==0?`calc(100vh - ${s}px)`:"100vh":l.screen.height-s+"px"}}),g=S(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>C("main",{class:g.value,style:n.value},ht(o.default))}});const Pn=/([a-z\-]+)(?<site>\.com|\.net|\.co.uk|\.org|\.gov|\.io|\.redd\.it|\.youtu\.be|\.co|\.tv|\.cc)/g,Rn=/.*\n+(([⬛🟨🟩⬜]+)\n?)+/g,Nt=/\p{Extended_Pictographic}/gu,Hn=/(\p{Extended_Pictographic}[\s|$]?){4,}/gu,Dn=/!\[img\]\(emote\|t5_[0-9A-Za-z]{5,6}\|[0-9A-Za-z]+\)|!\[gif]\(giphy\|[0-9A-Za-z]+(\|downsized)?\)/g,jn=[{pattern:/(^|[\W\s])[aA][tT][hH]([\W\s]?|$)/g,replaceWith:" all time high "},{pattern:/(^|[\W\s])[pP][lL][sS]([\W\s]?|$)/g,replaceWith:" please "},{pattern:/(^|[\W\s])[iI][tT][mM]([\W\s]?|$)/g,replaceWith:" in the money "},{pattern:/(^|[\W\s])[oO][tT][mM]([\W\s]?|$)/g,replaceWith:" out of the money "},{pattern:/(^|[\W\s])[A][H]([\W\s]?|$)/g,replaceWith:" after hours "},{pattern:/([a-zA-Z]{1})\1{3,}/g,replaceWith:"$1"}];function Wn(e,o){var h,n;let l=e.speech+" ";if(Rn.test(e.text))return" wordle result ";if(Nn(o.muteEmojiSpam,e.speech))return" emoji spam ";let a=(h=e.text.match(Bl))!=null?h:[];for(const g of a){const s=g.match(Pn);s!==null&&(l=l.replace(g,`- Link to ${s}`))}l=l.replaceAll(/[\*\^\\]|&#x200B;/g,"");for(const g of jn)l=l.replaceAll(g.pattern,g.replaceWith);l=l.replaceAll(Hn," bunch of $1 emojis ");for(const g of(n=e.text.match(Dn))!=null?n:[])g.includes("gif")&&(l=l.replace(g," a gif. ")),g.includes("emote")&&(l=l.replace(g," an emote. "));return o.sayUsernames&&(l=`${e.userName} - ${e.speech}`),l}function Nn(e,o){var l,a;return e===!1||o.length<10||!Nt.test(o)?!1:((a=(l=o.match(Nt))==null?void 0:l.length)!=null?a:-1)*2/o.length>.7}const Kn={ratio:[String,Number]};function Qn(e,o){return S(()=>{const l=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const Un=16/9;var Kt=pe({name:"QImg",props:{...Kn,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Un},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:l}){const a=M(e.initialRatio),h=Qn(e,a);let n;const g=[M(null),M(x())],s=M(0),b=M(!1),I=M(!1),d=S(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),v=S(()=>({width:e.width,height:e.height})),y=S(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),f=S(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));ie(()=>O(),k);function O(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function x(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function k(q){clearTimeout(n),I.value=!1,q===null?(b.value=!1,g[s.value^1].value=x()):b.value=!0,g[s.value].value=q}function L({target:q}){n!==null&&(clearTimeout(n),a.value=q.naturalHeight===0?.5:q.naturalWidth/q.naturalHeight,j(q,1))}function j(q,ee){n===null||ee===1e3||(q.complete===!0?J(q):n=setTimeout(()=>{j(q,ee+1)},50))}function J(q){n!==null&&(s.value=s.value^1,g[s.value].value=null,b.value=!1,I.value=!1,l("load",q.currentSrc||q.src))}function P(q){clearTimeout(n),b.value=!1,I.value=!0,g[s.value].value=null,g[s.value^1].value=x(),l("error",q)}function $(q){const ee=g[q].value,te={key:"img_"+q,class:y.value,style:f.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...ee};return s.value===q?(te.class+=" q-img__image--waiting",Object.assign(te,{onLoad:L,onError:P})):te.class+=" q-img__image--loaded",C("div",{class:"q-img__container absolute-full",key:"img"+q},C("img",te))}function Z(){return b.value!==!0?C("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ht(o[I.value===!0?"error":"default"])):C("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[C(xn,{color:e.spinnerColor,size:e.spinnerSize})])}return k(O()),tt(()=>{clearTimeout(n),n=null}),()=>{const q=[];return h.value!==null&&q.push(C("div",{key:"filler",style:h.value})),I.value!==!0&&(g[0].value!==null&&q.push($(0)),g[1].value!==null&&q.push($(1))),q.push(C(Gt,{name:"q-transition--fade"},Z)),C("div",{class:d.value,style:v.value,role:"img","aria-label":e.alt},q)}}});const Xn={class:"row"},Yn={class:"column q-pa-sm col-1",style:{"min-height":"50px"}},Zn={class:"column col-9"},Gn={class:"row"},Jn={class:"row"},eo={class:"col-sm-12"},to={class:"ellipsis-3-lines text-body2",style:{"font-size":"1em"}},lo={style:{"font-size":"26pt"}},no=["href"],oo={class:"row col-1"},ao={class:"col-10"},io={class:"col-1"},uo=yt({__name:"Comment",props:{comment:null},setup(e){const o=e;let l=vt(Il);const a=M([]),h=M(b()),n=M([]);nl(()=>{I(),g()});function g(){var f,O,x,k;let v=o.comment.text.matchAll(Ml);for(const L of v)((f=L.groups)==null?void 0:f.gifid)&&((O=L.groups)==null?void 0:O.type)&&n.value.push({type:(x=L.groups)==null?void 0:x.type,id:(k=L.groups)==null?void 0:k.gifid,match:L[0]});let y=o.comment.text.matchAll(Fl);for(const L of y)n.value.push({type:"prev",id:"",match:L[0]})}function s(v){if(v.type=="giphy")return`https://i.giphy.com/media/${v.id}/giphy.webp`;if(v.type==="prev")return v.match}function b(){var v,y;return(y=(v=l==null?void 0:l.find(f=>f.community===o.comment.community))==null?void 0:v.imgIconUrl)!=null?y:""}function I(){let v=mt(o.comment)?o.comment.text.toLocaleLowerCase().matchAll(Et):o.comment.text.matchAll(Et),y=[];for(const f of v){let O=f[0].replace("$","");!Ol.includes(O)&&!y.includes(O)&&y.length<6&&y.push(O)}a.value=y}function d(v){window.open("https://www.marketwatch.com/investing/stock/"+v)}return(v,y)=>(G(),Se(Ge,null,[B($e),K("div",Xn,[K("div",Yn,[B(Kt,{fit:"scale-down",src:h.value,"spinner-color":"teal",style:{"max-width":"48px","min-width":"25px"}},null,8,["src"])]),K("div",Zn,[K("div",Gn,[B(Je,{square:"",dense:"",clickable:"",style:{"font-size":"10pt"},label:o.comment.userName,onClick:y[0]||(y[0]=f=>Oe(Lt)(o.comment.commentURL))},null,8,["label"]),o.comment.userName.includes("|")?(G(),ye(Je,{key:0,style:{"font-size":"10pt"},color:"primary",dense:"",label:o.comment.flair},null,8,["label"])):Ne("",!0)]),K("div",Jn,[K("div",eo,[K("div",to,ol(o.comment.text),1),K("div",lo,[(G(!0),Se(Ge,null,gt(n.value,f=>(G(),ye(se,{clickable:"",class:"cursor-pointer",name:f.type=="giphy"?"gif":"image"},{default:D(()=>[B(ul,{"transition-show":"flip-up","transition-hide":"flip-down"},{default:D(()=>[B(al,{style:{"min-height":"180px","min-width":"250px",overflow:"hidden"}},{default:D(()=>[K("a",{href:s(f),target:"_blank"},[B(Kt,{style:{"max-height":"280px","max-width":"350px"},loading:"lazy",src:s(f)},null,8,["src"])],8,no)]),_:2},1024)]),_:2},1024)]),_:2},1032,["name"]))),256))])])])]),K("div",oo,[(G(!0),Se(Ge,null,gt(a.value,f=>(G(),Se("div",ao,[B(Je,{clickable:"",color:"teal",label:f,onClick:O=>d(f),dense:""},null,8,["label","onClick"])]))),256)),K("div",io,[o.comment.linkURL?(G(),ye(se,{key:0,size:"20pt",class:"cursor-pointer",color:"teal",name:"link",onClick:y[1]||(y[1]=f=>Oe(Lt)(o.comment.linkURL))})):Ne("",!0)])])])],64))}}),ro={class:"q-pa-md"},so=yt({__name:"DisplayList",props:{displayList:null},setup(e){const o=e;return(l,a)=>(G(),Se("div",ro,[e.displayList.length>0?(G(),ye($e,{key:0})):Ne("",!0),(G(!0),Se(Ge,null,gt(o.displayList,h=>(G(),ye(uo,{comment:h,key:h.id},null,8,["comment"]))),128)),e.displayList.length>0?(G(),ye($e,{key:1})):Ne("",!0)]))}}),co={class:"row justify-start q-pb-lg"},fo={key:0,class:"col-lg-2 col-md-3 col-sm-5 col-xs-5 text-center"},vo={key:1,class:"col-lg-2 col-md-3 col-sm-5 col-xs-5 text-center",style:{"font-size":"28pt"}},mo={class:"col-*",style:{"border-left":"solid white 1pt"}},go={class:"row justify-between q-py-sm"},ho={class:"col-5"},So={class:"col-5 text-right"},yo={class:"col"},po={class:"row"},bo={class:"col-sm-*"},wo={class:"col-sm-*"},xo=yt({__name:"CommentController",setup(e){const o=M(!1),l=window.speechSynthesis;let a=M();const h=M(),n=M(le());let g=!1,s=M(!0),b=new Date().getTime();l.onvoiceschanged=function(){a.value=l.getVoices()};let I;const d=vt(Pl),v=vt(Rl),y=M([]);let f;window.Worker&&(console.log("setting up worker"),f=new Worker("/assets/webworker.dcff6a21.js"),f.onmessage=x),nl(async()=>{l.getVoices().length>0&&(a.value=l.getVoices()),O(),console.log("mounting comment controller done")}),_n(()=>{clearInterval(I),window.Worker&&f.postMessage({type:"pull",action:"stop"})});async function O(){if(!window.Worker)console.error("Web workers not possible in this environment! will not say anything, there may be delays!"),s.value=!1,I=setInterval(()=>{j(),new Date().getSeconds()%30},500);else{let z={type:"pull",action:"start"};console.log("posting to worker:",z),f.postMessage(z)}}function x(z){z.data.type==="pull"&&j(),z.data.type==="checkLong"&&P()}function k(){n.value={...st}}function L(z){return rt(`checking should say comment ${o.value}, ${v.muteBots}, ${mt(z)}`),o.value&&v.muteBots&&!mt(z)}function j(){if(g)return;let z=d.pullOne();if(!!z&&(y.value.unshift(z),y.value.length>v.postsToDisplay&&(y.value=y.value.slice(0,v.postsToDisplay)),L(z))){if(h.value===void 0)return;let T=Wn(z,v);var p=new SpeechSynthesisUtterance(T.substring(0,1e3));p.voice=h.value,p.lang=h.value.lang,p.rate=n.value.rate,p.volume=n.value.volume,p.pitch=n.value.pitch,g=!0;try{rt("Starting speak..."),J(p)}catch{g=!1}}}function J(z){z.onend=p=>{$()},z.onerror=p=>{console.error("Error saying speech!",p),l.cancel(),$()},b=new Date().getTime(),l.speak(z),f.postMessage({type:"checkLong",action:"start"})}function P(){q()?Z():!$l()&&!El()&&(l.pause(),l.resume())}function $(){g=!1,f.postMessage({type:"checkLong",action:"stop"})}function Z(){l.cancel(),$()}function q(){if(g){var z=new Date().getTime()-b;return z/1e3>Ll}else return!1}function ee(){o.value=!1,Z()}function te(){d.backlog.value.length>5&&d.clearBacklog()}ie(a,(z,p)=>{console.log("synth voices loaded",a),ue()});function ue(){if(!a.value){console.error("Tried selecting stored voice but allvoices len = 0");return}let z="voicepref",p=Pt(z);if(!p||p==="undefined"){console.log("coudn't find stored voice, saving new one");let T=a.value.find(U=>U.name.includes("UK")&&U.name.includes("Male")||U.name.includes("United Kingdom")),Q=a.value.find(U=>U.default==!0);h.value=T||Q||a.value[0],Ze(z,h.value.name)}else{console.log(`attempting to find ${p} in allvoices:`,a.value);let T=a.value.find(Q=>Q.name===p);console.log("loading voice from storage "+(T==null?void 0:T.name)),h.value=T!=null?T:a.value[0]}}function le(){let z={...st};for(const[p,T]of Object.entries(z)){const Q=p;let U=Pt(`check_${p}`);U===null&&Ze(`check_${p}`,st[Q]),z[Q]=U}return z}return ie(n,z=>{for(const[p,T]of Object.entries(n.value)){const Q=p;Ze(`check_${p}`,n.value[Q])}},{deep:!0}),ie(h,z=>{var p,T;z!=null&&z!=null&&Ze("voicepref",(T=(p=h.value)==null?void 0:p.name)!=null?T:"null")}),(z,p)=>(G(),ye(Ln,{class:"items-start justify-start",padding:""},{default:D(()=>[K("div",co,[o.value?(G(),Se("div",vo,[B(De,{dense:"",icon:"remove_from_queue",style:{"font-size":"14pt"},onClick:te},{default:D(()=>[B(qn,{floating:"",color:"teal"},{default:D(()=>[re(ol(Oe(d).backlog.value.length),1)]),_:1}),B(xe,null,{default:D(()=>[re(" Trim Backlog ")]),_:1})]),_:1}),B(De,{dense:"",onClick:ee},{default:D(()=>[B(xe,null,{default:D(()=>[re(" Stop Speaking ")]),_:1}),B(se,{class:"q-px-md text-red-4",name:"stop",size:"26pt"})]),_:1}),B(De,{dense:"",onClick:p[1]||(p[1]=T=>Z())},{default:D(()=>[B(xe,null,{default:D(()=>[re(" Skip ")]),_:1}),B(se,{class:"q-px-md",name:"fast_forward",size:"26pt"})]),_:1})])):(G(),Se("div",fo,[B(De,{onClick:p[0]||(p[0]=T=>o.value=!0)},{default:D(()=>[B(xe,null,{default:D(()=>[re(" Start Speaking ")]),_:1}),B(se,{name:"record_voice_over",size:"26pt"})]),_:1})])),K("div",mo,[B(se,{clickable:"",class:"cursor-pointer q-pa-sm",name:"tune",style:{"font-size":"26pt"}},{default:D(()=>[B(xe,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:D(()=>[re(" Speech Settings ")]),_:1}),B(ul,{"transition-show":"jump-up","transition-hide":"flip-down"},{default:D(()=>[B(al,{class:"q-pa-md",style:{"min-height":"180px","min-width":"350px",overflow:"hidden"}},{default:D(()=>[K("div",go,[K("div",ho,[B(We,null,{default:D(()=>[re("Speech Tuning")]),_:1})]),K("div",So,[B(De,{dense:"",outline:"",size:"8pt",color:"teal",onClick:k},{default:D(()=>[B(xe,null,{default:D(()=>[re(" Reset To Default ")]),_:1}),B(se,{name:"refresh"})]),_:1})])]),B($e),B(We,null,{default:D(()=>[re(" Volume ")]),_:1}),B(ct,{modelValue:n.value.volume,"onUpdate:modelValue":p[2]||(p[2]=T=>n.value.volume=T),min:.1,max:1,step:.1,snap:"",label:"",color:"teal",onChange:p[3]||(p[3]=T=>{Oe(rt)("updating volume to "+T),n.value.volume=T})},null,8,["modelValue"]),B($e),B(We,null,{default:D(()=>[re(" pitch ")]),_:1}),B(ct,{modelValue:n.value.pitch,"onUpdate:modelValue":p[4]||(p[4]=T=>n.value.pitch=T),min:0,max:2,step:.2,snap:"",label:"",color:"teal",onChange:p[5]||(p[5]=T=>n.value.pitch=T)},null,8,["modelValue"]),B($e),B(We,null,{default:D(()=>[re(" rate ")]),_:1}),B(ct,{modelValue:n.value.rate,"onUpdate:modelValue":p[6]||(p[6]=T=>n.value.rate=T),min:.5,max:3,step:.1,snap:"",label:"",color:"teal",onChange:p[7]||(p[7]=T=>n.value.rate=T)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),K("div",yo,[K("div",po,[K("div",bo,[B(En,{modelValue:h.value,"onUpdate:modelValue":p[8]||(p[8]=T=>h.value=T),options:Oe(a),label:"Selected Voice","option-value":"name","option-label":"name",style:{"min-width":"250px","max-width":"400px"},filled:"","options-selected-class":"text-white bg-teal",labelColor:"white",dense:""},null,8,["modelValue","options"])]),K("div",wo,[Oe(s)?Ne("",!0):(G(),ye(se,{key:0,name:"warning_amber",color:"amber",size:"24pt",class:"q-pa-sm"},{default:D(()=>[B(xe,null,{default:D(()=>[re(" Environment doesn't support Web Workers - Javascript throttling likely. Expect slowdowns. ")]),_:1})]),_:1}))])])])]),B(so,{displayList:y.value},null,8,["displayList"])]),_:1}))}});export{xo as default};
